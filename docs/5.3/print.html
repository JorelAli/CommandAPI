<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CommandAPI Documentation v5.3</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="style.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="intro.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Server Owner Usage</li><li class="chapter-item "><a href="installation.html"><strong aria-hidden="true">1.</strong> Installation for server owners</a></li><li class="chapter-item "><a href="config.html"><strong aria-hidden="true">2.</strong> Configuration for server owners</a></li><li class="chapter-item "><a href="conversionforowners.html"><strong aria-hidden="true">3.</strong> Command conversion</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="conversionforownerssingle.html"><strong aria-hidden="true">3.1.</strong> Single command conversion</a></li><li class="chapter-item "><a href="conversionforownerssingleargs.html"><strong aria-hidden="true">3.2.</strong> Single command conversion (with arguments)</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><li class="part-title">CommandAPI Setup</li><li class="chapter-item "><a href="quickstart.html"><strong aria-hidden="true">4.</strong> Setting up your development environment</a></li><li class="chapter-item "><a href="shading.html"><strong aria-hidden="true">5.</strong> Shading the CommandAPI in your plugins</a></li><li class="chapter-item "><a href="annotationsetup.html"><strong aria-hidden="true">6.</strong> Using the annotation system</a></li><li class="chapter-item affix "><li class="part-title">Creating Commands</li><li class="chapter-item "><a href="commandregistration.html"><strong aria-hidden="true">7.</strong> Command registration</a></li><li class="chapter-item "><a href="commandexecutors.html"><strong aria-hidden="true">8.</strong> Command executors</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="normalexecutors.html"><strong aria-hidden="true">8.1.</strong> Normal command executors</a></li><li class="chapter-item "><a href="proxysender.html"><strong aria-hidden="true">8.2.</strong> Proxied commandsenders</a></li><li class="chapter-item "><a href="native.html"><strong aria-hidden="true">8.3.</strong> Native commandsenders</a></li><li class="chapter-item "><a href="resultingcommandexecutors.html"><strong aria-hidden="true">8.4.</strong> Resulting command executors</a></li><li class="chapter-item "><a href="commandfailures.html"><strong aria-hidden="true">8.5.</strong> Handling command failures</a></li></ol></li><li class="chapter-item "><a href="arguments.html"><strong aria-hidden="true">9.</strong> Arguments (in general)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argumentsuggestions.html"><strong aria-hidden="true">9.1.</strong> Argument suggestions</a></li><li class="chapter-item "><a href="safeargumentsuggestions.html"><strong aria-hidden="true">9.2.</strong> Safe argument suggestions</a></li><li class="chapter-item "><a href="tooltips.html"><strong aria-hidden="true">9.3.</strong> Argument suggestions with tooltips</a></li><li class="chapter-item "><a href="listed.html"><strong aria-hidden="true">9.4.</strong> Listed arguments</a></li></ol></li><li class="chapter-item "><a href="argumenttypes.html"><strong aria-hidden="true">10.</strong> Argument types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="primitivearguments.html"><strong aria-hidden="true">10.1.</strong> Primitive arguments</a></li><li class="chapter-item "><a href="rangedarguments.html"><strong aria-hidden="true">10.2.</strong> Ranged arguments</a></li><li class="chapter-item "><a href="stringarguments.html"><strong aria-hidden="true">10.3.</strong> String arguments</a></li><li class="chapter-item "><a href="positionargs.html"><strong aria-hidden="true">10.4.</strong> Positional arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="locationargument.html"><strong aria-hidden="true">10.4.1.</strong> Location arguments</a></li><li class="chapter-item "><a href="rotationargs.html"><strong aria-hidden="true">10.4.2.</strong> Rotation arguments</a></li><li class="chapter-item "><a href="axisarg.html"><strong aria-hidden="true">10.4.3.</strong> AxisArguments</a></li></ol></li><li class="chapter-item "><a href="chatarguments.html"><strong aria-hidden="true">10.5.</strong> Chat arguments</a></li><li class="chapter-item "><a href="entityarguments.html"><strong aria-hidden="true">10.6.</strong> Entity &amp; player arguments</a></li><li class="chapter-item "><a href="scoreboardargs.html"><strong aria-hidden="true">10.7.</strong> Scoreboard arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="scoreboardarguments.html"><strong aria-hidden="true">10.7.1.</strong> Scoreboard arguments</a></li><li class="chapter-item "><a href="objectivearguments.html"><strong aria-hidden="true">10.7.2.</strong> Objective arguments</a></li><li class="chapter-item "><a href="teamarguments.html"><strong aria-hidden="true">10.7.3.</strong> Team arguments</a></li></ol></li><li class="chapter-item "><a href="miscargs.html"><strong aria-hidden="true">10.8.</strong> Miscellaneous arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="angleargument.html"><strong aria-hidden="true">10.8.1.</strong> Angle arguments</a></li><li class="chapter-item "><a href="advancementargument.html"><strong aria-hidden="true">10.8.2.</strong> Advancement arguments</a></li><li class="chapter-item "><a href="biomeargument.html"><strong aria-hidden="true">10.8.3.</strong> Biome arguments</a></li><li class="chapter-item "><a href="blockstatearguments.html"><strong aria-hidden="true">10.8.4.</strong> BlockState arguments</a></li><li class="chapter-item "><a href="enchantmentargument.html"><strong aria-hidden="true">10.8.5.</strong> Enchantment arguments</a></li><li class="chapter-item "><a href="environmentargs.html"><strong aria-hidden="true">10.8.6.</strong> Environment arguments</a></li><li class="chapter-item "><a href="itemstackarguments.html"><strong aria-hidden="true">10.8.7.</strong> Itemstack arguments</a></li><li class="chapter-item "><a href="loottableargument.html"><strong aria-hidden="true">10.8.8.</strong> LootTable argument</a></li><li class="chapter-item "><a href="mathoperationarguments.html"><strong aria-hidden="true">10.8.9.</strong> MathOperation arguments</a></li><li class="chapter-item "><a href="particlearguments.html"><strong aria-hidden="true">10.8.10.</strong> Particle arguments</a></li><li class="chapter-item "><a href="potionarguments.html"><strong aria-hidden="true">10.8.11.</strong> Potion effect arguments</a></li><li class="chapter-item "><a href="recipeargument.html"><strong aria-hidden="true">10.8.12.</strong> Recipe arguments</a></li><li class="chapter-item "><a href="soundargument.html"><strong aria-hidden="true">10.8.13.</strong> Sound arguments</a></li><li class="chapter-item "><a href="timeargs.html"><strong aria-hidden="true">10.8.14.</strong> Time arguments</a></li><li class="chapter-item "><a href="uuidargs.html"><strong aria-hidden="true">10.8.15.</strong> UUID arguments</a></li></ol></li><li class="chapter-item "><a href="predicateargs.html"><strong aria-hidden="true">10.9.</strong> Predicate arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="blockpredicateargs.html"><strong aria-hidden="true">10.9.1.</strong> Block predicate arguments</a></li><li class="chapter-item "><a href="itemstackpredicateargs.html"><strong aria-hidden="true">10.9.2.</strong> ItemStack predicate arguments</a></li></ol></li><li class="chapter-item "><a href="nbtarguments.html"><strong aria-hidden="true">10.10.</strong> NBT arguments</a></li><li class="chapter-item "><a href="litargs.html"><strong aria-hidden="true">10.11.</strong> Literal arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="literalarguments.html"><strong aria-hidden="true">10.11.1.</strong> Literal arguments</a></li><li class="chapter-item "><a href="multilitargs.html"><strong aria-hidden="true">10.11.2.</strong> Multi literal arguments</a></li></ol></li><li class="chapter-item "><a href="customarguments.html"><strong aria-hidden="true">10.12.</strong> Custom arguments</a></li></ol></li><li class="chapter-item "><a href="functions.html"><strong aria-hidden="true">11.</strong> Functions &amp; Tags</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="functionsetup.html"><strong aria-hidden="true">11.1.</strong> Setting up functions &amp; tags</a></li><li class="chapter-item "><a href="simplefunctionwrapper.html"><strong aria-hidden="true">11.2.</strong> The SimpleFunctionWrapper class</a></li><li class="chapter-item "><a href="functionwrapper.html"><strong aria-hidden="true">11.3.</strong> The FunctionWrapper class</a></li><li class="chapter-item "><a href="functionarguments.html"><strong aria-hidden="true">11.4.</strong> Function arguments</a></li></ol></li><li class="chapter-item "><a href="permissions.html"><strong aria-hidden="true">12.</strong> Permissions</a></li><li class="chapter-item "><a href="requirements.html"><strong aria-hidden="true">13.</strong> Requirements</a></li><li class="chapter-item "><a href="aliases.html"><strong aria-hidden="true">14.</strong> Aliases</a></li><li class="chapter-item "><a href="subcommands.html"><strong aria-hidden="true">15.</strong> Subcommands</a></li><li class="chapter-item affix "><li class="part-title">Annotation-based Commands</li><li class="chapter-item "><a href="annotationsintro.html"><strong aria-hidden="true">16.</strong> Annotation-based commands</a></li><li class="chapter-item "><a href="annotations.html"><strong aria-hidden="true">17.</strong> Annotations</a></li><li class="chapter-item "><a href="registeringannotations.html"><strong aria-hidden="true">18.</strong> Registering annotation-based commands</a></li><li class="chapter-item affix "><li class="part-title">CommandAPI Utilities</li><li class="chapter-item "><a href="conversion.html"><strong aria-hidden="true">19.</strong> Command conversion</a></li><li class="chapter-item affix "><li class="part-title">Internal CommandAPI</li><li class="chapter-item "><a href="internal.html"><strong aria-hidden="true">20.</strong> Internal CommandAPI</a></li><li class="chapter-item "><a href="brigadier.html"><strong aria-hidden="true">21.</strong> Brigadier + CommandAPI</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Java Tips</li><li class="chapter-item "><a href="predicatetips.html"><strong aria-hidden="true">22.</strong> Predicate tips</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="upgrading.html">Upgrading guide</a></li><li class="chapter-item affix "><a href="incompatibleversions.html">Incompatible version information</a></li><li class="chapter-item affix "><a href="troubleshooting.html">Troubleshooting</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="afterword.html">Afterword</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="skepter">Skepter Likes Purple</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">CommandAPI Documentation v5.3</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://www.jorel.dev/CommandAPI/" title="Back to main CommandAPI page" aria-label="Back to main CommandAPI page">
                            <i id="home-button" class="fa fa-home"></i>
                        </a>
                        <a href="https://ko-fi.com/jorelali" title="Donate (ko-fi)" aria-label="Donate (ko-fi)">
                            <i id="donate-button" class="fa fa-gift"></i>
                        </a>
                        
                        <a href="https://github.com/JorelAli/CommandAPI" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>Welcome to the documentation for the CommandAPI. The CommandAPI lets you create vanilla Minecraft commands which utilize the new command features which were implemented in Minecraft 1.13, including but not limited to:</p>
<ul>
<li>Having commands compatible with the vanilla <code>/execute</code> command</li>
<li>Having commands which can be run using Minecraft functions</li>
<li>Having better auto-completion and suggestions</li>
<li>Having command type checks before execution (e.g. ensuring a number is within a certain range)</li>
</ul>
<hr />
<h2><a class="header" href="#how-the-commandapi-works" id="how-the-commandapi-works">How the CommandAPI works</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This is a pretty important section, I would recommend reading before implementing the CommandAPI in your own projects. This section tells you about setup which is not stated anywhere else in the documentation. Think of it as the &quot;knowledge you should know before using this API&quot;.</p>
</blockquote>
<p>The CommandAPI does not follow the &quot;standard&quot; method of registering commands. In other words, commands which are registered with the CommandAPI will be registered as pure vanilla Minecraft commands as opposed to Bukkit or Spigot commands. This means that the following implications exist:</p>
<ul>
<li>Commands do not need to be declared in the <code>plugin.yml</code> file</li>
<li>Commands are not &quot;linked&quot; to a certain plugin. In other words, you cannot look up which commands are registered by which plugin.</li>
</ul>
<hr />
<h2><a class="header" href="#how-this-documentation-works" id="how-this-documentation-works">How this documentation works</a></h2>
<p>This documentation is split into the major sections that build up the CommandAPI. It's been designed in such a way that it should be easy to find exactly what you want to help you get started with the CommandAPI, and how to make effective use of it. Each step of the way, the documentation will include examples which showcase how to use the CommandAPI. </p>
<p>You can use the side bar on the left to access the various sections of the documentation and can change the theme to your liking using the paintbrush icon in the top left corner. </p>
<p>Using the search icon in the top left corner, you can search for anything in this entire documentation. For example, typing &quot;Example&quot; will show a list of examples which are included throughout the documentation.</p>
<hr />
<h2><a class="header" href="#documentation-changelog" id="documentation-changelog">Documentation changelog</a></h2>
<p>Here's the list of changes to the documentation between each update. You can view the current documentation version at the top of this page.</p>
<h3><a class="header" href="#documentation-changes-52-rightarrow-53" id="documentation-changes-52-rightarrow-53">Documentation changes 5.2 \(\rightarrow\) 5.3:</a></h3>
<ul>
<li>Adds a section <a href="./annotationsetup.html">6. Using the annotation system</a> on setting up your development environment to use the annotation system</li>
<li>Adds a whole massive section on using annotations (<a href="./annotationsintro.html">16. Annotation-based commands</a>, <a href="./annotations.html">17. Annotations</a>, <a href="./registeringannotations.html">18. Registering annotation-based commands</a>)</li>
<li>Adds a section on argument suggestion deferral in section <a href="./argumentsuggestions.html#argument-suggestion-deferral">9.1. Argument suggestions</a></li>
<li>Improve warning for <code>LiteralArgument</code> - instead of it being &quot;obsolete&quot; compared to the <code>MultiLiteralArgument</code>, it is now &quot;more complex&quot; than <code>MultiLiteralArgument</code>s</li>
<li>Fix issue in the section for custom arguments which should have been updated but wasn't</li>
</ul>
<h3><a class="header" href="#documentation-changes-51-rightarrow-52" id="documentation-changes-51-rightarrow-52">Documentation changes 5.1 \(\rightarrow\) 5.2:</a></h3>
<ul>
<li>Adds brief documentation for the CommandAPI's <code>reloadDatapacks</code> method in <a href="./internal.html#reloading-datapacks">16. Internal CommandAPI</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-50-rightarrow-51" id="documentation-changes-50-rightarrow-51">Documentation changes 5.0 \(\rightarrow\) 5.1:</a></h3>
<ul>
<li>Adds a section <a href="./simplefunctionwrapper.html">10.2. The SimpleFunctionWrapper class</a> which outlines the new <code>SimpleFunctionWrapper</code> class</li>
<li>Updates the documentation for <a href="./functionwrapper.html">10.3. The FunctionWrapper class</a></li>
<li>Update the name of the package from <code>dev.jorel.commandapi.CommandAPIHandler.Brigadier</code> to <code>dev.jorel.commandapi.Brigadier</code> in section <a href="./brigadier.html#brigadier-support-functions">17. Brigadier + CommandAPI</a></li>
<li>Update the documentation for <a href="./permissions.html">11. Permissions</a> stating that you can use <code>withPermission(String)</code> instead of <code>withPermission(CommandPermission)</code></li>
</ul>
<h3><a class="header" href="#documentation-changes-43-rightarrow-50" id="documentation-changes-43-rightarrow-50">Documentation changes 4.3 \(\rightarrow\) 5.0:</a></h3>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Lots and lots and lots of changes occurred in version 5.0! I highly recommend reading the <a href="./upgrading.html">Upgrading guide</a> section which covers the changes in more detail and how to update your plugin for this version.</p>
</blockquote>
<p>Basically every page has been rewritten in this update and checked for errors. In general, this is the list of new additions:</p>
<ul>
<li>New section <a href="./conversionforowners.html">3. Command conversion</a> dedicated to command conversion via the <code>config.yml</code></li>
<li>New section <a href="./listed.html">8.4. Listed arguments</a></li>
<li>New section <a href="./anglearguments.html">9.8.1. Angle arguments</a></li>
<li>New section <a href="./subcommands.html">14. Subcommands</a></li>
<li>New section <a href="./internal">16. Internal CommandAPI</a> now lists all arguments and their respective Minecraft argument IDs</li>
<li>Mentions listed arguments in section <a href="./literalarguments.html">9.11.1. Literal arguments</a></li>
<li>Section <a href="./conversion.html">15. Command conversion</a> has been rewritten</li>
<li>Executes native is now present in the command registration page</li>
<li>Section <a href="./tooltips.html">8.3. Argument suggestions with tooltips</a> now mentions the <code>IStringTooltip</code> class</li>
</ul>
<h3><a class="header" href="#documentation-changes-42-rightarrow-43" id="documentation-changes-42-rightarrow-43">Documentation changes 4.2 \(\rightarrow\) 4.3:</a></h3>
<ul>
<li>Improve the documentation for <a href="./config.html">2. Configuration for server owners</a> by using simple YAML lists (using the <code>-</code> symbol) and update the command conversion syntax for all commands using the <code>~</code> syntax</li>
<li>Adds the command sender priority to <a href="./normalexecutors.html#multiple-command-executor-implementations">6.1. Normal command executors</a></li>
<li>Adds new method and example for converting specific commands internally in <a href="./conversion.html#only-specific-commands">13. Command conversion</a></li>
<li>Adds two sneaky little buttons in the main title toolbar at the top of the page</li>
</ul>
<h3><a class="header" href="#documentation-changes-41-rightarrow-42" id="documentation-changes-41-rightarrow-42">Documentation changes 4.1 \(\rightarrow\) 4.2:</a></h3>
<ul>
<li>Adds a warning about using redirected commands for suggestions that depend on previous arguments in <a href="./argumentsuggestions.html#suggestions-depending-on-previous-arguments">7.1. Argument suggestions</a></li>
<li>Adds a new section <a href="./native.html">6.3. Native commandsenders</a></li>
<li>Update documentation for <a href="normalexecutors.html#restricting-who-can-run-your-command">6.1. Normal command executors</a> to include the <code>.executesNative()</code> method for native command senders</li>
</ul>
<h3><a class="header" href="#documentation-changes-40-rightarrow-41" id="documentation-changes-40-rightarrow-41">Documentation changes 4.0 \(\rightarrow\) 4.1:</a></h3>
<ul>
<li>Adds a new section <a href="./tooltips.html">7.3. Argument suggestions with tooltips</a></li>
<li>Adds documentation for the <code>MultiLiteralArgument</code> in section <a href="./multilitargs.html">8.11.2. Multi literal arguments</a></li>
<li>Adds a new section <a href="./shading.html">4. Shading the CommandAPI into your plugins</a></li>
<li>Update documentation for <a href="./brigadier.html">14. Brigadier + CommandAPI</a> with new (overloaded) function <code>argBuildOf</code></li>
<li>Update <a href="./afterword.html">Afterword</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-34-rightarrow-40" id="documentation-changes-34-rightarrow-40">Documentation changes 3.4 \(\rightarrow\) 4.0:</a></h3>
<ul>
<li>Update the maven and gradle documentation to state that it is <code>provided</code> and <code>compileOnly</code></li>
<li>The project has been renamed from the &quot;1.13 Command API&quot; to simply the &quot;CommandAPI&quot;. This has changed a few things, such as various links. See the section <a href="./upgrading.html">Upgrading guide</a> to view the relevant changes with regards to maven.</li>
<li>Updated <a href="./quickstart.html">3. Setting up your development environment</a> to include new Maven repository links</li>
<li>Fixed stronkage with Java versions - there's now no random warning boxes about incompatibility with Java 12!</li>
<li>Arguments now include pictures that showcase how they work!</li>
<li>Reorganised the sections - arguments is now split up into two sections: <a href="./arguments.html">6. Arguments (in general)</a> and <a href="./argumenttypes.html">7. Argument types</a></li>
<li>Adds documentation for <a href="./safeargumentsuggestions.html">6.2. Safe argument suggestions</a></li>
<li>Adds documentation for <a href="./blockstatearguments.html">7.8.3. BlockState arguments</a></li>
<li>Adds documentation for new arguments:
<ul>
<li><code>UUIDArgument</code>: <a href="./uuidargs.html">7.8.14. UUID arguments</a></li>
<li><code>BlockPredicateArgument</code>: <a href="./blockpredicateargs.html">7.9.1. Block predicate arguments</a></li>
<li><code>ItemStackPredicateArgument</code>: <a href="./itemstackpredicateargs.html">7.9.2. ItemStack predicate arguments</a></li>
</ul>
</li>
<li>Adds page <a href="./incompatibleversions.html">Incompatible version information</a> outlining what parts of the CommandAPI are incompatible with what versions of Minecraft</li>
<li>Adds <code>getCommands()</code> documentation to the <a href="./functionwrapper.html#getcommands">8.2. The FunctionWrapper class</a> page</li>
<li>Adds page <a href="./brigadier.html">13. Brigadier + CommandAPI</a> which shows how the CommandAPI can be used with Brigadier side-by-side</li>
<li>Adds page <a href="./requirements.html">10. Requirements</a> for the requirements feature to help restrict commands</li>
<li>Adds page <a href="./predicatetips.html">14. Predicate tips</a> with information on how to reduce the amount of repeated code when using requirements</li>
<li>Update <a href="./afterword.html">Afterword</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-33-rightarrow-34" id="documentation-changes-33-rightarrow-34">Documentation changes 3.3 \(\rightarrow\) 3.4:</a></h3>
<ul>
<li>Moves configuration for server owners to a new section <a href="./config.html">2. Configuration for server owners</a>. This has the side-effect of also re-numbering all of the sections on the left. Sorry!</li>
<li>Adds server owner documentation for the CommandAPI's config command conversion system in section <a href="./config.html#command-conversion">2. Configuration for server owners</a></li>
<li>Update the conversion page <a href="./conversion.html">10. Command conversion</a> so it should be much easier to follow and understand</li>
<li>Changed the list of Java versions that the CommandAPI is compatible with in the <a href="./troubleshooting.html#commandapi-errors-when-reloading-datapacks">Troubleshooting</a> section</li>
</ul>
<h3><a class="header" href="#documentation-changes-31-rightarrow-33" id="documentation-changes-31-rightarrow-33">Documentation changes 3.1 \(\rightarrow\) 3.3:</a></h3>
<ul>
<li>Adds information on how functions are loaded in 1.16+ in section <a href="./functions.html#functions-in-116">6. Functions &amp; Tags</a></li>
<li>Added function error messages to section <a href="./troubleshooting.html#server-errors-when-loading-datapacks-in-116">Troubleshooting</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-30-rightarrow-31" id="documentation-changes-30-rightarrow-31">Documentation changes 3.0 \(\rightarrow\) 3.1:</a></h3>
<ul>
<li>Adds new section <a href="./argumentsuggestions.html">5.1 Argument suggestions</a> to cover how to override suggestions - Having it all in section <em>5. Arguments</em> was a bit too content-heavy</li>
<li>Adds documentation for the new <code>.overrideSuggestions()</code> method in section <a href="./argumentsuggestions.html#suggestions-depending-on-previous-arguments">5.1 Argument suggestions</a></li>
<li>Simplified the description of the documentation updates</li>
<li>Changed the artifact ID for the dependency of the CommandAPI. Instead of being <code>commandapi</code>, it is now <code>commandapi-core</code>. You can view the changes in section <a href="./quickstart.html">2 Setting up your development environment</a></li>
<li>Changed the repository information for gradle in section <a href="./quickstart.html">2 Setting up your development environment</a>. You now have to include the NBTAPI repository because gradle can't automatically detect this for some reason. Kinda stupid tbh.</li>
<li>Adds a section on using multiple or optional arguments in section <a href="./arguments.html#optionaldifferent-arguments">5 Arguments</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-21-rightarrow-30" id="documentation-changes-21-rightarrow-30">Documentation changes 2.1 \(\rightarrow\) 3.0:</a></h3>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Lots of changes occurred in version 3.0. I highly recommend reading the <a href="./upgrading.html">Upgrading guide</a> section which covers the changes in more detail and how to update your plugin for this version.</p>
</blockquote>
<ul>
<li>Sections on the left have been tidied up and should be more &quot;approachable&quot;</li>
<li>Installation section (<a href="./installation.html">1. Installation for server owners</a>) now includes information about additional dependencies</li>
<li>Dependency section (<a href="./quickstart.html">2. Setting up your development environment</a>) updated to use the new dependency Group ID</li>
<li>Command registration section (<a href="./commandregistration.html">3. Command registration</a>) updated to reflect new API changes</li>
<li>Command execution section (<a href="./commandexecutors.html">4. Command Executors</a>) updated to reflect new API changes</li>
<li>Arguments section (<a href="./arguments.html">5. Arguments</a>) completely rewritten to reflect new API changes. Adds more detailed examples for each argument</li>
<li>Function arguments section (<a href="./functionarguments.html">6.3 Function Arguments</a>) updated to reflect new API changes</li>
<li>Permissions section (<a href="./permissions.html">7. Permissions</a>) updated to reflect new API changes</li>
<li>Aliases section (<a href="./aliases.html">8. Aliases</a>) updated to reflect new API changes</li>
<li>Command conversion section (<a href="./conversion.html">9. Command conversion</a>) rewrite example to be more detailed</li>
</ul>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>Installing the CommandAPI is easy! Just download the latest <code>CommandAPI.jar</code> file using the button below and place it in your server's <code>plugins</code> folder!</p>
<br>
<p><a href="https://github.com/JorelAli/CommandAPI/releases/latest/download/CommandAPI.jar" style="
background-color:#EB7035;
border-radius:3px;
color:#ffffff;
display:block;
line-height:44px;
text-align:center;
width:40%;
margin-top: -30px;
margin-bottom: 30px;
margin-left:auto;
margin-right: auto;">Download latest CommandAPI.jar</a></p>
<hr />
<h2><a class="header" href="#additional-dependencies" id="additional-dependencies">Additional dependencies</a></h2>
<ul>
<li>If you use NBT data, you'll also need the <a href="https://www.spigotmc.org/resources/nbt-api.7939/">NBT API</a>. (You can find out from your developers if you need this or not)</li>
<li>If you are using raw JSON chat data, you'll need to be running <a href="https://www.spigotmc.org/wiki/about-spigot/">Spigot</a> or another spigot-related server such as <a href="https://papermc.io/">Paper Spigot</a> or <a href="https://tacospigot.github.io/">Taco Spigot</a>. (Again, you can find out from your developers if you need this or not)</li>
</ul>
<h1><a class="header" href="#configuration-for-server-owners" id="configuration-for-server-owners">Configuration for server owners</a></h1>
<p>The CommandAPI has a few configuration options to change how it functions. These options can be configured in the <code>plugins/CommandAPI/config.yml</code> file, which is generated automatically when the CommandAPI runs for the first time.</p>
<p>The default <code>config.yml</code> is shown below:</p>
<pre><code class="language-yaml">verbose-outputs: false
create-dispatcher-json: false
plugins-to-convert: []
</code></pre>
<p><strong>Configuration settings:</strong></p>
<ul>
<li><strong><code>verbose-outputs</code></strong> - If <code>true</code>, outputs command registration and unregistration logs in the console</li>
<li><strong><code>create-dispatcher-json</code></strong> - If <code>true</code>, the CommandAPI creates a <code>command_registration.json</code> file showing the mapping of registered commands. This is designed to be used by developers - setting this to <code>false</code> will improve command registration performance</li>
<li><strong><code>plugins-to-convert</code></strong> - Controls the list of plugins to process for command conversion. See <a href="./conversionforowners.html">Command conversion</a> for more information!</li>
</ul>
<h1><a class="header" href="#command-conversion-for-server-owners" id="command-conversion-for-server-owners">Command Conversion (for server owners)</a></h1>
<p>The CommandAPI has the ability to convert plugin commands into &quot;Vanilla compatible&quot; commands automatically on startup. This allows you to use <code>/execute</code> and Minecraft functions/tags for plugins that do not use the CommandAPI. For example, if you want to use the <code>/hat</code> command from the plugin <code>Essentials</code> in an <code>/execute</code> command or from a command block, you can use the CommandAPI's command conversion setting to do so.</p>
<p>The CommandAPI has 3 different conversion methods, each one more specific and powerful than the others. These are the following:</p>
<ul>
<li>
<p><a href="conversionforowners.html#converting-all-plugin-commands"><strong>Entire plugin conversion</strong></a></p>
<p>Converts all commands from a plugin into Vanilla compatible commands</p>
</li>
<li>
<p><a href="./conversionforownerssingle.html"><strong>Single command conversion</strong></a> </p>
<p>Converts a single command from a plugin into a Vanilla compatible command</p>
</li>
<li>
<p><a href="./conversionforownerssingleargs.html"><strong>Single command conversion with custom arguments</strong></a> </p>
<p>Converts a single command from a plugin into a Vanilla compatible command, whilst also declaring what the arguments to the command are</p>
</li>
</ul>
<hr />
<h2><a class="header" href="#yaml-configuration-rules" id="yaml-configuration-rules">YAML configuration rules</a></h2>
<p>To configure command conversion, the CommandAPI reads this information from the <code>config.yml</code> file. This file has a bit of a weird structure, so to put it simply, these are the following rules:</p>
<ul>
<li><strong><code>config.yml</code> cannot have tab characters</strong> - The <code>config.yml</code> file <em>must</em> only consist of spaces!</li>
<li>Indentation is important and should be <em>two spaces</em></li>
</ul>
<hr />
<h3><a class="header" href="#converting-all-plugin-commands" id="converting-all-plugin-commands">Converting all plugin commands</a></h3>
<p>To convert all of the commands that a plugin has, add the name of the plugin, followed by a <code>~</code> character to the list of plugins to convert in the <code>config.yml</code> file.</p>
<div class="example">
<h3><a class="header" href="#example---converting-all-commands-from-essentialsx" id="example---converting-all-commands-from-essentialsx">Example - Converting all commands from EssentialsX</a></h3>
<p>For example, if you wanted to convert all commands that <a href="https://www.spigotmc.org/resources/essentialsx.9089/">EssentialsX</a> has, you can use the following <code>config.yml</code>:</p>
<pre><code class="language-yaml">verbose-outputs: true
create-dispatcher-json: false
plugins-to-convert: 
  - Essentials: ~
</code></pre>
</div><h1><a class="header" href="#single-command-conversion" id="single-command-conversion">Single command conversion</a></h1>
<p>Often, you don't want to convert <em>every single command</em> that a plugin declares, and instead you only want to convert a few commands that a plugin has.</p>
<p>To convert a single command, you need to first populate the <code>config.yml</code> with the name of the plugin and commands to be converted. To illustrate this, we'll use an example:</p>
<div class="example">
<h3><a class="header" href="#example---converting-commands" id="example---converting-commands">Example - Converting commands</a></h3>
<p>Say we're using <a href="https://www.spigotmc.org/resources/essentialsx.9089/">EssentialsX</a> on our server and we want to be able to use <code>/afk</code> and <code>/hat</code> in command blocks. This would allow us to use (for example) the following commands in command blocks:</p>
<pre><code>/execute as @p run afk
/execute as @p run hat
</code></pre>
<p>To do this, we need to add <code>Essentials</code> to our <code>config.yml</code> file, and include the commands <code>afk</code> and <code>hat</code> as the commands to be converted from the Essentials plugin. This would then make our <code>config.yml</code> file look like this:</p>
<pre><code class="language-yaml">verbose-outputs: true
create-dispatcher-json: false
plugins-to-convert: 
  - Essentials: 
    - hat
    - afk
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Note that the commands <code>hat</code> and <code>afk</code> are used, as opposed to an alias such as <code>head</code>. The CommandAPI is only able to convert plugin commands that are declared in a plugin's <code>plugin.yml</code> file. For example, if we take a look at the EssentialsX <code>plugin.yml</code> file, we can see the commands <code>afk</code> and <code>hat</code> have been declared and thus, are the commands which must be used in the CommandAPI's <code>config.yml</code> file:</p>
<pre><code class="language-yaml">name: Essentials
main: com.earth2me.essentials.Essentials
version: 2.18.0.0
website: http://tiny.cc/EssentialsCommands
description: Provides an essential, core set of commands for Bukkit.
softdepend: [Vault, LuckPerms]
authors: [Zenexer, ementalo, Aelux, Brettflan, KimKandor, snowleo, ceulemans, Xeology, KHobbits, md_5, Iaccidentally, drtshock, vemacs, SupaHam, md678685]
api-version: &quot;1.13&quot;
commands:
  afk:
    description: Marks you as away-from-keyboard.
    usage: /&lt;command&gt; [player/message...]
    aliases: [eafk,away,eaway]

# (other config options omitted)

  hat:
    description: Get some cool new headgear.
    usage: /&lt;command&gt; [remove]
    aliases: [ehat,head,ehead]

# (other config options omitted)
</code></pre>
</blockquote>
</div>
<hr />
<h1><a class="header" href="#single-command-conversion-with-arguments" id="single-command-conversion-with-arguments">Single command conversion (with arguments)</a></h1>
<p>For even finer control when converting a single command, you can provide the list of arguments that are required to run the command! This lets you use the command UI in converted commands as you see fit. Before we explain how to do this in detail, let's first take a look at an example of this in action.</p>
<div class="example">
<h3><a class="header" href="#example---converting-essentialsxs-speed-command" id="example---converting-essentialsxs-speed-command">Example - Converting EssentialsX's /speed command</a></h3>
<p>EssentialsX includes a command <code>/speed</code> which lets you change the current speed that a player can move at. The command format is the following:</p>
<pre><code>/speed &lt;speed&gt;
/speed &lt;speed&gt; &lt;target&gt;
/speed &lt;walk/fly&gt; &lt;speed&gt;
/speed &lt;walk/fly&gt; &lt;speed&gt; &lt;target&gt;
</code></pre>
<p>Which means you can run any of the following commands:</p>
<pre><code>/speed 5
/speed 2 Notch
/speed fly 6
/speed walk 3 Notch
</code></pre>
<p>By looking at this, we can see that:</p>
<ul>
<li><code>&lt;speed&gt;</code> is a number. By using the command, we can determine that the range of values is between 0 and 10 (inclusive).</li>
<li><code>&lt;target&gt;</code> is a player</li>
<li><code>&lt;walk/fly&gt;</code> don't change - these are &quot;fixed&quot; values.</li>
</ul>
<p>We can represent this using the following <code>config.yml</code> file:</p>
<pre><code class="language-yaml">verbose-outputs: false
create-dispatcher-json: false
plugins-to-convert:
  - Essentials:
    - speed &lt;speed&gt;[0..10]
    - speed &lt;target&gt;[minecraft:game_profile]
    - speed (walk|fly) &lt;speed&gt;[0..10]
    - speed (walk|fly) &lt;speed&gt;[0..10] &lt;target&gt;[minecraft:game_profile]
</code></pre>
<p>Using this, we can display options, such as &quot;fly&quot; and &quot;walk&quot;, as well as optional targets (&quot;Skepter&quot;):</p>
<p><img src="./images/speedoptions.png" alt="" /></p>
<p>Additionally, we can apply limits to the numbers that can be provided. For example, here we limit the number to a value between 0 to 10. If a value is outside of that range, and error is shown to the user:</p>
<p><img src="./images/speedlimit.png" alt="" /></p>
</div>
<hr />
<h2><a class="header" href="#command-argument-syntax" id="command-argument-syntax">Command argument syntax</a></h2>
<p>The argument syntax is a little tricky to get the hang of at the beginning, but it should be fairly straight forward. There are two main types of arguments that you can have:</p>
<h3><a class="header" href="#literal-arguments" id="literal-arguments">Literal arguments</a></h3>
<p>Literal arguments are arguments with &quot;fixed&quot; values, such as <code>walk</code> or <code>fly</code> from our example above. To declare a literal value, place brackets around the value. For example:</p>
<pre><code>(walk)
</code></pre>
<p>To have multiple different literals, place a pipe symbol <code>|</code> between each entry within the brackets. For example:</p>
<pre><code>(walk|fly)
</code></pre>
<h3><a class="header" href="#named-arguments" id="named-arguments">Named arguments</a></h3>
<p>Named arguments must have a name, declared in angled brackets <code>&lt;name&gt;</code>, followed by the type of the argument in square brackets <code>[type]</code>. In the example above, we had a named argument <code>&lt;target&gt;</code>, with the argument type as a player: <code>[minecraft:game_profile]</code>.</p>
<p>The name in the argument can basically be whatever you want, but it is highly recommended to keep it as a lowercase value consisting only of letters.</p>
<p><strong>The following argument types are highly recommended</strong> and are very likely to be compatible with every plugin command that you may want to convert:</p>
<table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>api:greedy_string</code></td><td>An unlimited amount of text. This can only be used as the last entry of a list of arguments</td></tr>
<tr><td><code>brigadier:bool</code></td><td>A Boolean value <code>true</code> or <code>false</code></td></tr>
<tr><td><code>brigadier:double</code></td><td>A decimal number</td></tr>
<tr><td><code>brigadier:float</code></td><td>A decimal number</td></tr>
<tr><td><code>brigadier:integer</code></td><td>A whole number</td></tr>
<tr><td><code>brigadier:long</code></td><td>A whole number</td></tr>
<tr><td><code>brigadier:string</code></td><td>A single word</td></tr>
<tr><td><code>minecraft:block_pos</code></td><td>A location of x, y and z coordinates (whole numbers)</td></tr>
<tr><td><code>minecraft:entity</code></td><td>An entity (e.g. <code>Notch</code>)</td></tr>
<tr><td><code>minecraft:game_profile</code></td><td>A player (e.g. <code>Notch</code>)</td></tr>
</tbody></table>
<p>In the example above, we used the a &quot;range type&quot; in the form <code>[0..10]</code>. This is a special argument type that will conform to <code>brigader:long</code> or <code>brigader:double</code> and apply a limit to the values that can be entered. </p>
<div class="example">
<h3><a class="header" href="#example---declaringrange-type-arguments" id="example---declaringrange-type-arguments">Example - Declaring&quot;range type&quot; arguments</a></h3>
<p>To declare the range \(10 \le x \le 50\) (a value must be between 10 and 50 (inclusive)):</p>
<pre><code>&lt;name&gt;[10..50]
</code></pre>
<p>To declare the range \(10 \le x\) (a value must be bigger than or equal to 10):</p>
<pre><code>&lt;name&gt;[10..]
</code></pre>
<p>To declare the range \(x \le 50\) (a value must be less than or equal to 50):</p>
<pre><code>&lt;name&gt;[..50]
</code></pre>
<p>To declare the range \(0 \le x \le 1\), where \(x\) is a decimal value:</p>
<pre><code>&lt;name&gt;[0.0..1.0]
</code></pre>
<p>To declare a value \(x\) that can take any range of values and is a decimal number:</p>
<pre><code>&lt;name&gt;[brigadier:double]
</code></pre>
</div>
<hr />
<h2><a class="header" href="#list-of-all-supported-argument-types" id="list-of-all-supported-argument-types">List of all supported argument types</a></h2>
<p>The list of types are based on <a href="https://minecraft.gamepedia.com/Argument_types">the list of argument types from the Minecraft Wiki</a>, with a few changes. The complete list that the CommandAPI supports is as follows:</p>
<table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>api:advancement</code></td><td>An advancement</td></tr>
<tr><td><code>api:biome</code></td><td>A biome</td></tr>
<tr><td><code>api:greedy_string</code></td><td>An unlimited amount of text. This can only be used as the last entry of a list of arguments</td></tr>
<tr><td><code>api:loot_table</code></td><td>A loot table</td></tr>
<tr><td><code>api:recipe</code></td><td>A recipe</td></tr>
<tr><td><code>api:sound</code></td><td>A sound effect</td></tr>
<tr><td><code>api:text</code></td><td>Text encased in quotes: <code>&quot;text with spaces&quot;</code></td></tr>
<tr><td><code>brigadier:bool</code></td><td>A Boolean value <code>true</code> or <code>false</code></td></tr>
<tr><td><code>brigadier:double</code></td><td>A decimal number</td></tr>
<tr><td><code>brigadier:float</code></td><td>A decimal number</td></tr>
<tr><td><code>brigadier:integer</code></td><td>A whole number</td></tr>
<tr><td><code>brigadier:long</code></td><td>A whole number</td></tr>
<tr><td><code>brigadier:string</code></td><td>A single word</td></tr>
<tr><td><code>minecraft:angle</code></td><td>A yaw angle in degrees (from -180.0 to 179.9)</td></tr>
<tr><td><code>minecraft:block_pos</code></td><td>A location of x, y and z coordinates (whole numbers)</td></tr>
<tr><td><code>minecraft:block_predicate</code></td><td>A block predicate</td></tr>
<tr><td><code>minecraft:block_state</code></td><td>A block type (e.g. <code>stone</code>)</td></tr>
<tr><td><code>minecraft:color</code></td><td>A chat color (e.g. <code>red</code>, <code>green</code>)</td></tr>
<tr><td><code>minecraft:column_pos</code></td><td>A location of x and z coordinates (whole numbers)</td></tr>
<tr><td><code>minecraft:component</code></td><td>Raw JSON text</td></tr>
<tr><td><code>minecraft:dimension</code></td><td>A dimension, (e.g. <code>minecraft:overworld</code>)</td></tr>
<tr><td><code>minecraft:entity</code></td><td>An entity (e.g. <code>Notch</code>)</td></tr>
<tr><td><code>minecraft:entity_summon</code></td><td>An entity type (e.g. <code>cow</code>, <code>wither</code>)</td></tr>
<tr><td><code>minecraft:float_range</code></td><td>A range of decimal numbers</td></tr>
<tr><td><code>minecraft:function</code></td><td>A datapack function</td></tr>
<tr><td><code>minecraft:game_profile</code></td><td>A player (e.g. <code>Notch</code>)</td></tr>
<tr><td><code>minecraft:int_range</code></td><td>A range of whole numbers</td></tr>
<tr><td><code>minecraft:item_enchantment</code></td><td>An enchantment (e.g. <code>unbreaking</code>)</td></tr>
<tr><td><code>minecraft:item_predicate</code></td><td>An item predicate</td></tr>
<tr><td><code>minecraft:item_stack</code></td><td>An item (e.g. <code>stick</code>)</td></tr>
<tr><td><code>minecraft:message</code></td><td>A plain text message which can have target selectors (e.g. <code>Hello @p</code>). This can only be used as the last entry of a list of arguments</td></tr>
<tr><td><code>minecraft:mob_effect</code></td><td>A potion effect (e.g. <code>speed</code>, <code>jump_boost</code>)</td></tr>
<tr><td><code>minecraft:nbt_compound_tag</code></td><td>Raw compound NBT in SNBT format</td></tr>
<tr><td><code>minecraft:objective</code></td><td>An objective name (e.g. <code>temperature</code>)</td></tr>
<tr><td><code>minecraft:objective_criteria</code></td><td>An objective criteria (e.g. <code>deaths</code>)</td></tr>
<tr><td><code>minecraft:operation</code></td><td>An operation symbol (e.g. <code>+=</code>, <code>*=</code>)</td></tr>
<tr><td><code>minecraft:particle</code></td><td>A particle (e.g. <code>crit</code>, <code>flame</code>)</td></tr>
<tr><td><code>minecraft:rotation</code></td><td>A rotation of yaw and pitch values (e.g. <code>~ ~</code>)</td></tr>
<tr><td><code>minecraft:score_holder</code></td><td>A score holder (e.g. <code>Notch</code>)</td></tr>
<tr><td><code>minecraft:scoreboard_slot</code></td><td>A scoreboard slot (e.g. <code>sidebar</code>)</td></tr>
<tr><td><code>minecraft:swizzle</code></td><td>A collection of axes (e.g. <code>xyz</code>, <code>xz</code>)</td></tr>
<tr><td><code>minecraft:team</code></td><td>A team name (e.g. <code>hunters</code>)</td></tr>
<tr><td><code>minecraft:time</code></td><td>A duration of time (e.g. <code>2d</code>)</td></tr>
<tr><td><code>minecraft:uuid</code></td><td>A UUID (e.g. <code>dd12be42-52a9-4a91-a8a1-11c01849e498</code>)</td></tr>
<tr><td><code>minecraft:vec2</code></td><td>A location of x and z coordinates (decimal numbers)</td></tr>
<tr><td><code>minecraft:vec3</code></td><td>A location of x, y and z coordinates (decimal numbers)</td></tr>
</tbody></table>
<h1><a class="header" href="#setting-up-your-development-environment" id="setting-up-your-development-environment">Setting up your development environment</a></h1>
<p>To use the CommandAPI in your plugins, there are a few methods of adding it to your development environment.</p>
<hr />
<h2><a class="header" href="#manually-using-the-jar" id="manually-using-the-jar">Manually using the .jar</a></h2>
<ul>
<li>
<p>Download the latest CommandAPI.jar from the download page <a href="https://github.com/JorelAli/CommandAPI/releases/latest">here</a></p>
</li>
<li>
<p>Add the CommandAPI.jar file to your project/environment's build path:</p>
<p><img src="images/eclipse.jpg" alt="" /></p>
</li>
<li>
<p>Add the CommandAPI as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<hr />
<h2><a class="header" href="#using-maven-recommended" id="using-maven-recommended">Using Maven (recommended)</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>If you've never used maven before, I highly recommend it! It makes it easier to keep your code updated with the latest dependency updates. For information on how to set up a plugin using maven, you can read <a href="https://bukkit.gamepedia.com/Plugin_Tutorial">Bukkit's plugin tutorial</a>.</p>
</blockquote>
<ul>
<li>
<p>Add the maven repository to your <code>pom.xml</code> file:</p>
<pre><code class="language-xml">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;commandapi&lt;/id&gt;
        &lt;url&gt;https://raw.githubusercontent.com/JorelAli/CommandAPI/mvn-repo/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
</li>
<li>
<p>Add the dependency to your <code>pom.xml</code>:</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;dev.jorel&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi-core&lt;/artifactId&gt;
        &lt;version&gt;5.3&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>
<p>Add the CommandAPI as a dependent in the <code>plugin.yml</code> (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<hr />
<h2><a class="header" href="#using-gradle" id="using-gradle">Using Gradle</a></h2>
<ul>
<li>
<p>Add the repositories to your <code>build.gradle</code> file (the second repository is required because the CommandAPI depends on the NBT-API):</p>
<pre><code class="language-gradle">repositories {
    maven { url = &quot;https://raw.githubusercontent.com/JorelAli/CommandAPI/mvn-repo/&quot; }
    maven { url = &quot;https://repo.codemc.org/repository/maven-public/&quot; }
}
</code></pre>
</li>
<li>
<p>Add the dependency to your list of dependencies in your <code>build.gradle</code> file:</p>
<pre><code class="language-gradle">dependencies {
    compileOnly &quot;dev.jorel:commandapi-core:5.3&quot;
}
</code></pre>
</li>
</ul>
<ul>
<li>Add the CommandAPI as a dependent in the <code>plugin.yml</code> (<code>depend: [CommandAPI]</code>)</li>
</ul>
<h1><a class="header" href="#shading-the-commandapi-in-your-plugins" id="shading-the-commandapi-in-your-plugins">Shading the CommandAPI in your plugins</a></h1>
<p align="center"><i>After 2 years, this most requested feature is finally here...</i></p>
<p>The CommandAPI can now be shaded into your own plugins! &quot;Shading&quot; is the process of including the CommandAPI inside your plugin, rather than requiring the CommandAPI as an external plugin. In other words, if you shade the CommandAPI into your plugin, you don't need to include the <code>CommandAPI.jar</code> in your server's plugins folder.</p>
<hr />
<h2><a class="header" href="#shading-vs-commandapi-plugin" id="shading-vs-commandapi-plugin">Shading vs CommandAPI plugin</a></h2>
<p>The CommandAPI plugin has a few slight differences with the shaded CommandAPI jar file. The CommandAPI plugin has the following extra features that are not present in the shaded version:</p>
<ul>
<li>Command conversion via a <code>config.yml</code> file</li>
<li>Creation of the <code>command_registration.json</code> file to show the Brigadier command graph</li>
</ul>
<hr />
<h2><a class="header" href="#shading-requirements" id="shading-requirements">Shading requirements</a></h2>
<p>For the CommandAPI to function as normal, you <strong>must</strong> call the CommandAPI's initializers in the <code>onLoad()</code> and <code>onEnable()</code> methods of your plugin:</p>
<pre><code class="language-java">CommandAPI.onLoad(boolean verbose);
CommandAPI.onEnable(Plugin plugin);
</code></pre>
<p>The <code>onLoad(boolean)</code> method initializes the CommandAPI's loading sequence. This must be called <em>before</em> you start to access the CommandAPI and must be placed in your plugin's <code>onLoad()</code> method. The argument <code>verbose</code> is used to enable verbose logging output.</p>
<p>The <code>onEnable(Plugin)</code> method initializes the CommandAPI's enabling sequence. As with the <code>onLoad(boolean)</code> method, this one must be placed in your plugin's <code>onEnable()</code> method. This isn't as strict as the <code>onLoad(boolean)</code> method, and can be placed anywhere in your <code>onEnable()</code> method. The argument <code>plugin</code> is your current plugin instance.</p>
<div class="example">
<h3><a class="header" href="#example---setting-up-the-commandapi-in-your-plugin" id="example---setting-up-the-commandapi-in-your-plugin">Example - Setting up the CommandAPI in your plugin</a></h3>
<pre><code class="language-java">public class MyPlugin extends JavaPlugin {

    @Override
    public void onLoad() {
        CommandAPI.onLoad(true); //Load with verbose output
        
        new CommandAPICommand(&quot;ping&quot;)
            .executes((sender, args) -&gt; {
                sender.sendMessage(&quot;pong!&quot;);
            })
            .register();
    }
    
    @Override
    public void onEnable() {
        CommandAPI.onEnable(this);
        
        //Register commands, listeners etc.
    }

}
</code></pre>
</div>
<hr />
<h2><a class="header" href="#shading-with-maven" id="shading-with-maven">Shading with Maven</a></h2>
<p>To shade the CommandAPI into a maven project, you'll need to use the <code>commandapi-shade</code> dependency, which is optimized for shading and doesn't include plugin-specific files <em>(such as <code>plugin.yml</code>)</em>:</p>
<pre><code class="language-xml">&lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;dev.jorel&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi-shade&lt;/artifactId&gt;
        &lt;version&gt;5.3&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>Once you've added this this, you can shade the CommandAPI easily by adding the <code>maven-shade-plugin</code> to your build sequence:</p>
<pre><code class="language-xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.2.4&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;shade&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;shade&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;configuration&gt;
                &lt;relocations&gt;
                    &lt;relocation&gt;
                        &lt;pattern&gt;dev.jorel.commandapi-shade&lt;/pattern&gt;
                    &lt;/relocation&gt;
                &lt;/relocations&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>Of course, if you shade the CommandAPI into your plugin, you don't need to add <code>depend: [CommandAPI]</code> to your <code>plugin.yml</code> file.</p>
<hr />
<h2><a class="header" href="#shading-with-gradle" id="shading-with-gradle">Shading with Gradle</a></h2>
<p>To shade the CommandAPI into a Gradle project, we'll use the <a href="https://imperceptiblethoughts.com/shadow/">Gradle Shadow Plugin</a>. Add this to your list of plugins:</p>
<pre><code class="language-gradle">plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '6.0.0'
}
</code></pre>
<p>Next, we declare our dependencies:</p>
<pre><code class="language-gradle">dependencies {
    compile &quot;dev.jorel:commandapi-shade:5.3&quot;   
}
</code></pre>
<p>Then we add it to the <code>shadowJar</code> task configuration:</p>
<pre><code class="language-gradle">shadowJar {
	dependencies {
		include dependency(&quot;dev.jorel:commandapi-shade:5.3&quot;)
	}
}
</code></pre>
<p>Finally, we can build the shaded jar using the following command:</p>
<pre><code>gradlew build shadowJar
</code></pre>
<p>Again, as we're shading the CommandAPI into your plugin, we don't need to add <code>depend: [CommandAPI]</code> to your <code>plugin.yml</code> file.</p>
<h1><a class="header" href="#using-the-annotation-system" id="using-the-annotation-system">Using the annotation system</a></h1>
<p>The annotation system is a separate part of the CommandAPI, and as a result it needs to be included as an additional dependency to your project. </p>
<p>The annotation system effectively needs to be added twice: Once for compilation and again to invoke the annotation processor itself.</p>
<hr />
<h2><a class="header" href="#using-maven" id="using-maven">Using Maven</a></h2>
<ul>
<li>
<p>If you haven't already done so, add the maven repository to your <code>pom.xml</code> file:</p>
<pre><code class="language-xml">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;commandapi&lt;/id&gt;
        &lt;url&gt;https://raw.githubusercontent.com/JorelAli/CommandAPI/mvn-repo/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
</li>
<li>
<p>Add the annotation dependency to your <code>pom.xml</code>:</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;dev.jorel&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi-annotations&lt;/artifactId&gt;
        &lt;version&gt;5.3&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>
<p>Add the annotation processor as an annotation process to the compile task in the <code>pom.xml</code>:</p>
<pre><code class="language-xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.8.1&lt;/version&gt;
            &lt;configuration&gt;
                &lt;annotationProcessorPaths&gt;
					&lt;path&gt;
                        &lt;groupId&gt;dev.jorel&lt;/groupId&gt;
                        &lt;artifactId&gt;commandapi-annotations&lt;/artifactId&gt;
                        &lt;version&gt;5.3&lt;/version&gt;
                    &lt;/path&gt;
                &lt;/annotationProcessorPaths&gt;
            &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
</li>
</ul>
<hr />
<h2><a class="header" href="#using-gradle-1" id="using-gradle-1">Using Gradle</a></h2>
<ul>
<li>
<p>If you haven't already done so, add the maven repository to your <code>build.gradle</code> file:</p>
<pre><code class="language-gradle">repositories {
    maven { url = &quot;https://raw.githubusercontent.com/JorelAli/CommandAPI/mvn-repo/&quot; }
    maven { url = &quot;https://repo.codemc.org/repository/maven-public/&quot; }
}
</code></pre>
</li>
<li>
<p>Add the dependency and annotation processor to your list of dependencies in your <code>build.gradle</code> file:</p>
<pre><code class="language-gradle">dependencies {
    compileOnly &quot;dev.jorel:commandapi-annotations:5.3&quot;
    annotationProcessor &quot;dev.jorel:commandapi-annotations:5.3&quot;
}
</code></pre>
</li>
</ul>
<h1><a class="header" href="#command-registration" id="command-registration">Command registration</a></h1>
<p>To register commands with the CommandAPI, we use the <code>CommandAPICommand</code> class. It follows a simple builder pattern to improve readability.</p>
<p>I think the easiest way to explain it is with an example:</p>
<pre><code class="language-java">// Create our arguments
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new GreedyStringArgument(&quot;message&quot;));

//Create our command
new CommandAPICommand(&quot;broadcastmsg&quot;)
    .withArguments(arguments)                     // The arguments
    .withAliases(&quot;broadcast&quot;, &quot;broadcastmessage&quot;) // Command aliases
    .withPermission(CommandPermission.OP)         // Required permissions
    .executes((sender, args) -&gt; {
        String message = (String) args[0];
        Bukkit.getServer().broadcastMessage(message);
    }).register();
</code></pre>
<ul>
<li>First, we create our arguments for the command. This is described in more detail in <a href="./arguments.html">the section on arguments</a>. </li>
<li>We then create a new <code>CommandAPICommand</code>, with the name of the command that the sender must enter to run it. </li>
<li>We then add the arguments to the command with <code>withArguments</code>.</li>
<li>In this example, we add an alias, &quot;broadcast&quot;, to the command. This allows the sender to use either <code>/broadcastmsg &lt;message&gt;</code> or <code>/broadcast &lt;message&gt;</code>.</li>
<li>By using <code>withPermission</code>, we require the sender to be an OP in order to run the command.</li>
<li>We control what the command does using <code>executes</code> (this is described in more detail in <a href="./commandexecutors.html">the section on command executors</a>).</li>
<li>Finally, we register the command to the CommandAPI using <code>register</code>.</li>
</ul>
<p>That's it! This simple snippet of code fully registers the command to the server. No hassling with a plugin instance, no messing with <code>plugin.yml</code> files.</p>
<p>Throughout this documentation, we will use the various different methods for command registration to give you an idea of when and where certain methods are more suitable than others.</p>
<hr />
<h2><a class="header" href="#commandapicommand-methods" id="commandapicommand-methods"><code>CommandAPICommand</code> methods</a></h2>
<p>The <code>CommandAPICommand</code> has various methods, which are outlined below:</p>
<h4><a class="header" href="#setting-the-command-name" id="setting-the-command-name">Setting the command name</a></h4>
<pre><code class="language-java">new CommandAPICommand(String commandName)
</code></pre>
<p>This constructor creates a new instance of the <code>CommandAPICommand</code> object. This constructor requires the <em>name</em> of the command.</p>
<h4><a class="header" href="#setting-command-properties" id="setting-command-properties">Setting command properties</a></h4>
<pre><code class="language-java">CommandAPICommand withArguments(List&lt;Argument&gt; arguments)
</code></pre>
<p>The <code>withArguments</code> method is used to add arguments to your command. The <code>arguments</code> parameter is appended to the the list of arguments for the command.</p>
<pre><code class="language-java">CommandAPICommand withArguments(Argument... arguments)
</code></pre>
<p>Similar to the other <code>withArguments</code> method, this method appends the <code>arguments</code> to the list of arguments for the command. This is purely to make adding one or two arguments nice and easy instead of creating lots of <code>List</code> objects everywhere.</p>
<pre><code class="language-java">CommandAPICommand withPermission(CommandPermission)
CommandAPICommand withPermission(String)
</code></pre>
<p>The <code>withPermission</code> method is used to assign a permission that is required to execute the command. (See <a href="permissions.html">the section on permissions</a> for more info).</p>
<pre><code class="language-java">CommandAPICommand withAliases(String... args)
</code></pre>
<p>The <code>withAliases</code> method is used to declare a list of aliases that can be used to run this command via. (See <a href="./aliases.html">the section on aliases</a> for more info).</p>
<pre><code class="language-java">CommandAPICommand withSubcommand(CommandAPICommand subcommand)
</code></pre>
<p>The <code>withSubcommand</code> method is used to declare a subcommand that leads on from the current command. (See <a href="./subcommands.html">the section on subcommands</a> for more info).</p>
<h4><a class="header" href="#setting-the-commands-executor" id="setting-the-commands-executor">Setting the command's executor</a></h4>
<pre><code class="language-java">CommandAPICommand executes((sender, args) -&gt; {})
</code></pre>
<p>Executes a command using the <code>CommandSender</code> object.</p>
<pre><code class="language-java">CommandAPICommand executesPlayer((player, args) -&gt; {})
</code></pre>
<p>Executes a command only if the command sender is a <code>Player</code>.</p>
<pre><code class="language-java">CommandAPICommand executesEntity((entity, args) -&gt; {})
</code></pre>
<p>Executes a command only if the command sender is an <code>Entity</code>.</p>
<pre><code class="language-java">CommandAPICommand executesCommandBlock((cmdblock, args) -&gt; {})
</code></pre>
<p>Executes a command only if the command sender is a <code>BlockCommandSender</code>.</p>
<pre><code class="language-java">CommandAPICommand executesConsole((console, args) -&gt; {})
</code></pre>
<p>Executes a command only if the command sender is a <code>ConsoleCommandSender</code>.</p>
<pre><code class="language-java">CommandAPICommand executesProxy((proxy, args) -&gt; {})
</code></pre>
<p>Executes a command only if the command sender is a <code>ProxiedCommandSender</code>.</p>
<pre><code class="language-java">CommandAPICommand executesNative((proxy, args) -&gt; {})
</code></pre>
<p>Executes a command regardless of what the command sender is, using the <code>NativeProxyCommandSender</code>.  Read more about native proxied command senders <a href="./native.html">here</a>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Sometimes, the Java compiler throws an error saying that a method is ambiguous for the type CommandAPICommand. This is due to a limitation in Java's type inference system and is not a fault of the CommandAPI. If we take the following code, used to spawn a pig:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;spawnpigs&quot;)
     .executesPlayer((player, args) -&gt; {
           for(int i = 0; i &lt; 10; i++) {
               player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
           }
     })
     .register();
</code></pre>
<p>The Java type inference system cannot determine what the type of the lambda <code>(player, args) -&gt; ()</code> is, therefore it produces the following compilation error:</p>
<pre><code>The method executesPlayer(PlayerCommandExecutor) is ambiguous for the type CommandAPICommand
</code></pre>
<p>This can easily be resolved by declaring the specific type of the command sender and the arguments. For example:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;spawnpigs&quot;)
     .executesPlayer((Player player, Object[] args) -&gt; {
           for(int i = 0; i &lt; 10; i++) {
               player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
           }
     })
     .register();
</code></pre>
</blockquote>
<h4><a class="header" href="#registering-the-command" id="registering-the-command">Registering the command</a></h4>
<pre><code class="language-java">void register()
</code></pre>
<p>Registers the command.</p>
<hr />
<h2><a class="header" href="#command-loading-order" id="command-loading-order">Command loading order</a></h2>
<p>In order to register commands properly, <strong>commands must be registered before the server finishes loading</strong>. The CommandAPI will prevent command registration after the server has loaded. This basically means that all command registration must occur during a plugin's <code>onLoad()</code> or <code>onEnable()</code> method. With the CommandAPI, depending on whether you use <code>onLoad()</code> or <code>onEnable()</code> to load your commands depends on whether your plugin is used with Minecraft's functions:</p>
<table><thead><tr><th>When to load</th><th>What to do</th></tr></thead><tbody>
<tr><td><code>onLoad()</code> method</td><td>Register commands to be used in Minecraft functions (<a href="functions.html">see the Function section for more info</a>)</td></tr>
<tr><td><code>onEnable()</code> method</td><td>Register regular commands</td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#command-unregistration" id="command-unregistration">Command unregistration</a></h2>
<p>The CommandAPI has support to unregister commands completely from Minecraft's command list. This includes Minecraft built in commands!</p>
<div class="warning">
<p><strong>Developer's Note:</strong></p>
<p>Command unregistration, although powerful, is highly unrecommended. It is the CommandAPI's most &quot;dangerous&quot; feature as it can cause unexpected sideffects, such as command blocks executing commands you wouldn't expect them to. In almost every case, I'd recommend just creating a new command instead of unregistering one to replace it.</p>
<p>For instance, instead of unregistering <code>/gamemode</code>, you could register a command <code>/gm</code> or <code>/changegamemode</code>.</p>
</div>
<table><thead><tr><th>Method</th><th>Result</th></tr></thead><tbody>
<tr><td><code>CommandAPI.unregister(String cmd)</code></td><td>Unregisters a command from the game</td></tr>
<tr><td><code>CommandAPI.unregister(String cmd, boolean force)</code></td><td>Attempts to unregister a command from the game by force. This includes <code>/minecraft:cmd</code>, <code>/bukkit:cmd</code> and <code>/spigot:cmd</code> commands as well.</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---replacing-minecrafts-gamemode-command" id="example---replacing-minecrafts-gamemode-command">Example - Replacing Minecraft's <code>/gamemode</code> command</a></h3>
<p>To replace a command, we can first unregister it and then register our implementation of that command.</p>
<pre><code class="language-java">//Unregister the gamemode command from the server (by force)
CommandAPI.unregister(&quot;gamemode&quot;, true);

List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();

/* Arguments for the gamemode command. In this sample, I'm just 
 * using a simple literal argument which allows for /gamemode survival */
arguments.add(new LiteralArgument(&quot;survival&quot;));

new CommandAPICommand(&quot;gamemode&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Implementation of our /gamemode command
    }).register();
</code></pre>
</div><h1><a class="header" href="#command-executors" id="command-executors">Command executors</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This section can be a little bit difficult to follow. If you only want the bare basic features <em>(executes a command)</em>, read the section on <em>Normal command executors</em> - this behaves very similar to the <code>onCommand</code> method in Bukkit.</p>
</blockquote>
<hr />
<p>The CommandAPI provides various command executors which are lambdas which execute the code you want when a command is called. With a lot of simplification, there are two main types of command executors: </p>
<ul>
<li>Ones that just runs the command (let's call it a <em>normal command executor</em>)</li>
<li>Ones that returns an integer as a result (let's call it a <em>resulting command executor</em>)</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In general, you need not focus too much on what type of command executor to implement. If you know for certain that you're going to be using your command with command blocks, and specifically want to state whether a command returns a value, just ensure you return an integer at the end of your declared command executor. Java will infer the type <em>(whether it's a normal command executor or a resulting command executor)</em> automatically, so feel free to return an integer or not. </p>
</blockquote>
<p>In addition to these two types of command executors, there are ways to restrict the execution of commands to certain <code>CommandSender</code> subclasses. In other words, you can make commands executable by players in game only for instance. These restrictions are covered in more detail in <a href="./normalexecutors.html">Normal command executors</a>.</p>
<h1><a class="header" href="#normal-command-executors" id="normal-command-executors">Normal command executors</a></h1>
<p>Command executors are of the following format, where <code>sender</code> is a <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/command/CommandSender.html"><code>CommandSender</code></a>, and <code>args</code> is an <code>Object[]</code>, which represents arguments which are parsed by the CommandAPI.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;...&quot;)
    .executes((sender, args) -&gt; {
        //Code here  
    })
    .register();
</code></pre>
<p>With normal command executors, these do not need to return anything. By default, this will return a <em>success value</em> of 1 if it runs successfully, and a <em>success value</em> of 0 if it runs unsuccessfully, either by throwing an exception <em>(RuntimeException)</em> or by forcing the command to fail (See the section on <a href="./commandfailures.html">handling command failures</a>.</p>
<p>In short, this is what values are returned when a command is executed from a normal command executor:</p>
<table><thead><tr><th align="center"></th><th align="center">Command Works</th><th align="center">Command Doesn't Work</th></tr></thead><tbody>
<tr><td align="center"><strong>Success Value</strong></td><td align="center">1</td><td align="center">0</td></tr>
<tr><td align="center"><strong>Result Value</strong></td><td align="center">1</td><td align="center">0</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---creating-a-message-broadcasting-system" id="example---creating-a-message-broadcasting-system">Example - Creating a message broadcasting system</a></h3>
<p>To illustrate this, let's take a look at a simple message broadcasting command. We declare our arguments (in this case, &quot;message&quot;), we provide some aliases and set a permission required to run the command. Then we declare our main command body by using the <code>.executes()</code> method, before finally registering the command:</p>
<pre><code class="language-java">//Create our command
new CommandAPICommand(&quot;broadcastmsg&quot;)
    .withArguments(new GreedyStringArgument(&quot;message&quot;)) // The arguments
    .withAliases(&quot;broadcast&quot;, &quot;broadcastmessage&quot;)       // Command aliases
    .withPermission(CommandPermission.OP)               // Required permissions
    .executes((sender, args) -&gt; {
        String message = (String) args[0];
        Bukkit.getServer().broadcastMessage(message);
    })
    .register();
</code></pre>
<p>Note how when we finish up our implementation of <code>.executes()</code>, we don't return anything. This is unlike commands in the standard Bukkit API where the <code>onCommand</code> method returns a Boolean value:</p>
<pre><code class="language-java">boolean onCommand(CommandSender, Command, String, String[])
</code></pre>
<p>The returning of this Boolean value is handled automatically by the CommandAPI on a much lower level.</p>
</div>
<hr />
<h2><a class="header" href="#restricting-who-can-run-your-command" id="restricting-who-can-run-your-command">Restricting who can run your command</a></h2>
<p>The <code>CommandAPICommand</code> has multiple different <code>executes...()</code> methods that can restrict the command sender to any of the following objects:</p>
<ul>
<li><code>CommandSender</code> - No restriction, players, the console etc. can use this command. This is what Bukkit normally uses.</li>
<li><code>Player</code> - Only in-game players can run this command</li>
<li><code>Entity</code> - Only entities (therefore, players as well) can run this command</li>
<li><code>BlockCommandSender</code> - Only command blocks can run this command</li>
<li><code>ConsoleCommandSender</code> - Only the console can run this command</li>
<li><code>ProxiedCommandSender</code> - Only proxied command senders (e.g. other entities via the <code>/execute as ...</code> command)</li>
<li><code>NativeProxyCommandSender</code> - This type has special rules governing it. See <a href="./native.html">Native commandsenders</a> for more information</li>
</ul>
<p>This is done using the respective method:</p>
<table><thead><tr><th>Restricted sender</th><th>Method to use</th></tr></thead><tbody>
<tr><td><code>CommandSender</code></td><td><code>.executes()</code></td></tr>
<tr><td><code>Player</code></td><td><code>.executesPlayer()</code></td></tr>
<tr><td><code>Entity</code></td><td><code>.executesEntity()</code></td></tr>
<tr><td><code>BlockCommandSender</code></td><td><code>.executesCommandBlock()</code></td></tr>
<tr><td><code>ConsoleCommandSender</code></td><td><code>.executesConsole()</code></td></tr>
<tr><td><code>ProxiedCommandSender</code></td><td><code>.executesProxy()</code></td></tr>
<tr><td><code>NativeProxyCommandSender</code></td><td><code>.executesNative()</code></td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---a-suicide-command" id="example---a-suicide-command">Example - A <code>/suicide</code> command</a></h3>
<p>Say we wanted to create a command <code>/suicide</code>, which kills the player that executes it. Since this command isn't really &quot;designed&quot; for command senders that are not players, we can restrict it so only players can execute this command (meaning that the console and command blocks cannot run this command). Since it's a player, we can use the <code>.executesPlayer()</code> method:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;suicide&quot;)
	.executesPlayer((player, args) -&gt; {
	    player.setHealth(0);
	})
	.register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#multiple-command-executor-implementations" id="multiple-command-executor-implementations">Multiple command executor implementations</a></h2>
<p>The CommandAPI allows you to chain different implementations of the command depending on the type of <code>CommandSender</code>. This allows you to easily specify what types of <code>CommandSender</code>s are required to run a command.</p>
<p>Extending on the suicide example above, we could write another implementation for a different <code>CommandSender</code>. Here, we write an implementation to make entities (non-player) go out with a bang when they run the command (using <code>/execute as &lt;entity&gt; run &lt;command&gt;</code> command).</p>
<div class="example">
<h3><a class="header" href="#example---a-suicide-command-with-different-implementations" id="example---a-suicide-command-with-different-implementations">Example - A <code>/suicide</code> command with different implementations</a></h3>
<pre><code class="language-java">new CommandAPICommand(&quot;suicide&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setHealth(0);
    })
    .executesEntity((entity, args) -&gt; {
        entity.getWorld().createExplosion(entity.getLocation(), 4);
        entity.remove();
    })
    .register();
</code></pre>
<p>This saves having to use <code>instanceof</code> multiple times to check the type of the <code>CommandSender</code>.</p>
</div>
<p>The different command sender priority is the following (from highest priority to lowest priority):</p>
<p>\begin{align}
&amp;\quad\texttt{.executesNative()} &amp;&amp; \texttt{(Always chosen if used)}\\
&amp;\quad\texttt{.executesPlayer()} \\
&amp;\quad\texttt{.executesEntity()} \\
&amp;\quad\texttt{.executesConsole()} \\
&amp;\quad\texttt{.executesCommandBlock()} \\
&amp;\quad\texttt{.executesProxy()} \\
&amp;\quad\texttt{.executes()}
\end{align}</p>
<h1><a class="header" href="#proxied-commandsenders" id="proxied-commandsenders">Proxied commandsenders</a></h1>
<p>The CommandAPI has extra support for vanilla Minecraft's <code>/execute</code> command, by allowing the CommandSender to be an instance of the <code>ProxiedCommandSender</code> class. This allows the CommandSender to contain two extra pieces of information: The &quot;proxied sender&quot; and the original sender.</p>
<div class="example">
<h3><a class="header" href="#example---running-a-command-as-a-chicken" id="example---running-a-command-as-a-chicken">Example - Running a command as a chicken</a></h3>
<p>Say we have a command which kills the sender of a command. This is easily implemented as follows:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;killme&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setHealth(0);
    })
    .register();
</code></pre>
<p>But what if the sender of the command is <em>not</em> a player? By using Minecraft's <code>/execute</code> command, we could execute the command as <em>any</em> arbitrary entity, as shown with the command below:</p>
<pre><code>/execute as @e[type=chicken] run killme
</code></pre>
<p>To handle this case, we can use the <code>.executesProxy()</code> method to ensure that the command sender is a <code>ProxiedCommandSender</code>. Then, we can kill the <code>callee</code> <em>(the entity which is being 'forced' to run the command /killme)</em></p>
<pre><code class="language-java">new CommandAPICommand(&quot;killme&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setHealth(0);
    })
    .executesProxy((proxy, args) -&gt; {
        //Check if the callee is an Entity
        if(proxy.getCallee() instanceof LivingEntity) {

            //If so, kill the entity
            LivingEntity target = (LivingEntity) proxy.getCallee();
            target.setHealth(0);
        }
    })
    .register();
</code></pre>
<p>This allows the command above to run successfully, killing all chickens it can find.</p>
</div><h1><a class="header" href="#native-commandsenders" id="native-commandsenders">Native commandsenders</a></h1>
<p>In a similar way that the <code>ProxiedCommandSender</code> is used to store information about two command senders: a caller (the one that wrote the command) and a callee (the one that ends up executing the command), the CommandAPI also has a special <code>NativeProxyCommandSender</code> class which is a more powerful representation of the <code>ProxiedCommandSender</code> class. In addition to inheriting all of the methods from <code>ProxiedCommandSender</code>, this class also has the following two methods:</p>
<pre><code class="language-java">public World getWorld();
public Location getLocation();
</code></pre>
<p>These methods contain additional information about the command executor's state, and are primarily designed to be used with Minecraft's <code>/execute</code> command.</p>
<hr />
<h2><a class="header" href="#minecrafts-execute-arguments" id="minecrafts-execute-arguments">Minecraft's <code>/execute</code> arguments</a></h2>
<p>The following table represents how the different <code>/execute</code> arguments affect the <code>NativeProxyCommandSender</code> class:</p>
<table><thead><tr><th>/execute argument</th><th>How it changes NativeProxyCommandSender</th></tr></thead><tbody>
<tr><td><code>/execute align</code></td><td>Changes <code>getLocation()</code> only</td></tr>
<tr><td><code>/execute anchored</code></td><td>Changes nothing</td></tr>
<tr><td><code>/execute as</code></td><td>Changes <code>getCallee()</code> only</td></tr>
<tr><td><code>/execute at</code></td><td>Changes <code>getLocation()</code> and <code>getWorld()</code> only</td></tr>
<tr><td><code>/execute facing</code></td><td>Changes <code>getLocation()</code> only</td></tr>
<tr><td><code>/execute in</code></td><td>Changes <code>getWorld()</code> only</td></tr>
<tr><td><code>/execute positioned</code></td><td>Changes <code>getLocation()</code> only</td></tr>
<tr><td><code>/execute rotated</code></td><td>Changes <code>getLocation()</code>only</td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#using-the-native-commandsender" id="using-the-native-commandsender">Using the native commandsender</a></h2>
<p>As described in the section about <a href="./normalexecutors.html">normal command executors</a>, there are multiple methods to register a command executor. For the <code>NativeProxyCommandSender</code>, the <code>.executesNative()</code> method should be used.</p>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>.executesNative()</code> method has the highest priority over all over <code>.executesXXX()</code> methods - if you use the <code>.executesNative()</code> method, no other execution method will be run.</p>
</blockquote>
<hr />
<div class="example">
<h3><a class="header" href="#example---a-really-simple-break-block-command" id="example---a-really-simple-break-block-command">Example - A really simple &quot;break block&quot; command</a></h3>
<p>Say we wanted to make a command that simply sets the current block to air. For this example, we'll use the following command structure:</p>
<pre><code>/break
</code></pre>
<p>As you can see, this command takes no arguments. This is fine, since our &quot;argument&quot; will be the sender's location. We can access the sender's location using the <code>getLocation()</code> method from the <code>NativeProxyCommandSender</code> object, available from the <code>.executesNative()</code> method:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;break&quot;)
    .executesNative((sender, args) -&gt; {
        Location location = (Location) sender.getLocation();
        if(location != null) {
            location.getBlock().breakNaturally();
        }
    })
    .register();
</code></pre>
<p>This can now be used via the following command examples:</p>
<pre><code>/execute positioned 100 62 50 run break
</code></pre>
<pre><code>/execute at @e[type=pig] run break
</code></pre>
<pre><code>/execute in minecraft:overworld positioned 20 60 -20 run break
</code></pre>
</div>
<h1><a class="header" href="#resulting-command-executors" id="resulting-command-executors">Resulting command executors</a></h1>
<p>Resulting command executors are very similar to normal command executors, except they can return an integer <em>result value</em>.</p>
<pre><code class="language-java">(sender, args) -&gt; {
	//Code here
	return /*some integer here*/ ;
};
</code></pre>
<p>Similarly, these will return a <em>success value</em> of 1 if it runs successfully, and a <em>success value</em> of 0 if it runs unsuccessfully. <strong>If a success value of 0 occurs, the <em>result value</em> will be 0</strong>. In short:</p>
<table><thead><tr><th align="center"></th><th align="center">Command Works</th><th align="center">Command Doesn't Work</th></tr></thead><tbody>
<tr><td align="center"><strong>Success Value</strong></td><td align="center">1</td><td align="center">0</td></tr>
<tr><td align="center"><strong>Result Value</strong></td><td align="center">result defined in your code</td><td align="center">0</td></tr>
</tbody></table>
<p>The concept of result values are better explained through examples:</p>
<div class="example">
<h3><a class="header" href="#example---random-number-result-command" id="example---random-number-result-command">Example - Random number result command</a></h3>
<p>Say we want a command that returns a random number as a result. This can then be used by vanilla Minecraft's <code>/execute store result ...</code> command, which can be used for other command block chains.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;randnum&quot;)
    .executes((sender, args) -&gt; {
        return new Random().nextInt();
    })
    .register();
</code></pre>
<p>This returns a <strong>success value of 1</strong> <em>(Because no errors or <code>CommandAPI.fail(String)</code> was thrown)</em> and a <strong>result value of a random number</strong>.</p>
</div>
<div class="example">
<h3><a class="header" href="#example---lootbox-system-with-execute-command" id="example---lootbox-system-with-execute-command">Example - Lootbox system with <code>/execute</code> command</a></h3>
<p>We can store state using <code>/execute store</code> and we can perform conditional checks using <code>/execute if</code>. By combining these, we can create a system which can be used with commandblocks to say, give players random lootboxes and redeem them. The concept is to create a command that generates a random number from 1 to 100. If the number is 1 (thus, the chance of being chosen is \(\frac{1}{100}\)), then we award a player with some reward, say 64 diamonds.</p>
<p>To do this, we'll declare two commands:</p>
<pre><code>/randomnumber        - returns a random number between 1 and 99 (inclusive)
/givereward &lt;player&gt; - gives a player 64 diamonds and broadcasts it in the chat
</code></pre>
<p>Since we're declaring commands that are to be used in <code>/execute</code>, we must ensure that these commands are registered in your plugin's <code>onLoad()</code> method. First, we write our implementation for <code>/randomnumber</code>. It is fairly straight forward using Java's <code>ThreadLocalRandom</code> to generate a random number:</p>
<pre><code class="language-java">//Register random number generator command from 1 to 99 (inclusive)
new CommandAPICommand(&quot;randomnumber&quot;)
    .executes((sender, args) -&gt; {
        return ThreadLocalRandom.current().nextInt(1, 100); //Returns random number from 1 &lt;= x &lt; 100
    })
    .register();
</code></pre>
<p>Now we write our implementation for <code>/givereward</code>. In this example, we use the <code>EntitySelectorArgument</code> to select a single player. We cast it to <code>Player</code> and then add the items to their inventory.</p>
<pre><code class="language-java">//Register reward giving system for a target player
new CommandAPICommand(&quot;givereward&quot;)
    .withArguments(new EntitySelectorArgument(&quot;target&quot;, EntitySelector.ONE_PLAYER))
    .executes((sender, args) -&gt; {
        Player player = (Player) args[0];
        player.getInventory().addItem(new ItemStack(Material.DIAMOND, 64));
        Bukkit.broadcastMessage(player.getName() + &quot; won a rare 64 diamonds from a loot box!&quot;);
    })
    .register();
</code></pre>
<hr />
<p>Now that we've declared these commands, we can now use them in practice. We can use a command block to store a random number under the scoreboard score <code>randVal</code> for a player called <code>SomePlayer</code>, by executing the command <code>/randomnumber</code>. Since <code>/randomnumber</code> <strong>returns</strong> an integer, this value is stored in the scoreboard score:</p>
<pre><code>/execute store result score SomePlayer randVal run randomnumber
</code></pre>
<p>To check if the random number is equal to 1, we can use the <code>/execute if</code> command. If their score stored in <code>randVal</code> matches 1, then we run the <code>/givereward</code> command.</p>
<pre><code>/execute if score SomePlayer randVal matches 1 run givereward SomePlayer
</code></pre>
</div><h1><a class="header" href="#handling-command-failures" id="handling-command-failures">Handling command failures</a></h1>
<p>Sometimes, you want your command to fail on purpose. This is basically the way to &quot;gracefully&quot; handle errors in your command execution. This is performed using the following method:</p>
<pre><code class="language-java">CommandAPI.fail(&quot;Error message goes here&quot;);
</code></pre>
<p>When the CommandAPI calls the fail method, it will cause the command to return a <em>success value</em> of 0, to indicate failure.</p>
<div class="example">
<h3><a class="header" href="#example---command-failing-for-element-not-in-a-list" id="example---command-failing-for-element-not-in-a-list">Example - Command failing for element not in a list</a></h3>
<p>Say we have some list containing fruit and the player can choose from it. In order to do that, we can use a <code>StringArgument</code> and suggest it to the player using <code>.overrideSuggestions(String[])</code>. However, because this only lists <em>suggestions</em> to the player, it does <strong>not</strong> stop the player from entering an option that isn't on the list of suggestions.</p>
<p>Therefore, to gracefully handle this with a proper error message, we use <code>CommandAPI.fail(String)</code> with a meaningful error message which is displayed to the user.</p>
<pre><code class="language-java">//Array of fruit
String[] fruit = new String[] {&quot;banana&quot;, &quot;apple&quot;, &quot;orange&quot;};

//Argument accepting a String, suggested with the list of fruit
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new StringArgument(&quot;item&quot;).overrideSuggestions(fruit));

//Register the command
new CommandAPICommand(&quot;getfruit&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        String inputFruit = (String) args[0];
        
        if(Arrays.stream(fruit).anyMatch(inputFruit::equals)) {
            //Do something with inputFruit
        } else {
            //The player's input is not in the list of fruit
            CommandAPI.fail(&quot;That fruit doesn't exist!&quot;);
        }
    })
    .register();
</code></pre>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In general, it's a good idea to handle unexpected cases with the <code>CommandAPI.fail()</code> method. Most arguments used by the CommandAPI will have their own built-in failsafe system <em>(e.g. the <code>EntitySelectorArgument</code> will not execute the command executor if it fails to find an entity)</em>, so this feature is for those extra cases.</p>
</blockquote>
<h1><a class="header" href="#arguments" id="arguments">Arguments</a></h1>
<p>Arguments in the CommandAPI are registered by using a <code>List&lt;Argument&gt;</code> object. There are two things you need to keep in mind when creating arguments:</p>
<ul>
<li>The order which they will be used</li>
<li>The type of each argument</li>
</ul>
<p>By definition of a <code>List</code>, the order of the elements inserted into it are preserved, meaning the order you add arguments to the <code>List</code> will be the resulting order of which arguments are presented to the user when they run that command.</p>
<p>Adding arguments for registration is simple:</p>
<pre><code class="language-java">//Create a List
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();

//Add an argument with the node &quot;target&quot;, which is a PlayerArgument
arguments.add(new PlayerArgument(&quot;target&quot;));
</code></pre>
<p>The String value is the node that is registered into Minecraft's internal command graph. This is name is also used as a prompt that is shown to a player when they are entering the command.</p>
<hr />
<h2><a class="header" href="#argument-casting" id="argument-casting">Argument Casting</a></h2>
<p>To access arguments, they have to be casted to the type that the argument represents. The order of the arguments in the <code>args[]</code> is the same as the order in which the arguments were declared.</p>
<pre><code class="language-java">List&lt;ArgumentType&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new StringArgument(&quot;arg0&quot;));
arguments.add(new PotionEffectArgument(&quot;arg1&quot;));
arguments.add(new LocationArgument(&quot;arg2&quot;));

new CommandAPICommand(&quot;cmd&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        String stringArg = (String) args[0];
        PotionEffectType potionArg = (PotionEffectType) args[1];
        Location locationArg = (Location) args[2];
    })
    .register();
</code></pre>
<p>The type to cast each argument (declared in the <code>dev.jorel.commandapi.arguments</code> package) is listed below:</p>
<table><thead><tr><th align="right">Argument class</th><th align="left">Data type</th></tr></thead><tbody>
<tr><td align="right"><a href="./angleargument"><code>AngleArgument</code></a></td><td align="left"><code>float</code></td></tr>
<tr><td align="right"><a href="./advancementargument.html"><code>AdvancementArgument</code></a></td><td align="left"><code>org.bukkit.advancement.Advancement</code></td></tr>
<tr><td align="right"><a href="./axisarg.html"><code>AxisArgument</code></a></td><td align="left"><code>java.util.EnumSet&lt;org.bukkit.Axis&gt;</code></td></tr>
<tr><td align="right"><a href="./biomeargument.html"><code>BiomeArgument</code></a></td><td align="left"><code>org.bukkit.block.Biome</code></td></tr>
<tr><td align="right"><a href="./blockpredicateargs.html"><code>BlockPredicateArgument</code></a></td><td align="left"><code>java.util.function.Predicate&lt;org.bukkit.block.Block&gt;</code></td></tr>
<tr><td align="right"><a href="./blockstatearguments.html"><code>BlockStateArgument</code></a></td><td align="left"><code>org.bukkit.block.data.BlockData</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#boolean-arguments"><code>BooleanArgument</code></a></td><td align="left"><code>boolean</code></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-argument"><code>ChatArgument</code></a></td><td align="left"><code>net.md_5.bungee.api.chat.BaseComponent[]</code></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-color-argument"><code>ChatColorArgument</code></a></td><td align="left"><code>org.bukkit.ChatColor</code></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-component-argument"><code>ChatComponentArgument</code></a></td><td align="left"><code>net.md_5.bungee.api.chat.BaseComponent[]</code></td></tr>
<tr><td align="right"><a href="./customarguments.html"><code>CustomArgument&lt;T&gt;</code></a></td><td align="left"><code>T</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>DoubleArgument</code></a></td><td align="left"><code>double</code></td></tr>
<tr><td align="right"><a href="./enchantmentargument.html"><code>EnchantmentArgument</code></a></td><td align="left"><code>org.bukkit.enchantments.Enchantment</code></td></tr>
<tr><td align="right"><a href="./entityarguments.html#entity-selector-argument"><code>EntitySelectorArgument</code></a></td><td align="left">The cast type changes depending on the input parameter:<br /><ul><li><code>EntitySelector.MANY_ENTITIES</code> - <code>Collection&lt;org.bukkit.entity.Entity&gt;</code></li><br /><li><code>EntitySelector.MANY_PLAYERS</code> - <code>Collection&lt;org.bukkit.entity.Player&gt;</code></li><br /><li><code>EntitySelector.ONE_ENTITY</code> - <code>org.bukkit.entity.Entity</code></li><br /><li><code>EntitySelector.ONE_PLAYER</code> - <code>org.bukkit.entity.Player</code></li></ul></td></tr>
<tr><td align="right"><a href="./entityarguments.html#entity-type-argument"><code>EntityTypeArgument</code></a></td><td align="left"><code>org.bukkit.entity.EntityType</code></td></tr>
<tr><td align="right"><a href="./environmentargs.html"><code>EnvironmentArgument</code></a></td><td align="left"><code>org.bukkit.World.Environment</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>FloatArgument</code></a></td><td align="left"><code>float</code></td></tr>
<tr><td align="right"><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>FloatRangeArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.FloatRange</code></td></tr>
<tr><td align="right"><a href="./functionwrapper.html"><code>FunctionArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.FunctionWrapper[]</code></td></tr>
<tr><td align="right"><a href="./stringarguments.html#greedy-string-argument"><code>GreedyStringArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>IntegerArgument</code></a></td><td align="left"><code>int</code></td></tr>
<tr><td align="right"><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>IntegerRangeArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.IntegerRange</code></td></tr>
<tr><td align="right"><a href="./itemstackarguments.html"><code>ItemStackArgument</code></a></td><td align="left"><code>org.bukkit.inventory.ItemStack</code></td></tr>
<tr><td align="right"><a href="./itemstackpredicateargs.html"><code>ItemStackPredicateArgument</code></a></td><td align="left"><code>java.util.function.Predicate&lt;org.bukkit.inventory.ItemStack&gt;</code></td></tr>
<tr><td align="right"><a href="./literalarguments.html"><code>LiteralArgument</code></a></td><td align="left">N/A</td></tr>
<tr><td align="right"><a href="./locationargument.html#location-2d-space"><code>Location2DArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.Location2D</code></td></tr>
<tr><td align="right"><a href="./locationargument.html#location-3d-space"><code>LocationArgument</code></a></td><td align="left"><code>org.bukkit.Location</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>LongArgument</code></a></td><td align="left"><code>long</code></td></tr>
<tr><td align="right"><a href="./loottableargument.html"><code>LootTableArgument</code></a></td><td align="left"><code>org.bukkit.loot.LootTable</code></td></tr>
<tr><td align="right"><a href="./mathoperationarguments.html"><code>MathOperationArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.MathOperation</code></td></tr>
<tr><td align="right"><a href="./multilitargs.html"><code>MultiLiteralArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./nbtarguments.html"><code>NBTCompoundArgument</code></a></td><td align="left"><code>de.tr7zw.nbtapi.NBTContainer</code></td></tr>
<tr><td align="right"><a href="./objectivearguments.html#objective-argument"><code>ObjectiveArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./objectivearguments.html#objective-criteria-argument"><code>ObjectiveCriteriaArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./particlearguments.html"><code>ParticleArgument</code></a></td><td align="left"><code>org.bukkit.Particle</code></td></tr>
<tr><td align="right"><a href="./entityarguments.html#player-argument"><code>PlayerArgument</code></a></td><td align="left"><code>org.bukkit.entity.Player</code></td></tr>
<tr><td align="right"><a href="./potionarguments.html"><code>PotionEffectArgument</code></a></td><td align="left"><code>org.bukkit.potion.PotionEffectType</code></td></tr>
<tr><td align="right"><a href="./recipeargument.html"><code>RecipeArgument</code></a></td><td align="left">The cast type changes depending on your Minecraft version:<br><ul><li>Version 1.14.4 and below - <code>org.bukkit.inventory.Recipe</code></li><br /><li>1.15 and above - <code>org.bukkit.inventory.ComplexRecipe</code> </li></ul></td></tr>
<tr><td align="right"><a href="./rotationargs.html"><code>RotationArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.Rotation</code></td></tr>
<tr><td align="right"><a href="./scoreboardarguments.html#scoreboard-slot-argument"><code>ScoreboardSlotArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.ScoreboardSlot</code></td></tr>
<tr><td align="right"><a href="./scoreboardarguments.html#score-holder-argument"><code>ScoreHolderArgument</code></a></td><td align="left">The cast type changes depending on the input parameter:<br /><ul><li><code>ScoreHolderType.SINGLE</code> - <code>String</code></li><br /><li><code>ScoreHolderType.MULTIPLE</code> - <code>Collection&lt;String&gt;</code></li></ul></td></tr>
<tr><td align="right"><a href="./soundargument.html"><code>SoundArgument</code></a></td><td align="left"><code>org.bukkit.Sound</code></td></tr>
<tr><td align="right"><a href="./stringarguments.html#string-argument"><code>StringArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./teamarguments.html"><code>TeamArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./stringarguments.html#text-argument"><code>TextArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./timeargs.html"><code>TimeArgument</code></a></td><td align="left"><code>int</code></td></tr>
<tr><td align="right"><a href="./uuidargs.html"><code>UUIDArgument</code></a></td><td align="left"><code>java.util.UUID</code></td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#optionaldifferent-arguments" id="optionaldifferent-arguments">Optional/Different Arguments</a></h2>
<p>Sometimes, you want to register a command that has a different effect whether arguments are included or not. For example, take the <code>/kill</code> command. If you run <code>/kill</code> on its own, it will kill the command sender. If however you run <code>/kill &lt;target&gt;</code>, it will kill the target. In other words, we have the following command structure:</p>
<pre><code>/kill          - Kills yourself
/kill &lt;target&gt; - Kills a target player
</code></pre>
<p>As shown by the command structure, we need to register <em>two commands</em>.</p>
<div class="example">
<h3><a class="header" href="#example---kill-command-with-two-separate-arguments" id="example---kill-command-with-two-separate-arguments">Example - /kill command with two separate arguments</a></h3>
<p>For example, say we're registering a command <code>/kill</code>:</p>
<pre><code>/kill          - Kills yourself
/kill &lt;target&gt; - Kills a target player
</code></pre>
<p>We first register the first <code>/kill</code> command as normal:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;kill&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setHealth(0);
    })
    .register();
</code></pre>
<p>Now we declare our command with arguments for our second command. Then, we can register our second command <code>/kill &lt;target&gt;</code> as usual:</p>
<pre><code class="language-java">// Register our second /kill &lt;target&gt; command
new CommandAPICommand(&quot;kill&quot;)
    .withArguments(new PlayerArgument(&quot;target&quot;))
    .executesPlayer((player, args) -&gt; {
        ((Player) args[0]).setHealth(0);
    })
    .register();
</code></pre>
<p>This gives us the ability to run both <code>/kill</code> and <code>/kill &lt;target&gt;</code> with the same command name &quot;kill&quot;, but have different results based on the arguments used.</p>
<p>In this example, we use the simpler, inline <code>.withArguments(Argument... arguments)</code> method to register our argument. There is no difference to using this method as opposed to explicitly declaring a list and using <code>.withArguments(List&lt;Argument&gt; arguments)</code>, so feel free to use whichever method you want!</p>
</div><h1><a class="header" href="#argument-suggestions" id="argument-suggestions">Argument suggestions</a></h1>
<p>Sometimes, you want to override the list of suggestions that are provided by an argument. To handle this, CommandAPI arguments contain three methods to override suggestions:</p>
<pre><code class="language-java">Argument overrideSuggestions(String... suggestions);
Argument overrideSuggestions(Function&lt;CommandSender, String[]&gt; suggestions);
Argument overrideSuggestions(BiFunction&lt;CommandSender, Object[], String[]&gt; suggestions);
</code></pre>
<hr />
<h2><a class="header" href="#argument-suggestion-deferral" id="argument-suggestion-deferral">Argument suggestion deferral</a></h2>
<p>Before we go into detail about what the above methods do, we must first describe <em>suggestion deferral</em>. When the server loads, arguments that are provided with a String array are fixed, and do not change. However, arguments that are provided using the function and bifunction parameters are evaluated when they are needed - their execution is deferred until requested by the user. As such, if you wanted to retrieve something that isn't available during server load but is available during normal server running, it is recommended to use either of those functions instead of the String array.</p>
<p>For example, instead of doing the following, which retrieves a list of worlds on the server:</p>
<pre><code class="language-java">overrideSuggestions(Bukkit.getWorlds().stream().map(World::getName).toArray(String[]::new))
</code></pre>
<p>You should defer it using the function parameter:</p>
<pre><code class="language-java">overrideSuggestions(sender -&gt; Bukkit.getWorlds().stream().map(World::getName).toArray(String[]::new))
</code></pre>
<hr />
<h2><a class="header" href="#suggestions-with-a-string-array" id="suggestions-with-a-string-array">Suggestions with a String Array</a></h2>
<p>The first method, <code>overrideSuggestions(String... suggestions)</code>, allows you to <em>replace</em> the suggestions normally associated with that argument with an array of strings. As described above, this doesn't use suggestion deferral, <em>so this list will not update automatically</em>.</p>
<div class="example">
<h3><a class="header" href="#example---teleport-to-worlds-by-overriding-suggestions" id="example---teleport-to-worlds-by-overriding-suggestions">Example - Teleport to worlds by overriding suggestions</a></h3>
<p>Say we're creating a plugin with the ability to teleport to different warps on the server. If we were to retrieve a list of warps, we would be able to override the suggestions of a typical <code>StringArgument</code> to teleport to that warp. Let's create a command with the following structure:</p>
<pre><code>/warp &lt;warp&gt;
</code></pre>
<p>We then implement our warp teleporting command using <code>overrideSuggestions()</code> on the <code>StringArgument</code> to provide a list of warps to teleport to:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new StringArgument(&quot;world&quot;).overrideSuggestions(&quot;northland&quot;, &quot;eastland&quot;, &quot;southland&quot;, &quot;westland&quot;));

new CommandAPICommand(&quot;warp&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
       	String warp = (String) args[0];
		player.teleport(warps.get(warp)); // Look up the warp in a map, for example
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#suggestions-depending-on-a-command-sender" id="suggestions-depending-on-a-command-sender">Suggestions depending on a command sender</a></h2>
<p>The <code>overrideSuggestions(Function&lt;CommandSender, String[]&gt; suggestions)</code> method allows you to replace the suggestions normally associated with that argument with an array of strings that are evaluated dynamically using information about the command sender.</p>
<div class="example">
<h3><a class="header" href="#example---friend-list-by-overriding-suggestions" id="example---friend-list-by-overriding-suggestions">Example - Friend list by overriding suggestions</a></h3>
<p>Say you have a plugin which has a &quot;friend list&quot; for players. If you want to teleport to a friend in that list, you could use a <code>PlayerArgument</code>, which has the list of suggestions overridden with the list of friends that that player has. Since the list of friends <em>depends on the sender</em>, we can use the function to determine what our suggestions should be. Let's use the following command to teleport to a friend from our friend list:</p>
<pre><code>/friendtp &lt;friend&gt;
</code></pre>
<p>Let's say we have a simple class to get the friends of a command sender:</p>
<pre><code class="language-java">public class Friends {
	
	static Map&lt;UUID, String[]&gt; friends /* = ... */;
	
    public static String[] getFriends(CommandSender sender) {
        if(sender instanceof Player) {
        	//Look up friends in a database or file
            return friends.get(((Player) sender).getUniqueId());
        } else {
            return new String[0];
        }
    }
}
</code></pre>
<p>We can then use this to generate our suggested list of friends:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new PlayerArgument(&quot;friend&quot;).overrideSuggestions((sender) -&gt; {
    return Friends.getFriends(sender);
}));

new CommandAPICommand(&quot;friendtp&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
       	Player target = (Player) args[0];
		player.teleport(target);
    })
    .register();
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The syntax of inlining the <code>.overrideSuggestions()</code> method has been designed to work well with Java's lambdas. For example, we could write the above code more consisely, such as:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new PlayerArgument(&quot;friend&quot;).overrideSuggestions(Friends::getFriends));
</code></pre>
</blockquote>
</div>
<hr />
<h2><a class="header" href="#suggestions-depending-on-previous-arguments" id="suggestions-depending-on-previous-arguments">Suggestions depending on previous arguments</a></h2>
<p>The <code>overrideSuggestions(BiFunction&lt;CommandSender, Object[], String[]&gt; suggestions)</code> method is the most powerful suggestion overriding function that the CommandAPI offers. It has the capability to suggest arguments based on the values of previously inputted arguments.</p>
<p>This method requires a function that takes in a command sender and the <strong>list of previous arguments</strong> and must return a <code>String[]</code> of suggestions. The arguments are parsed exactly like any regular <code>CommandAPI</code> command argument.</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The ability to use previously declared arguments <em>does not work via redirects</em>. This means that any command that comes before it that leads into a command that uses suggestions depending on previous arguments will not work. For example, if we had a command <code>/mycommand &lt;arg1&gt; &lt;arg2&gt; &lt;arg3&gt;</code> and ran it as normal, it would work as normal:</p>
<pre><code>/mycommand arg1 arg2 arg3
</code></pre>
<p>However, if we redirect execution via the <code>/execute</code> command to have the following:</p>
<pre><code>/execute run mycommand &lt;suggestions&gt;
</code></pre>
<p>This won't work, because we make use of a redirect:</p>
<p>\[\texttt{/execute run} \xrightarrow{redirect} \texttt{mycommand arg1 arg2 arg3}\]</p>
<p>To clarify, by &quot;does not work&quot;, I mean that it is not possible to access the <code>Object[]</code> of previously declared arguments. <strong>If a command occurs via a redirect, the <code>Object[]</code> of previously declared arguments will be null</strong>.</p>
</div>
<div class="example">
<h3><a class="header" href="#example---sending-a-message-to-a-nearby-player" id="example---sending-a-message-to-a-nearby-player">Example - Sending a message to a nearby player</a></h3>
<p>Say we wanted to create a command that lets you send a message to a specific player in a given radius. <em>(This is a bit of a contrived example, but let's roll with it)</em>. To do this, we'll use the following command structure:</p>
<pre><code>/localmsg &lt;radius&gt; &lt;target&gt; &lt;message&gt;
</code></pre>
<p>When run, this command will send a message to a target player within the provided radius. To help identify which players are within a radius, we can override the suggestions on the <code>&lt;target&gt;</code> argument to include a list of players within the provided radius. We do this with the following code:</p>
<pre><code class="language-java">// Declare our arguments as normal
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new IntegerArgument(&quot;radius&quot;));

// Override the suggestions for the PlayerArgument, using (sender, args) as the parameters
// sender refers to the command sender that is running this command
// args refers to the Object[] of PREVIOUSLY DECLARED arguments (in this case, the IntegerArgument radius)
arguments.add(new PlayerArgument(&quot;target&quot;).overrideSuggestions((sender, args) -&gt; {

    // Cast the first argument (radius, which is an IntegerArgument) to get its value
	int radius = (int) args[0];
	
    // Get nearby entities within the provided radius
	Player player = (Player) sender;
	Collection&lt;Entity&gt; entities = player.getWorld().getNearbyEntities(player.getLocation(), radius, radius, radius);
	
    // Get player names within that radius
	return entities.stream()
		.filter(e -&gt; e.getType() == EntityType.PLAYER)
		.map(Entity::getName)
		.toArray(String[]::new);
}));
arguments.add(new GreedyStringArgument(&quot;message&quot;));

// Declare our command as normal
new CommandAPICommand(&quot;localmsg&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		Player target = (Player) args[1];
		String message = (String) args[2];
		target.sendMessage(message);
	})
	.register();
</code></pre>
<p>As shown in this code, we use the <code>(sender, args) -&gt; ...</code> lambda to override suggestions with previously declared arguments. In this example, our variable <code>args</code> will be <code>{ int }</code>, where this <code>int</code> refers to the radius. Note how this object array only has the previously declared arguments (and not for example <code>{ int, Player, String }</code>).</p>
</div>
<h1><a class="header" href="#safe-argument-suggestions" id="safe-argument-suggestions">Safe argument suggestions</a></h1>
<p>So far, we've covered how to override suggestions using the <code>overrideSuggestions()</code> method. The issue with using Strings for suggestion listings is that they are prone to errors. As a result, some arguments include the <code>safeOverrideSuggestions()</code>, which provides type-safety checks for argument suggestions, as well as automatic &quot;Bukkit-to-suggestion&quot; conversion.</p>
<p>The whole point of the safe argument suggestions method is that parameters entered in this method are <strong>guaranteed</strong> to work.</p>
<p>The use of the safe override suggestions function is basically the same as <code>overrideSuggestions()</code> from the previous section, except instead of returning a <code>String[]</code>, you now return a <code>T[]</code>, where <code>T</code> is the class corresponding to the argument. This is described in more detail in the table below.</p>
<pre><code class="language-java">Argument safeOverrideSuggestions(T... suggestions);
Argument safeOverrideSuggestions(Function&lt;CommandSender, T[]&gt; suggestions);
Argument safeOverrideSuggestions(BiFunction&lt;CommandSender, Object[], T[]&gt; suggestions);
</code></pre>
<h2><a class="header" href="#supported-arguments" id="supported-arguments">Supported arguments</a></h2>
<p>Not all arguments support safe suggestions. This is mostly due to implementation constraints or inadequate support by the Bukkit API.</p>
<p>The list of supported arguments are displayed in the following table. The parameter <code>T</code> (shown in the method signatures above) are also provided for each argument. This parameter is the same as the cast argument described in <a href="./arguments.html#argument-casting">Argument Casting</a>, except for a few exceptions which are outlined in <strong>bold</strong>.</p>
<table><thead><tr><th align="right">Argument</th><th align="left">Class (T)</th></tr></thead><tbody>
<tr><td align="right"><a href="./advancementargument.html"><code>AdvancementArgument</code></a></td><td align="left"><code>org.bukkit.advancement.Advancement</code></td></tr>
<tr><td align="right"><a href="./axisarg.html"><code>AxisArgument</code></a></td><td align="left"><code>java.util.EnumSet&lt;org.bukkit.Axis&gt;</code></td></tr>
<tr><td align="right"><a href="./biomeargument.html"><code>BiomeArgument</code></a></td><td align="left"><code>org.bukkit.block.Biome</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#boolean-arguments"><code>BooleanArgument</code></a></td><td align="left"><strong><code>Boolean</code></strong></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-color-argument"><code>ChatColorArgument</code></a></td><td align="left"><code>org.bukkit.ChatColor</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>DoubleArgument</code></a></td><td align="left"><strong><code>Double</code></strong></td></tr>
<tr><td align="right"><a href="./enchantmentargument.html"><code>EnchantmentArgument</code></a></td><td align="left"><code>org.bukkit.enchantments.Enchantment</code></td></tr>
<tr><td align="right"><a href="./entityarguments.html#entity-type-argument"><code>EntityTypeArgument</code></a></td><td align="left"><code>org.bukkit.entity.EntityType</code></td></tr>
<tr><td align="right"><a href="./environmentargs.html"><code>EnvironmentArgument</code></a></td><td align="left"><code>org.bukkit.World.Environment</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>FloatArgument</code></a></td><td align="left"><strong><code>Float</code></strong></td></tr>
<tr><td align="right"><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>FloatRangeArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.FloatRange</code></td></tr>
<tr><td align="right"><a href="./functionwrapper.html"><code>FunctionArgument</code></a></td><td align="left"><strong><code>org.bukkit.NamespacedKey</code></strong></td></tr>
<tr><td align="right"><a href="./stringarguments.html#greedy-string-argument"><code>GreedyStringArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>IntegerArgument</code></a></td><td align="left"><strong><code>Integer</code></strong></td></tr>
<tr><td align="right"><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>IntegerRangeArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.IntegerRange</code></td></tr>
<tr><td align="right"><a href="./itemstackarguments.html"><code>ItemStackArgument</code></a></td><td align="left"><code>org.bukkit.inventory.ItemStack</code></td></tr>
<tr><td align="right"><a href="./locationargument.html#location-2d-space"><code>Location2DArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.Location2D</code></td></tr>
<tr><td align="right"><a href="./locationargument.html#location-3d-space"><code>LocationArgument</code></a></td><td align="left"><code>org.bukkit.Location</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>LongArgument</code></a></td><td align="left"><strong><code>Long</code></strong></td></tr>
<tr><td align="right"><a href="./loottableargument.html"><code>LootTableArgument</code></a></td><td align="left"><code>org.bukkit.loot.LootTable</code></td></tr>
<tr><td align="right"><a href="./mathoperationarguments.html"><code>MathOperationArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.MathOperation</code></td></tr>
<tr><td align="right"><a href="./nbtarguments.html"><code>NBTCompoundArgument</code></a></td><td align="left"><code>de.tr7zw.nbtapi.NBTContainer</code></td></tr>
<tr><td align="right"><a href="./objectivearguments.html#objective-argument"><code>ObjectiveArgument</code></a></td><td align="left"><strong><code>org.bukkit.scoreboard.Objective</code></strong></td></tr>
<tr><td align="right"><a href="./particlearguments.html"><code>ParticleArgument</code></a></td><td align="left"><code>org.bukkit.Particle</code></td></tr>
<tr><td align="right"><a href="./entityarguments.html#player-argument"><code>PlayerArgument</code></a></td><td align="left"><code>org.bukkit.entity.Player</code></td></tr>
<tr><td align="right"><a href="./potionarguments.html"><code>PotionEffectArgument</code></a></td><td align="left"><code>org.bukkit.potion.PotionEffectType</code></td></tr>
<tr><td align="right"><a href="./recipeargument.html"><code>RecipeArgument</code></a></td><td align="left"><code>org.bukkit.inventory.Recipe</code></td></tr>
<tr><td align="right"><a href="./rotationargs.html"><code>RotationArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.Rotation</code></td></tr>
<tr><td align="right"><a href="./scoreboardarguments.html#scoreboard-slot-argument"><code>ScoreboardSlotArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.ScoreboardSlot</code></td></tr>
<tr><td align="right"><a href="./soundargument.html"><code>SoundArgument</code></a></td><td align="left"><code>org.bukkit.Sound</code></td></tr>
<tr><td align="right"><a href="./teamarguments.html"><code>TeamArgument</code></a></td><td align="left"><strong><code>org.bukkit.scoreboard.Team</code></strong></td></tr>
<tr><td align="right"><a href="./timeargs.html"><code>TimeArgument</code></a></td><td align="left"><strong><code>dev.jorel.commandapi.wrappers.Time</code></strong></td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#safe-time-arguments" id="safe-time-arguments">Safe time arguments</a></h2>
<p>While most of the arguments are fairly straight forward, I'd like to bring your attention to the <code>TimeArgument</code>'s safe suggestions function. This uses <code>dev.jorel.commandapi.wrappers.Time</code> as the class for <code>T</code> to ensure type-safety. The <code>Time</code> class has three static methods:</p>
<pre><code class="language-java">Time ticks(int ticks);
Time days(int days);
Time seconds(int seconds);
</code></pre>
<p>These create representations of ticks (e.g. <code>40t</code>), days (e.g. <code>2d</code>) and seconds (e.g. <code>60s</code>) respectively.</p>
<hr />
<h2><a class="header" href="#safe-function-arguments" id="safe-function-arguments">Safe function arguments</a></h2>
<p>Although all safe arguments are indeed &quot;type-safe&quot;, the function argument uses a <code>NamespacedKey</code> which cannot be checked fully at compile time. As a result, this is argument should be used with caution - providing a <code>NamespacedKey</code> suggestion that does not exist when the server is running will cause that command to fail if that suggestion is used.</p>
<hr />
<h2><a class="header" href="#safe-scoreboard-slot-arguments" id="safe-scoreboard-slot-arguments">Safe scoreboard slot arguments</a></h2>
<p>Scoreboard slots now include two new static methods so they can be used with safe arguments:</p>
<pre><code class="language-java">ScoreboardSlot of(DisplaySlot slot);
ScoreboardSlot ofTeamColor(ChatColor color);
</code></pre>
<p>This allows you to create <code>ScoreboardSlot</code> instances which can be used with the safe override suggestions method.</p>
<hr />
<h2><a class="header" href="#examples" id="examples">Examples</a></h2>
<p>While this should be fairly straight forward, here's a few examples of how this can be used in practice:</p>
<div class="example">
<h3><a class="header" href="#example---safe-recipe-arguments" id="example---safe-recipe-arguments">Example - Safe recipe arguments</a></h3>
<p>Say we have a plugin that registers custom items which can be crafted. In this example, we use an &quot;emerald sword&quot; with a custom crafting recipe. Now say that we want to have a command that gives the player the item from our declared recipes. To do this, we first register our custom items:</p>
<pre><code class="language-java">// Create our itemstack
ItemStack emeraldSword = new ItemStack(Material.DIAMOND_SWORD);
ItemMeta meta = emeraldSword.getItemMeta();
meta.setDisplayName(&quot;Emerald Sword&quot;);
meta.setUnbreakable(true);
emeraldSword.setItemMeta(meta);

// Create and register our recipe
ShapedRecipe emeraldSwordRecipe = new ShapedRecipe(new NamespacedKey(this, &quot;emerald_sword&quot;), emeraldSword);
emeraldSwordRecipe.shape(
	&quot;AEA&quot;, 
	&quot;AEA&quot;, 
	&quot;ABA&quot;
);
emeraldSwordRecipe.setIngredient('A', Material.AIR);
emeraldSwordRecipe.setIngredient('E', Material.EMERALD);
emeraldSwordRecipe.setIngredient('B', Material.BLAZE_ROD);
getServer().addRecipe(emeraldSwordRecipe);

... // Omitted, more itemstacks and recipes
</code></pre>
<p>Once we've done that, we can now include them in our command registration. To do this, we use <code>safeOverrideSuggestions(recipes)</code> and then register our command as normal:</p>
<pre><code class="language-java">// Safely override with the recipe we've defined
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new RecipeArgument(&quot;recipe&quot;).safeOverrideSuggestions(emeraldSwordRecipe, /* Other recipes */));

// Register our command
new CommandAPICommand(&quot;giverecipe&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		Recipe recipe = (Recipe) args[0];
		player.getInventory().addItem(recipe.getResult());
	})
	.register();
</code></pre>
</div>
<div class="example">
<h3><a class="header" href="#example---safe-spawnmob-suggestions" id="example---safe-spawnmob-suggestions">Example - Safe /spawnmob suggestions</a></h3>
<p>Say we have a command to spawn mobs:</p>
<pre><code>/spawnmob &lt;mob&gt;
</code></pre>
<p>Now say that we don't want non-op players to spawn bosses. To do this, we'll create a <code>List&lt;EntityType&gt;</code> which is the list of all mobs that non-ops are allowed to spawn:</p>
<pre><code class="language-java">EntityType[] forbiddenMobs = new EntityType[] {EntityType.ENDER_DRAGON, EntityType.WITHER};
List&lt;EntityType&gt; allowedMobs = new ArrayList&lt;&gt;(Arrays.asList(EntityType.values()));
allowedMobs.removeAll(Arrays.asList(forbiddenMobs)); //Now contains everything except enderdragon and wither
</code></pre>
<p>We then use our safe arguments to return an <code>EntityType[]</code> as the list of values that are suggested to the player. In this example, we use the <code>Function&lt;CommandSender, EntityType[]&gt;</code> argument to determine if the sender has permissions to view the suggestions:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new EntityTypeArgument(&quot;mob&quot;).safeOverrideSuggestions(
	sender -&gt; {
		if(sender.isOp()) {
			return EntityType.values(); //All entity types
		} else {
			return allowedMobs.toArray(new EntityType[0]); //Only allowsMobs
		}
	})
);
</code></pre>
<p>Now we register our command as normal:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;spawnmob&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		EntityType entityType = (EntityType) args[0];
		player.getWorld().spawnEntity(player.getLocation(), entityType);
	})
	.register();
</code></pre>
</div>
<div class="example">
<h3><a class="header" href="#example---removing-a-potion-effect-from-a-player" id="example---removing-a-potion-effect-from-a-player">Example - Removing a potion effect from a player</a></h3>
<p>Say we wanted to remove a potion effect from a player. To do this, we'll use the following command structure:</p>
<pre><code>/removeeffect &lt;player&gt; &lt;potioneffect&gt;
</code></pre>
<p>Now, we don't want to remove a potion effect that already exists on a player, so instead we'll use the safe arguments to find a list of potion effects on the target player and then only suggest those potion effects. To do this, we'll use the <code>BiFunction&lt;CommandSender, Object[], PotionEffectType[]&gt;</code> parameter, as it allows us to access the previously defined <code>&lt;player&gt;</code> argument.</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new EntitySelectorArgument(&quot;target&quot;, EntitySelector.ONE_PLAYER));
arguments.add(new PotionEffectArgument(&quot;potioneffect&quot;).safeOverrideSuggestions(
	(sender, prevArgs) -&gt; {
		Player target = (Player) prevArgs[0];
        
        //Convert PotionEffect[] into PotionEffectType[]
		return target.getActivePotionEffects().stream()
			.map(PotionEffect::getType)
			.toArray(PotionEffectType[]::new);
	})
);
</code></pre>
<p>And then we can register our command as normal:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;removeeffect&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		EntityType entityType = (EntityType) args[0];
		player.getWorld().spawnEntity(player.getLocation(), entityType);
	})
	.register();
</code></pre>
</div>
<h1><a class="header" href="#argument-suggestions-with-tooltips" id="argument-suggestions-with-tooltips">Argument suggestions with tooltips</a></h1>
<p><img src="./images/warps.gif" alt="" /></p>
<p>The CommandAPI can also display tooltips for specific argument suggestions. These are shown to the user when they hover over a given suggestion and can be used to provide more context to a user about the suggestions that are shown to them. In this section, we'll outline the two ways of creating suggestions with tooltips: </p>
<ul>
<li>Normal (String) suggestions with tooltips</li>
<li>Safe suggestions with tooltips</li>
</ul>
<p>Tooltips <em>can</em> have formatting to change how the text is displayed by using the <code>ChatColor</code> class.</p>
<hr />
<h2><a class="header" href="#tooltips-with-normal-string-suggestions" id="tooltips-with-normal-string-suggestions">Tooltips with normal (String) suggestions</a></h2>
<p>To use these features, the CommandAPI includes the <code>overrideSuggestionsT</code> methods for arguments, that accept <code>IStringTooltip</code> objects instead of <code>String</code> objects:</p>
<pre><code class="language-java">Argument overrideSuggestionsT(IStringTooltip... suggestions);
Argument overrideSuggestionsT(Collection&lt;IStringTooltip&gt; suggestions);
Argument overrideSuggestionsT(Function&lt;CommandSender, IStringTooltip[]&gt; suggestions);
Argument overrideSuggestionsT(BiFunction&lt;CommandSender, Object[], IStringTooltip[]&gt; suggestions);
</code></pre>
<p>The <code>StringTooltip</code> class is the CommandAPI's default implementation of <code>IStringTooltip</code>, which has two static methods to construct it easily:</p>
<pre><code class="language-java">StringTooltip none(String suggestion);
StringTooltip of(String suggestion, String tooltip);
</code></pre>
<p>The first method, <code>StringTooltip.none(String)</code> creates a normal suggestion entry with no tooltip, whereas the <code>StringTooltip.of(String, String)</code> method creates a suggestion with the provided tooltip text.</p>
<div class="example">
<h3><a class="header" href="#example---an-emotes-command-with-string-suggestion-tooltips" id="example---an-emotes-command-with-string-suggestion-tooltips">Example - An emotes command with string suggestion tooltips</a></h3>
<p>Say we want to create a simple command to provide ingame emotes between players. For example, if you did <code>/emote wave Bob</code>, you'll &quot;wave&quot; to the player <em>Bob</em>. For this example, we'll use the following command structure:</p>
<pre><code>/emote &lt;emote&gt; &lt;target&gt;
</code></pre>
<p>First, we'll declare our arguments. Here, we'll use the <code>overrideSuggestionsT</code> method, along with the <code>StringTooltip.of(String, String)</code> method to create emote suggestions and include suitable descriptions:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new StringArgument(&quot;emote&quot;)
	.overrideSuggestionsT( 
        StringTooltip.of(&quot;wave&quot;, &quot;Waves at a player&quot;),
        StringTooltip.of(&quot;hug&quot;, &quot;Gives a player a hug&quot;),
        StringTooltip.of(&quot;glare&quot;, &quot;Gives a player the death glare&quot;)
	)
);
arguments.add(new PlayerArgument(&quot;target&quot;));
</code></pre>
<p>Finally, we declare our command as normal:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;emote&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		String emote = (String) args[0];
		Player target = (Player) args[1];
		
		switch(emote) {
		case &quot;wave&quot;:
			target.sendMessage(player.getName() + &quot; waves at you!&quot;);
			break;
		case &quot;hug&quot;:
			target.sendMessage(player.getName() + &quot; hugs you!&quot;);
			break;
		case &quot;glare&quot;:
			target.sendMessage(player.getName() + &quot; gives you the death glare...&quot;);
			break;
		}
	})
	.register();
</code></pre>
</div>
<p>The <code>IStringTooltip</code> interface can be implemented by any other class to provide tooltips for custom objects. The <code>IStringTooltip</code> interface has the following methods:</p>
<pre><code class="language-java">public interface IStringTooltip {
	public String getSuggestion();
	public String getTooltip();
}
</code></pre>
<p>This is incredibly useful if you are using suggestions with custom objects, such as a plugin that has custom items.</p>
<div class="example">
<h3><a class="header" href="#example---using-istringtooltip-for-custom-items" id="example---using-istringtooltip-for-custom-items">Example - Using <code>IStringTooltip</code> for custom items</a></h3>
<p>Let's say we've created a simple plugin which has custom items. For a custom item, we'll have a super simple class <code>CustomItem</code> that sets its name, lore and attached itemstack:</p>
<pre><code class="language-java">public class CustomItem implements IStringTooltip {

	private ItemStack itemstack;
	private String name;
	
	public CustomItem(ItemStack itemstack, String name, String lore) {
		ItemMeta meta = itemstack.getItemMeta();
		meta.setDisplayName(name);
		meta.setLore(Arrays.asList(lore));
		itemstack.setItemMeta(meta);
		this.itemstack = itemstack;
		this.name = name;
	}
	
	public String getName() {
		return this.name;
	}
	
	public ItemStack getItem() {
		return this.itemstack;
	}
	
	@Override
	public String getSuggestion() {
		return this.itemstack.getItemMeta().getDisplayName();
	}

	@Override
	public String getTooltip() {
		return this.itemstack.getItemMeta().getLore().get(0);
	}
	
}
</code></pre>
<p>Let's also say that our plugin has registered lots of <code>CustomItem</code>s and has this stored in a <code>CustomItem[]</code> in our plugin. We could then use this as our input for suggestions:</p>
<pre><code class="language-java">CustomItem[] customItems = new CustomItem[] {
	new CustomItem(new ItemStack(Material.DIAMOND_SWORD), &quot;God sword&quot;, &quot;A sword from the heavens&quot;),
	new CustomItem(new ItemStack(Material.PUMPKIN_PIE), &quot;Sweet pie&quot;, &quot;Just like grandma used to make&quot;)
};  //
	
new CommandAPICommand(&quot;giveitem&quot;)
	.withArguments(new StringArgument(&quot;item&quot;).overrideSuggestionsT(customItems)) // We use customItems[] as the input for our suggestions with tooltips
	.executesPlayer((player, args) -&gt; {
		String itemName = (String) args[0];
		
		//Give them the item
		for(CustomItem item : customItems) {
			if(item.getName().equals(itemName)) {
				player.getInventory().addItem(item.getItem());
			}
		}
	})
	.register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#tooltips-with-safe-suggestions" id="tooltips-with-safe-suggestions">Tooltips with safe suggestions</a></h2>
<p>Using tooltips with safe suggestions is almost identical to the method described above for normal suggestions, except for two things. Firstly, you must use <code>safeOverrideSuggestionsT</code> method instead of the <code>overrideSuggestionsT</code> method and secondly, instead of using <code>StringTooltip</code>, you must use <code>Tooltip&lt;S&gt;</code>. Let's look at these differences in more detail.</p>
<p>The <code>safeOverrideSuggestionsT</code> methods are fairly similar to the <code>overrideSuggestionsT</code> methods, except instead of using <code>StringTooltip</code>, it simply uses <code>Tooltip&lt;S&gt;</code>.</p>
<pre><code class="language-java">Argument safeOverrideSuggestionsT(Tooltip&lt;S&gt;... suggestions);
Argument safeOverrideSuggestionsT(Collection&lt;Tooltip&lt;S&gt;&gt; suggestions);
Argument safeOverrideSuggestionsT(Function&lt;CommandSender, Tooltip&lt;S&gt;[]&gt; suggestions);
Argument safeOverrideSuggestionsT(BiFunction&lt;CommandSender, Object[], Tooltip&lt;S&gt;[]&gt; suggestions);
</code></pre>
<p>The <code>Tooltip&lt;S&gt;</code> class represents a tooltip for a given object <code>S</code>. For example, a tooltip that is for a <code>LocationArgument</code> would be a <code>Tooltip&lt;Location&gt;</code> and a tooltip for an <code>EnchantmentArgument</code> would be a <code>Tooltip&lt;Enchantment&gt;</code>.</p>
<p>Just like the <code>StringTooltip</code> class, the <code>Tooltip&lt;S&gt;</code> class provides the following static methods, which operate exactly the same as the ones in the <code>StringTooltip</code> class:</p>
<pre><code class="language-java">Tooltip&lt;S&gt; none(S object);
Tooltip&lt;S&gt; of(S object, String tooltip);
Tooltip&lt;S&gt;[] arrayOf(Tooltip&lt;S&gt;... tooltips);
</code></pre>
<p>The use of <code>arrayOf</code> is heavily recommended as it provides the necessary type safety for Java code to ensure that the correct types are being passed to the <code>safeOverrideSuggestionsT</code> method.</p>
<div class="example">
<h3><a class="header" href="#example---teleportation-command-with-suggestion-descriptions" id="example---teleportation-command-with-suggestion-descriptions">Example - Teleportation command with suggestion descriptions</a></h3>
<p>Say we wanted to create a custom teleport command which suggestions a few key locations. In this example, we'll use the following command structure:</p>
<pre><code>/warp &lt;location&gt;
</code></pre>
<p>First, we'll declare our arguments. Here, we use a <code>LocationArgument</code> and use the <code>safeOverrideSuggestionsT</code> method, with a parameter for the command sender, so we can get information about the world. We populate the suggestions with tooltips using <code>Tooltip.of(Location, String)</code> and collate them together with <code>Tooltip.arrayOf(Tooltip&lt;Location&gt;...)</code>:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new LocationArgument(&quot;location&quot;)
    .safeOverrideSuggestionsT((sender) -&gt; {
        return Tooltip.arrayOf(
            Tooltip.of(((Player) sender).getWorld().getSpawnLocation(), &quot;World spawn&quot;),
            Tooltip.of(((Player) sender).getBedSpawnLocation(), &quot;Your bed&quot;),
            Tooltip.of(((Player) sender).getTargetBlockExact(256).getLocation(), &quot;Target block&quot;)
        );
    }));
</code></pre>
<p>In the arguments declaration, we've casted the command sender to a player. To ensure that the command sender is definitely a player, we'll use the <code>executesPlayer</code> command execution method in our command declaration:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;warp&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
	    player.teleport((Location) args[0]);
	})
	.register();
</code></pre>
</div>
<h1><a class="header" href="#listed-arguments" id="listed-arguments">Listed arguments</a></h1>
<p>Arguments have a setting which determine whether or not they are present in the <code>Object[] args</code> that is populated when executing a command. </p>
<p>By default, the <code>LiteralArgument</code> has this setting set to <code>false</code>, hence the literal values are <em>not</em> present in the <code>Object[] args</code>.</p>
<p>This flag is set using the following function:</p>
<pre><code class="language-java">Argument setListed(boolean listed);
</code></pre>
<div class="example">
<h3><a class="header" href="#example---setting-listed-arguments" id="example---setting-listed-arguments">Example - Setting listed arguments</a></h3>
<p>Say we have the following command:</p>
<pre><code>/mycommand &lt;player&gt; &lt;value&gt; &lt;message&gt;
</code></pre>
<p>Let's also say that in our implementation of this command, we don't actually perform any processing for <code>&lt;value&gt;</code>. Hence, listing it in the <code>Object args[]</code> is unnecessary. </p>
<pre><code class="language-java">new CommandAPICommand(&quot;mycommand&quot;)
    .withArguments(new PlayerArgument(&quot;player&quot;))
    .withArguments(new IntegerArgument(&quot;value&quot;).setListed(false))
    .withArguments(new GreedyStringArgument(&quot;message&quot;))
    .executes((sender, args) -&gt; {
    	// args == [player, message]
    	Player player = (Player) args[0];
    	String message = (String) args[1]; //Note that this is args[1] and NOT args[2]
        player.sendMessage(message);
    })
    .register();
</code></pre>
<p>In this scenario, the argument <code>&lt;value&gt;</code> is not present in the <code>Object args[]</code> for the executor.</p>
</div><h1><a class="header" href="#argument-types" id="argument-types">Argument types</a></h1>
<h1><a class="header" href="#primitive-arguments" id="primitive-arguments">Primitive arguments</a></h1>
<p>Primitive arguments are arguments that represent Java primitive types, such as <code>int</code>, <code>float</code>, <code>double</code>, <code>boolean</code> and <code>long</code>. These arguments are defined in their respective classes:</p>
<table><thead><tr><th>Primitive type</th><th>CommandAPI class</th></tr></thead><tbody>
<tr><td><code>int</code></td><td><code>IntegerArgument</code></td></tr>
<tr><td><code>float</code></td><td><code>FloatArgument</code></td></tr>
<tr><td><code>double</code></td><td><code>DoubleArgument</code></td></tr>
<tr><td><code>long</code></td><td><code>LongArgument</code></td></tr>
<tr><td><code>boolean</code></td><td><code>BooleanArgument</code></td></tr>
</tbody></table>
<p>These arguments simply cast to their primitive type and don't need any extra work.</p>
<hr />
<h2><a class="header" href="#boolean-arguments" id="boolean-arguments">Boolean arguments</a></h2>
<p><img src="./images/arguments/boolean.png" alt="" /></p>
<p>The <code>BooleanArgument</code> class represents the Boolean values <code>true</code> and <code>false</code>.</p>
<div class="example">
<h3><a class="header" href="#example---config-editing-plugin" id="example---config-editing-plugin">Example - Config editing plugin</a></h3>
<p>Say we want to create a plugin that lets you edit its own <code>config.yml</code> file using a command. To do this, let's create a command with the following structure:</p>
<pre><code>/editconfig &lt;config-key&gt; &lt;value&gt;
</code></pre>
<p>We first retrieve the keys from the configuration file using the typical Bukkit API. We construct our <code>List</code> to hold our arguments, with the first parameter being a String key (in the form of a <code>TextArgument</code>, <a href="TODO">overridden with an array of suggestions</a>). Finally, we register our command and update the config, ensuring that we cast the <code>BooleanArgument</code> to <code>boolean</code>: </p>
<pre><code class="language-java">// Load keys from config file
String[] configKeys = getConfig().getKeys(true).toArray(new String[0]);

// Create arguments with the config key and a boolean value to set it to
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new TextArgument(&quot;config-key&quot;).overrideSuggestions(configKeys));
arguments.add(new BooleanArgument(&quot;value&quot;));

// Register our command
new CommandAPICommand(&quot;editconfig&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        // Update the config with the boolean argument
        getConfig().set((String) args[0], (boolean) args[1]);
    })
    .register();
}
</code></pre>
</div>
<hr />
<h2><a class="header" href="#numerical-arguments" id="numerical-arguments">Numerical arguments</a></h2>
<p>Numbers are represented using the designated number classes:</p>
<table><thead><tr><th>Class</th><th>Description</th></tr></thead><tbody>
<tr><td><code>IntegerArgument</code></td><td>Whole numbers between <code>Integer.MIN_VALUE</code> and <code>Integer.MAX_VALUE</code></td></tr>
<tr><td><code>LongArgument</code></td><td>Whole numbers between <code>Long.MIN_VALUE</code> and <code>Long.MAX_VALUE</code></td></tr>
<tr><td><code>DoubleArgument</code></td><td>Double precision floating point numbers</td></tr>
<tr><td><code>FloatArgument</code></td><td>Single precision floating point numbers</td></tr>
</tbody></table>
<p>Each numerical argument can have ranges applied to them, which restricts the user to only entering numbers from within a certain range. This is done using the constructor, and the range specified:</p>
<table><thead><tr><th>Constructor</th><th>Description</th></tr></thead><tbody>
<tr><td><code>new IntegerArgument()</code></td><td>Any range</td></tr>
<tr><td><code>new IntegerArgument(min)</code></td><td>Values greater than <em>or equal to</em> <code>min</code></td></tr>
<tr><td><code>new IntegerArgument(min, max)</code></td><td>Values greater than or equal to <code>min</code> and less than or equal to <code>max</code></td></tr>
</tbody></table>
<p>Each range is <em>inclusive</em>, so it includes the number given to it. If the minimum value provided is larger than the maximum value, an <code>InvalidRangeException</code> is thrown.</p>
<h1><a class="header" href="#ranged-arguments" id="ranged-arguments">Ranged arguments</a></h1>
<p><img src="./images/arguments/floatrange.png" alt="" /></p>
<p>Ranged arguments allow players to provide a range between two numbers, all within a single argument. The CommandAPI provides two ranged arguments, <code>IntegerRangeArgument</code> for ranges with only integer values, and <code>FloatRangeArgument</code> for ranged with potential floating point values.</p>
<p>These consist of values such as:</p>
<table><thead><tr><th>Input</th><th>What it means</th></tr></thead><tbody>
<tr><td><code>5</code></td><td>The number 5</td></tr>
<tr><td><code>5..10</code></td><td>Numbers between 5 and 10, including 5 and 10</td></tr>
<tr><td><code>5..</code></td><td>Numbers greater than or equal to 5 (bounded by Java's max number size)</td></tr>
<tr><td><code>..5</code></td><td>Numbers less than or equal to 5 (bounded by Java's min number size)</td></tr>
</tbody></table>
<p>This allows you to let users define a range of values, which can be used to limit a value, such as the number of players in a region or for a random number generator.</p>
<hr />
<h2><a class="header" href="#the-integerrange--floatrange-class" id="the-integerrange--floatrange-class">The IntegerRange &amp; FloatRange class</a></h2>
<p>The CommandAPI returns an <code>IntegerRange</code> from the <code>IntegerRangeArgument</code>, and a <code>FloatRange</code> from the <code>FloatRangeArgument</code>, which represents the upper and lower bounds of the numbers provided by the command sender, as well as a method to check if a number is within that range.</p>
<p>The <code>IntegerRange</code> class has the following methods:</p>
<pre><code class="language-java">class IntegerRange {
    public int getLowerBound();
    public int getUpperBound();
    public boolean isInRange(int);
}
</code></pre>
<p>The <code>FloatRange</code> class has the following methods:</p>
<pre><code class="language-java">class FloatRange {
    public float getLowerBound();
    public float getUpperBound();
    public boolean isInRange(float);
}
</code></pre>
<div class="example">
<h2><a class="header" href="#example---searching-chests-for-certain-items" id="example---searching-chests-for-certain-items">Example - Searching chests for certain items</a></h2>
<p>Say you're working on a plugin for server administrators to help them find restricted items. A method of doing so would be to search chests in a given radius for certain items. As such, we can use the following structure:</p>
<pre><code>/searchchests &lt;range&gt; &lt;item&gt;
</code></pre>
<p>Now, we simply create our arguments using <code>IntegerRangeArgument</code> for our range and <code>ItemStackArgument</code> as the item to search for. We can then find all chests in a given area and determine if it is within the range provided by the command sender by using <code>range.isInRange(distance)</code>:</p>
<pre><code class="language-java">// Declare our arguments for /searchrange &lt;IntegerRange&gt; &lt;ItemStack&gt;
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new IntegerRangeArgument(&quot;range&quot;));
arguments.add(new ItemStackArgument(&quot;item&quot;));

new CommandAPICommand(&quot;searchrange&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        // Retrieve the range from the arguments
        IntegerRange range = (IntegerRange) args[0];
        ItemStack itemStack = (ItemStack) args[1];

        // Store the locations of chests with certain items
        List&lt;Location&gt; locations = new ArrayList&lt;&gt;();

        // Iterate through all chunks, and then all tile entities within each chunk
        for(Chunk chunk : player.getWorld().getLoadedChunks()) {
            for(BlockState blockState : chunk.getTileEntities()) {

                // The distance between the block and the player
                int distance = (int) blockState.getLocation().distance(player.getLocation());

                // Check if the distance is within the specified range 
                if(range.isInRange(distance)) {

                    // Check if the tile entity is a chest
                    if(blockState instanceof Chest) {
                        Chest chest = (Chest) blockState;

                        // Check if the chest contains the item specified by the player
                        if(chest.getInventory().contains(itemStack.getType())) {
                            locations.add(chest.getLocation());
                        }
                    }
                }

            }
        }

        // Output the locations of the chests, or whether no chests were found
        if(locations.isEmpty()) {
            player.sendMessage(&quot;No chests were found&quot;);
        } else {
            player.sendMessage(&quot;Found &quot; + locations.size() + &quot; chests:&quot;);
            locations.forEach(location -&gt; {
                player.sendMessage(&quot;  Found at: &quot; 
                        + location.getX() + &quot;, &quot; 
                        + location.getY() + &quot;, &quot; 
                        + location.getZ());
            });
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#string-arguments" id="string-arguments">String arguments</a></h1>
<p>There are three types of arguments that return Java's <code>String</code> object. Each have their own unique set of features which make them suitable for specific needs.</p>
<hr />
<h2><a class="header" href="#string-argument" id="string-argument">String argument</a></h2>
<p>The <code>StringArgument</code> class is used to represent a single word. These words <strong>can only contain alphanumeric characters (A-Z, a-z and 0-9), and the underscore character</strong>.</p>
<p>Accepted <code>StringArgument</code> values:</p>
<pre><code>Hello
123
hello123
Hello_world
</code></pre>
<p>Rejected <code>StringArgument</code> values:</p>
<pre><code>hello@email.com
yesn't
</code></pre>
<div class="example">
<h3><a class="header" href="#examples-of-stringargument-uses" id="examples-of-stringargument-uses">Examples of StringArgument uses:</a></h3>
<ul>
<li>Entering strings to identify offline players</li>
</ul>
</div>
<hr />
<h2><a class="header" href="#text-argument" id="text-argument">Text argument</a></h2>
<p>The <code>TextArgument</code> acts similar to any String in Java. These can be single words, like to the <code>StringArgument</code>, or have additional characters (e.g. spaces, symbols) <strong>if surrounded by quotes</strong>. To type quotation marks, you can use <code>\&quot;</code> (as similar to Java) to escape these special characters.</p>
<p>Accepted <code>TextArgument</code> values:</p>
<pre><code>hello
&quot;hello world!&quot;
&quot;hello@gmail.com&quot;
&quot;this has \&quot; &lt;&lt;-- speech marks! &quot;
</code></pre>
<p>Rejected <code>TextArgument</code> values:</p>
<pre><code>hello world
私
&quot;speech marks: &quot;&quot;
</code></pre>
<div class="example">
<h3><a class="header" href="#examples-of-textargument-uses" id="examples-of-textargument-uses">Examples of TextArgument uses:</a></h3>
<ul>
<li>Editing the contents of a sign</li>
<li>A command that requires multiple text arguments (say, username and password?)</li>
</ul>
</div>
<hr />
<h2><a class="header" href="#greedy-string-argument" id="greedy-string-argument">Greedy string argument</a></h2>
<blockquote>
<p><strong>Greedy Arguments:</strong></p>
<p>The <code>GreedyStringArgument</code>, similar to the <code>ChatArgument</code> uses the entire argument array from its current position. This means that it never ends, therefore if it is used, it must be the last element of your <code>List</code> of arguments.</p>
<p>For example, if you have a command <code>/message &lt;message&gt; &lt;target&gt;</code>, it would not be able to determine where the message ends and the <code>&lt;target&gt;</code> argument begins.</p>
<p>If a <code>GreedyStringArgument</code> or <code>ChatArgument</code> is not declared at the end of the <code>List</code> of arguments, or multiple of these arguments are used in the same <code>List</code>, the CommandAPI throws a <code>GreedyArgumentException</code>.</p>
</blockquote>
<p>The <code>GreedyStringArgument</code> takes the <code>TextArgument</code> a step further. <strong>Any characters and symbols are allowed</strong> and quotation marks are not required.</p>
<div class="example">
<h3><a class="header" href="#example---messaging-command" id="example---messaging-command">Example - Messaging command</a></h3>
<p>Say we have a simple message command of the following form:</p>
<pre><code>/message &lt;target&gt; &lt;message&gt;
</code></pre>
<p>This would be ideal for a greedy string, since it can consume all text after the player's name:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new PlayerArgument(&quot;target&quot;));
arguments.add(new GreedyStringArgument(&quot;message&quot;));

new CommandAPICommand(&quot;message&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        ((Player) args[0]).sendMessage((String) args[1]);
    })
    .register();
</code></pre>
<p>Any text entered after the <code>&lt;target&gt;</code> argument would be sent to the player. For example, the command could be used as follows:</p>
<pre><code>/message Skepter This is some incredibly long string with &quot;symbols&quot; and $p3c!aL characters~
</code></pre>
<p>Note how this only works if the greedy string argument is <em>at the end</em>. If, say, the command was <code>/message &lt;message&gt; &lt;target&gt;</code>, it would not be able to determine where the <code>&lt;message&gt;</code> argument ends and the <code>&lt;target&gt;</code> argument begins.</p>
</div>
<div class="example">
<h3><a class="header" href="#examples-of-greedystringargument-uses" id="examples-of-greedystringargument-uses">Examples of GreedyStringArgument uses:</a></h3>
<ul>
<li>A messaging/whisper command (as shown in the example above)</li>
<li>A mailing command</li>
<li>Any command involving lots of text, such as a command to write the contents of a book</li>
<li>Any command which involves an unreasonable/unknown amount of arguments</li>
<li>Any command where you want to parse arguments similar to how regular Bukkit would</li>
</ul>
</div>
<h1><a class="header" href="#position-based-arguments" id="position-based-arguments">Position-based arguments</a></h1>
<h1><a class="header" href="#location-arguments" id="location-arguments">Location arguments</a></h1>
<p><img src="./images/arguments/loc.png" alt="" /></p>
<p>In the CommandAPI, there are two arguments used to represent location. The <code>LocationArgument</code> argument, which represents a 3D location \( (x, y, z) \) and the <code>Location2DArgument</code>, which represents 2D location \( (x, z) \). </p>
<hr />
<h2><a class="header" href="#location-3d-space" id="location-3d-space">Location (3D space)</a></h2>
<p>The <code>LocationArgument</code> class is used to specify a location in the <strong>command sender's current world</strong>, returning a Bukkit <code>Location</code> object. It allows the user to enter three numbers as coordinates, or use relative coordinates (i.e. the <code>~</code> and <code>^</code> operators).</p>
<p>The <code>LocationArgument</code> constructor requires a <code>LocationType</code>, which specifies the type of location that is accepted by the command. The <code>LocationType</code> enum consists of two values:</p>
<h3><a class="header" href="#locationtypeblock_position" id="locationtypeblock_position"><code>LocationType.BLOCK_POSITION</code></a></h3>
<p><code>BLOCK_POSITION</code> refers to integer block coordinates. When in-game as a player, the suggested location is the coordinates of block you are looking at when you type the command.</p>
<p><img src="https://user-images.githubusercontent.com/42968178/50574833-92ef9e00-0df0-11e9-9ae5-59235b1bb8cb.png" alt="BLOCK_POSITION" /></p>
<h3><a class="header" href="#locationtypeprecise_position" id="locationtypeprecise_position"><code>LocationType.PRECISE_POSITION</code></a></h3>
<p><code>PRECISE_PRECISION</code> uses exact coordinates, using the <code>double</code> primitive type. When in-game as a player, the suggested location is the exact coordinates of where your cursor is pointing at when you type the command.</p>
<p><img src="https://user-images.githubusercontent.com/42968178/50574841-b6b2e400-0df0-11e9-9003-481b139d190f.png" alt="PRECISE_POSITION" /></p>
<p>If no <code>LocationType</code> is provided, <strong>the <code>LocationArgument</code> will use <code>PRECISE_POSITION</code> by default</strong>.</p>
<hr />
<div class="example">
<h3><a class="header" href="#example---break-block-using-coordinates" id="example---break-block-using-coordinates">Example - Break block using coordinates</a></h3>
<p>We can declare a simple command to break a block:</p>
<pre><code>/break &lt;location&gt;
</code></pre>
<p>Simply put, given the coordinates provided to the command, &quot;break&quot; the block by setting it's type to <code>Material.AIR</code>. For this example, we're referring to block specific coordinates, so we want to use <code>LocationType.BLOCK_POSITION</code>:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;break&quot;)
    //We want to target blocks in particular, so use BLOCK_POSITION
    .withArguments(new LocationArgument(&quot;block&quot;, LocationType.BLOCK_POSITION))
    .executesPlayer((player, args) -&gt; {
        ((Location) args[0]).getBlock().setType(Material.AIR);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#location-2d-space" id="location-2d-space">Location (2D space)</a></h2>
<p><img src="./images/arguments/loc2d.png" alt="" /></p>
<p>The <code>Location2DArgument</code> is pretty much identical in use to the <code>LocationArgument</code> for 3D coordinates, except instead of returning a <code>Location</code> object, it instead returns a <code>Location2D</code> object that extends <code>Location</code> (thus, being compatible anywhere you would normally be able to use <code>Location</code>).</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The <code>Location2DArgument</code> cannot be used with <code>LocationType.PRECISE_POSITION</code> in Minecraft 1.13. However, it can be used normally with <code>LocationType.PRECISE_POSITION</code> in Minecraft versions 1.13.1 and later.</p>
</div><h1><a class="header" href="#rotation-arguments" id="rotation-arguments">Rotation arguments</a></h1>
<p><img src="./images/arguments/rotation.png" alt="" /></p>
<p>The <code>RotationArgument</code> allows users to specify a pair of pitch and yaw coordinates. By default (using the <code>~</code> symbol), this refers to the player's current pitch and yaw of where they are looking at.</p>
<p>The <code>RotationArgument</code> class returns a <code>Rotation</code> object, which consists of the following methods:</p>
<table><thead><tr><th>Method name</th><th>What it does</th></tr></thead><tbody>
<tr><td><code>float getPitch()</code></td><td>Returns a player's pitch (up and down rotation)</td></tr>
<tr><td><code>float getYaw()</code></td><td>Returns a player's yaw (left and right rotation)</td></tr>
<tr><td><code>float getNormalizedPitch()</code></td><td>Returns a player's pitch between -90 and 90 degrees</td></tr>
<tr><td><code>float getNormalizedYaw()</code></td><td>Returns a player's yaw between -180 and 180 degrees</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example-rotate-an-armor-stand-head" id="example-rotate-an-armor-stand-head">Example: Rotate an armor stand head</a></h3>
<p>Say we want to make an armor stand look in a certain direction. To do this, we'll use the following command:</p>
<pre><code>/rotate &lt;rotation&gt; &lt;target&gt;
</code></pre>
<p>To do this, we'll use the rotation from the <code>RotationArgument</code> and select an entity using the <code>EntitySelectorArgument</code>, with <code>EntitySelector.ONE_ENTITY</code>. We then check if our entity is an armor stand and if so, we set its head pose to the given rotation.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;rotate&quot;)
    .withArguments(new RotationArgument(&quot;rotation&quot;))
    .withArguments(new EntitySelectorArgument(&quot;target&quot;, EntitySelector.ONE_ENTITY))
    .executes((sender, args) -&gt; {
        Rotation rotation = (Rotation) args[0];
        Entity target = (Entity) args[1];

        if(target instanceof ArmorStand) {
            ArmorStand a = (ArmorStand) target;
            a.setHeadPose(new EulerAngle(Math.toRadians(rotation.getPitch()), Math.toRadians(rotation.getYaw() - 90), 0));
        }
    })
    .register();
</code></pre>
<p>Note how the head pose requires an <code>EulerAngle</code> as opposed to a pitch and yaw. To account for this, we convert our rotation (which is in degrees) into an <code>EulerAngle</code> in radians.</p>
</div><h1><a class="header" href="#axisargument" id="axisargument">AxisArgument</a></h1>
<p><img src="./images/arguments/axis.png" alt="" /></p>
<p>The <code>AxisArgument</code> class refers to the x, y and z axes. When used with the CommandAPI, it returns an <code>EnumSet&lt;Axis&gt;</code> <em>(You can view the documentation for <code>EnumSet</code> <a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html">here</a>)</em>. </p>
<div class="example">
<h3><a class="header" href="#examples-of-axisargument-uses" id="examples-of-axisargument-uses">Examples of AxisArgument uses:</a></h3>
<ul>
<li>Reflecting a structure in the x, y or z axis</li>
</ul>
</div><h1><a class="header" href="#chat-arguments" id="chat-arguments">Chat arguments</a></h1>
<p>The CommandAPI provides three main classes to interact with chat formatting in Minecraft.</p>
<h2><a class="header" href="#chat-color-argument" id="chat-color-argument">Chat color argument</a></h2>
<p><img src="./images/arguments/chatcolor.png" alt="" /></p>
<p>The <code>ChatColorArgument</code> class is used to represent a given chat color (e.g. red or green) </p>
<div class="example">
<h3><a class="header" href="#example---username-color-changing-plugin" id="example---username-color-changing-plugin">Example - Username color changing plugin</a></h3>
<p>Say we want to create a plugin to change the color of a player's username. We want to create a command of the following form:</p>
<pre><code>/namecolor &lt;chatcolor&gt;
</code></pre>
<p>We then use the <code>ChatColorArgument</code> to change the player's name color:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;namecolor&quot;)
    .withArguments(new ChatColorArgument(&quot;chatcolor&quot;))
    .executesPlayer((player, args) -&gt; {
        ChatColor color = (ChatColor) args[0];
        player.setDisplayName(color + player.getName());
    })
    .register();
</code></pre>
</div>
<hr />
<h1><a class="header" href="#spigot-based-chat-arguments" id="spigot-based-chat-arguments">Spigot-based chat arguments</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The two following classes, <code>ChatComponentArgument</code> and <code>ChatArgument</code> depend on a Spigot based server. This means that these arguments will not work on a non-Spigot based server, such as CraftBukkit. If you use this class on a non-Spigot based server, it will throw a <code>SpigotNotFoundException</code></p>
<p>Spigot based servers include, but are not limited to:</p>
<ul>
<li><a href="https://www.spigotmc.org/">Spigot</a></li>
<li><a href="https://papermc.io/">PaperSpigot</a></li>
<li><a href="https://tacospigot.github.io/">TacoSpigot</a></li>
</ul>
</blockquote>
<h2><a class="header" href="#chat-component-argument" id="chat-component-argument">Chat component argument</a></h2>
<p>The <code>ChatComponentArgument</code> class accepts raw chat-based JSON as valid input. Despite being regular JSON, it <em>must</em> conform to the standard declared <a href="https://minecraft.gamepedia.com/Raw_JSON_text_format">here</a>, which consists of JSON that has a limited subset of specific keys (In other words, you can have a JSON object that has the key <code>text</code>, but not one that has the key <code>blah</code>).</p>
<p>This is converted into Spigot's <code>BaseComponent[]</code>, which can be used for the following:</p>
<ul>
<li>
<p>Broadcasting messages to all players on the server using:</p>
<pre><code class="language-java">Bukkit.getServer().spigot().broadcast(BaseComponent[]);
</code></pre>
</li>
<li>
<p>Adding and setting pages to books using <code>BookMeta</code>:</p>
<pre><code class="language-java">BookMeta meta = // ...
meta.spigot().setPages(BaseComponent[]);
</code></pre>
</li>
<li>
<p>Sending messages to <code>Player</code> objects:</p>
<pre><code class="language-java">Player player = // ...
player.spigot().sendMessage(BaseComponent[]);
</code></pre>
</li>
<li>
<p>Sending messages to <code>CommandSender</code> objects:</p>
<pre><code class="language-java">CommandSender sender = // ...
sender.spigot().sendMessage(BaseComponent[]);
</code></pre>
</li>
</ul>
<div class="example">
<h3><a class="header" href="#example---book-made-from-raw-json" id="example---book-made-from-raw-json">Example - Book made from raw JSON</a></h3>
<p>Say we want to generate a book using raw JSON. For this example, we'll use the following JSON (generated from <a href="https://minecraftjson.com/">minecraftjson.com</a>) to generate our book:</p>
<pre><code class="language-json">[&quot;&quot;, {
    &quot;text&quot;: &quot;Once upon a time, there was a guy call &quot;
}, {
    &quot;text&quot;: &quot;Skepter&quot;,
    &quot;color&quot;: &quot;light_purple&quot;,
    &quot;hoverEvent&quot;: {
        &quot;action&quot;: &quot;show_entity&quot;,
        &quot;value&quot;: &quot;Skepter&quot;
    }
}, {
    &quot;text&quot;: &quot; and he created the &quot;
}, {
    &quot;text&quot;: &quot;CommandAPI&quot;,
    &quot;underlined&quot;: true,
    &quot;clickEvent&quot;: {
        &quot;action&quot;: &quot;open_url&quot;,
        &quot;value&quot;: &quot;https://github.com/JorelAli/CommandAPI&quot;
    }
}]
</code></pre>
<p>Since we're writing a book, we must ensure that all quotes have been escaped. This can also be performed on the <a href="https://minecraftjson.com/">minecraftjson.com</a> website by selecting &quot;book&quot;: </p>
<pre><code class="language-json">[&quot;[\&quot;\&quot;,{\&quot;text\&quot;:\&quot;Once upon a time, there was a guy call \&quot;},{\&quot;text\&quot;:\&quot;Skepter\&quot;,\&quot;color\&quot;:\&quot;light_purple\&quot;,\&quot;hoverEvent\&quot;:{\&quot;action\&quot;:\&quot;show_entity\&quot;,\&quot;value\&quot;:\&quot;Skepter\&quot;}},{\&quot;text\&quot;:\&quot; and he created the \&quot;},{\&quot;text\&quot;:\&quot;CommandAPI\&quot;,\&quot;underlined\&quot;:true,\&quot;clickEvent\&quot;:{\&quot;action\&quot;:\&quot;open_url\&quot;,\&quot;value\&quot;:\&quot;https://github.com/JorelAli/CommandAPI\&quot;}}]&quot;]
</code></pre>
<p>Now let's define our command. Since book text is typically very large - too large to be entered into a chat, we'll make a command block compatible command by providing a player parameter:</p>
<pre><code>/makebook &lt;player&gt; &lt;contents&gt;
</code></pre>
<p>Now we can create our book command. We use the player as the main target by using their name for the author field, as well as their inventory to place the book. We finally construct our book using the <code>.setPages(BaseComponent[])</code> method:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;makebook&quot;)
    .withArguments(new PlayerArgument(&quot;player&quot;))
    .withArguments(new ChatComponentArgument(&quot;contents&quot;))
    .executes((sender, args) -&gt; {
        Player player = (Player) args[0];
        BaseComponent[] arr = (BaseComponent[]) args[1];
        
        //Create book
        ItemStack is = new ItemStack(Material.WRITTEN_BOOK);
        BookMeta meta = (BookMeta) is.getItemMeta(); 
        meta.setTitle(&quot;Custom Book&quot;);
        meta.setAuthor(player.getName());
        meta.spigot().setPages(arr);
        is.setItemMeta(meta);
        
        //Give player the book
        player.getInventory().addItem(is);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#chat-argument" id="chat-argument">Chat argument</a></h2>
<div class="warning">
<p><strong>Developer's Note:</strong></p>
<p>It has been observed that the <code>ChatArgument</code> does not work on Spigot 1.16.1. This is not the case however for Spigot versions 1.15.2 and below, as well as Spigot 1.16.2.</p>
</div>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>ChatArgument</code> class is an argument similar to the <a href="./stringarguments.html#greedy-string-argument"><code>GreedyStringArgument</code></a>, in the sense that it has no terminator and must be defined at the end of your <code>List</code> of arguments. For more information on this, please read the section on <a href="./stringarguments.html#greedy-string-argument">Greedy arguments</a>.</p>
</blockquote>
<p>The <code>ChatArgument</code> is basically identical to the <code>GreedyStringArgument</code>, with the added functionality of enabling <em>entity selectors</em>, such as <code>@e</code>, <code>@p</code> and so on. The <code>ChatArgument</code> also returns a <code>BaseComponent[]</code>, similar to the <code>ChatComponentArgument</code>.</p>
<div class="example">
<h3><a class="header" href="#example---sending-personalized-messages-to-players" id="example---sending-personalized-messages-to-players">Example - Sending personalized messages to players</a></h3>
<p>Say we wanted to broadcast a &quot;personalized&quot; message to players on the server. By &quot;personalized&quot;, we mean a command which changes its output depending on who we are sending the output to. Simply put, we want a command of the following structure:</p>
<pre><code>/pbroadcast &lt;message&gt;
</code></pre>
<p>Say we're on a server with 2 players: <em>Bob</em> and <em>Michael</em>. If I were to use the following command:</p>
<pre><code>/pbroadcast Hello @p
</code></pre>
<p><em>Bob</em> would receive the message &quot;Hello Bob&quot;, whereas <em>Michael</em> would receive the message &quot;Hello Michael&quot;. We can use the <code>ChatArgument</code> to create this &quot;personalized&quot; broadcast:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;pbroadcast&quot;)
    .withArguments(new ChatArgument(&quot;message&quot;))
    .executes((sender, args) -&gt; {
        BaseComponent[] message = (BaseComponent[]) args[0];
    
        //Broadcast the message to everyone on the server
        Bukkit.getServer().spigot().broadcast(message);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#entity--player-arguments" id="entity--player-arguments">Entity &amp; player arguments</a></h1>
<h2><a class="header" href="#entity-selector-argument" id="entity-selector-argument">Entity selector argument</a></h2>
<p><img src="./images/arguments/entityselector.png" alt="" /></p>
<p>Minecraft's <a href="https://minecraft.gamepedia.com/Commands#Target_selectors">target selectors</a> (e.g. <code>@a</code> or <code>@e</code>) are implemented using the <code>EntitySelectorArgument</code> class. This allows you to select specific entities based on certain attributes.</p>
<p>The <code>EntitySelectorArgument</code> constructor requires an <code>EntitySelector</code> argument to determine what type of data to return. There are 4 types of entity selections which are available:</p>
<ul>
<li><code>EntitySelector.ONE_ENTITY</code> - A single entity, which returns a <code>Entity</code> object.</li>
<li><code>EntitySelector.MANY_ENTITIES</code>  - A collection of many entities, which returns a <code>Collection&lt;Entity&gt;</code> object.</li>
<li><code>EntitySelector.ONE_PLAYER</code> - A single player, which returns a <code>Player</code> object.</li>
<li><code>EntitySelector.MANY_PLAYERS</code> - A collection of players, which returns a <code>Collection&lt;Player&gt;</code> object.</li>
</ul>
<p>The return type is the type to be cast when retrieved from the <code>Object[] args</code> in the command declaration.</p>
<div class="example">
<h3><a class="header" href="#example---remove-entities-command" id="example---remove-entities-command">Example - Remove entities command</a></h3>
<p>Say we want a command to remove certain types of entities. Typically, this would be implemented using a simple command like:</p>
<pre><code>/remove &lt;player&gt;
/remove &lt;mob type&gt;
/remove &lt;radius&gt;
</code></pre>
<p>Instead, we can combine all of these into one by using the <code>EntitySelectorArgument</code>. We want to be able to target multiple entities at a time, so we want to use the <code>EntitySelector.MANY_ENTITIES</code> value in our constructor. We can simply retrieve the <code>Collection&lt;Entity&gt;</code> from this argument and iteratively remove each entity:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;remove&quot;)
    //Using a collective entity selector to select multiple entities
    .withArguments(new EntitySelectorArgument(&quot;entities&quot;, EntitySelector.MANY_ENTITIES))
    .executes((sender, args) -&gt; {
        //Parse the argument as a collection of entities (as stated above in the documentation)
        @SuppressWarnings(&quot;unchecked&quot;)
        Collection&lt;Entity&gt; entities = (Collection&lt;Entity&gt;) args[0];
        
        sender.sendMessage(&quot;Removed &quot; + entities.size() + &quot; entities&quot;);
        for(Entity e : entities) {
            e.remove();
        }
    })
    .register();
</code></pre>
<p>We could then use this to target specific entities, for example:</p>
<ul>
<li>To remove all cows:
<pre><code>/remove @e[type=cow]
</code></pre>
</li>
<li>To remove the 10 furthest pigs from the command sender:
<pre><code>/remove @e[type=pig,limit=10,sort=furthest]
</code></pre>
</li>
</ul>
</div>
<hr />
<h2><a class="header" href="#player-argument" id="player-argument">Player argument</a></h2>
<p>The <code>PlayerArgument</code> class is very similar <em>(almost identical)</em> to <code>EntitySelectorArgument</code>, with the EntitySelector <code>ONE_PLAYER</code>. It also allows you to select a player based on their UUID.</p>
<blockquote>
<p><strong>Developer's Note:</strong> </p>
<p>I've not tested the <code>PlayerArgument</code> enough to recommend using it over the <code>EntitySelectorArgument(EntitySelector.ONE_PLAYER)</code>. There may be other advantages to using this than the regular EntitySelectorArgument, but as of writing this documentation, I know not of the advantages nor disadvantages to using this argument type. Internally, the <code>PlayerArgument</code> uses the <code>GameProfile</code> class from Mojang's authlib, which may be able to retrieve offline players (untested).</p>
<p><em>(Of course, if anyone is able to confirm any major differences between the <code>PlayerArgument</code> and the <code>EntitySelectorArgument(EntitySelector.ONE_PLAYER)</code>, I would be more than happy to include your findings in the documentation. If so, feel free to make a documentation amendment <a href="https://github.com/JorelAli/CommandAPI/issues/new/choose">here</a>.)</em></p>
</blockquote>
<hr />
<h2><a class="header" href="#entity-type-argument" id="entity-type-argument">Entity type argument</a></h2>
<p><img src="./images/arguments/entitytype.png" alt="" /></p>
<p>The <code>EntityTypeArgument</code> class is used to retrieve a type of entity as defined in the <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/entity/EntityType.html"><code>EntityType</code></a> enum. In other words, this is an entity type, for example a pig or a zombie.</p>
<div class="example">
<h3><a class="header" href="#example---spawning-entities" id="example---spawning-entities">Example - Spawning entities</a></h3>
<p>Say we want a command to spawn a specific type of entity, similar to the <code>/summon</code> command in Vanilla Minecraft, with the addition of specifying how many entities to spawn. We want to create a command of the following form:</p>
<pre><code>/spawnmob &lt;entity&gt; &lt;amount&gt;
</code></pre>
<p>Since we're trying to specify an entity type, we will use the <code>EntityTypeArgument</code> as our argument type for <code>&lt;entity&gt;</code>. We combine this with the <code>IntegerArgument</code> class with a specified range of \( 1 \le \textit{amount} \le 100 \):</p>
<pre><code class="language-java">new CommandAPICommand(&quot;spawnmob&quot;)
    .withArguments(new EntityTypeArgument(&quot;entity&quot;))
    .withArguments(new IntegerArgument(&quot;amount&quot;, 1, 100)) //Prevent spawning too many entities
    .executesPlayer((Player player, Object[] args) -&gt; {
        for(int i = 0; i &lt; (int) args[1]; i++) {
            player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
        }
    })
    .register();
</code></pre>
<p>Note how in this example above, we have to explicitly state <code>Player player, Object[] args</code>. This is due to a limitation of Java's type inference system which is discussed <a href="./commandregistration.html#setting-the-commands-executor">here</a>.</p>
</div><h1><a class="header" href="#scoreboard-arguments" id="scoreboard-arguments">Scoreboard arguments</a></h1>
<p>The scoreboard arguments that the CommandAPI provides allows you to interact with various scoreboard elements, such as objectives, teams and score holders. Since commands are registered in the <code>onEnable()</code> or <code>onLoad()</code> method of a plugin, this means that these are registered before Bukkit's main scoreboard is loaded.</p>
<p>This means that calling <code>Bukkit.getScoreboardManager().getMainScoreboard()</code> will <em>always</em> result in a <code>NullPointerException</code>. To avoid this scenario, try using a lambda which delays the call that gets Bukkit's main scoreboard to the moment when the command is executed, which typically occurs after the server has initialized it. For example, if you wanted to populate a <code>TeamArgument</code> with a list of all registered teams on the server, you should use the following:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
	        	
arguments.add(new TeamArgument(&quot;team&quot;).safeOverrideSuggestions(s -&gt;
    Bukkit.getScoreboardManager().getMainScoreboard().getTeams().toArray(new Team[0]))
);
</code></pre>
<h1><a class="header" href="#scoreboard-arguments-1" id="scoreboard-arguments-1">Scoreboard arguments</a></h1>
<p>The CommandAPI uses two classes to provide information about a scoreboard:</p>
<ul>
<li>The <code>ScoreHolderArgument</code> class represents <strong>score holder</strong> - a player's name or an entity's UUID that has scores in an objective. This is described in more detail <a href="https://minecraft.gamepedia.com/Scoreboard#Objectives">on the Minecraft Wiki</a>.</li>
<li>The <code>ScoreboardSlotArgument</code> class represents a <strong>display slot</strong> (sidebar, list or belowName) as well as the team color if the display is the sidebar. This is described in more detail <a href="https://minecraft.gamepedia.com/Scoreboard#Display_slots">on the Minecraft Wiki</a>.</li>
</ul>
<hr />
<h2><a class="header" href="#score-holder-argument" id="score-holder-argument">Score holder argument</a></h2>
<p>The score holder argument can accept either a single entity or a collection of multiple entities. In order to specify which one to use, you must provide a <code>ScoreHolderType</code> enum value to the <code>ScoreHolderArgument</code> constructor, which is either <code>ScoreHolderType.SINGLE</code> or <code>ScoreHolderType.MULTIPLE</code>:</p>
<pre><code class="language-java">new ScoreHolderArgument(nodeName, ScoreHolderType.SINGLE);
new ScoreHolderArgument(nodeName, ScoreHolderType.MULTIPLE);
</code></pre>
<p>Depending on which constructor is used, the cast type changes. If you use a <code>ScoreHolderType.SINGLE</code>, the argument must be casted to a <code>String</code>. Otherwise, if you use <code>ScoreHolderType.MULTIPLE</code>, the argument must be casted to a <code>Collection&lt;String&gt;</code>.</p>
<div class="example">
<h3><a class="header" href="#example---rewarding-players-with-scoreboard-objectives" id="example---rewarding-players-with-scoreboard-objectives">Example - Rewarding players with scoreboard objectives</a></h3>
<p>Say we want to reward all players that fit a certain criteria. We want a command with the following structure:</p>
<pre><code>/reward &lt;players&gt;
</code></pre>
<p>Since we could have multiple players that fit a certain criterion, we want to use <code>ScoreHolderType.MULTIPLE</code> as the parameter for the argument's constructor.</p>
<p>To give this example a bit more context, let's say we want to reward all players that have died less than 10 times in the server. To do this, we will use the following command:</p>
<pre><code>/reward @e[type=player,scores={deaths=..9}]
</code></pre>
<p>Note how we use <code>..9</code> to represent 9 or less deaths (since ranges are inclusive). Also note how we restrict our input to players via the command using <code>type=player</code>. We can now implement our command:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;reward&quot;)
    //We want multiple players, so we use ScoreHolderType.MULTIPLE in the constructor
    .withArguments(new ScoreHolderArgument(&quot;players&quot;, ScoreHolderType.MULTIPLE))
    .executes((sender, args) -&gt; {
        //Get player names by casting to Collection&lt;String&gt;
        @SuppressWarnings(&quot;unchecked&quot;)
        Collection&lt;String&gt; players = (Collection&lt;String&gt;) args[0];
        
        for(String playerName : players) {
            Bukkit.getPlayer(playerName).getInventory().addItem(new ItemStack(Material.DIAMOND, 3));
        }
    })
    .register();
</code></pre>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In the example above, we have our user use the <code>@e[type=player]</code> entity selector to restrict the <code>Collection&lt;String&gt;</code> so it only returns player names, which allows us to use <code>Bukkit.getPlayer(playerName)</code>. In practice, we cannot guarantee that such a selector will be used, so we could update the code to accept both entities and players. For example, we can differentiate between players and entities by using the <code>UUID.fromString(String)</code> method:</p>
<pre><code class="language-java">Collection&lt;String&gt; entitiesAndPlayers = (Collection&lt;String&gt;) args[0];
for(String str : entitiesAndPlayers) {
    try {
        UUID uuid = UUID.fromString(str);
        //Is a UUID, so it must by an entity
        Bukkit.getEntity(uuid);
    } catch(IllegalArgumentException exception) {
        //Not a UUID, so it must be a player name
        Bukkit.getPlayer(str); 
    }
}
</code></pre>
</blockquote>
<hr />
<h2><a class="header" href="#scoreboard-slot-argument" id="scoreboard-slot-argument">Scoreboard slot argument</a></h2>
<p><img src="./images/arguments/scoreboardslot.png" alt="" /></p>
<p>The <code>ScoreboardSlotArgument</code> represents where scoreboard information is displayed. Since the Bukkit scoreboard <code>DisplaySlot</code> is not able to represent the case where team colors are provided, the CommandAPI uses the <code>ScoreboardSlot</code> wrapper class as the representation of the <code>ScoreboardSlotArgument</code>.</p>
<h3><a class="header" href="#scoreboardslot-wrapper" id="scoreboardslot-wrapper"><code>ScoreboardSlot</code> wrapper</a></h3>
<p>The <code>ScoreboardSlot</code> wrapper class has 3 methods:</p>
<pre><code class="language-java">class ScoreboardSlot {
    public DisplaySlot getDisplaySlot();
    public ChatColor getTeamColor();
    public boolean hasTeamColor();
}
</code></pre>
<p>The <code>getDisplaySlot()</code> method returns the display slot that was chosen. If the display slot is <code>DisplaySlot.SIDEBAR</code> and <code>hasTeamColor()</code> returns true, then it is possible to use <code>getTeamColor()</code> to get the team color provided.</p>
<div class="example">
<h3><a class="header" href="#example---clearing-objectives-in-a-scoreboard-slot" id="example---clearing-objectives-in-a-scoreboard-slot">Example - Clearing objectives in a scoreboard slot</a></h3>
<p>Say we want to clear all objectives in a specific scoreboard slot. In this example, we will use the main server scoreboard, which is accessed using <code>Bukkit.getScoreboardManager.getMainScoreboard()</code>. We want a command with the following structure:</p>
<pre><code>/clearobjectives &lt;slot&gt;
</code></pre>
<p>We implement this simply by using the <code>ScoreboardSlotArgument</code> as our argument, and then we can clear the slot using the scoreboard <code>clearSlot(DisplaySlot)</code> method.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;clearobjectives&quot;)
    .withArguments(new ScoreboardSlotArgument(&quot;slot&quot;))
    .executes((sender, args) -&gt; {
        Scoreboard scoreboard = Bukkit.getScoreboardManager().getMainScoreboard();
        DisplaySlot slot = ((ScoreboardSlot) args[0]).getDisplaySlot();
        scoreboard.clearSlot(slot);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#objective-arguments" id="objective-arguments">Objective arguments</a></h1>
<p>In the CommandAPI, objectives are split into two classes: </p>
<ul>
<li>The <code>ObjectiveArgument</code> class, which represents objectives as a whole</li>
<li>The <code>ObjectiveCriteriaArgument</code> class, which represents objective criteria</li>
</ul>
<hr />
<h2><a class="header" href="#objective-argument" id="objective-argument">Objective argument</a></h2>
<p>The objective argument refers to a single scoreboard objective. Unconventionally, the <code>ObjectiveArgument</code> must be cast to <code>String</code> due to implementation limitations.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The two classes <code>ObjectiveArgument</code> and <code>TeamArgument</code> must both be cast to <code>String</code>, as opposed to <code>Objective</code> and <code>Team</code> respectively. This is due to the fact that commands are typically registered in the <code>onLoad()</code> method during a plugin's initialization. At this point in the server start-up sequence, the main server scoreboard is not initialized, so it cannot be used.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---move-objective-to-sidebar" id="example---move-objective-to-sidebar">Example - Move objective to sidebar</a></h3>
<p>As an example, let's create a command to move an objective to a player's sidebar. To do this, we will use the following command structure:</p>
<pre><code>/sidebar &lt;objective&gt;
</code></pre>
<p>Given that an objective has to be casted to a String, we have to find a way to convert it from its name to a Bukkit <code>Objective</code> object. We can do that by using the <code>getObjective(String)</code> method from a Bukkit <code>Scoreboard</code>:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;sidebar&quot;)
    .withArguments(new ObjectiveArgument(&quot;objective&quot;))
    .executes((sender, args) -&gt; {
        //The ObjectArgument must be casted to a String
        String objectiveName = (String) args[0];
        
        //An objective name can be turned into an Objective using getObjective(String)
        Objective objective = Bukkit.getScoreboardManager().getMainScoreboard().getObjective(objectiveName);
        
        //Set display slot
        objective.setDisplaySlot(DisplaySlot.SIDEBAR);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#objective-criteria-argument" id="objective-criteria-argument">Objective criteria argument</a></h2>
<p>The <code>ObjectiveCriteriaArgument</code> is fairly straight forward - it represents the criteria for an objective. Similar to Bukkit, the objective criteria is simply represented as a <code>String</code>, so it must be casted to a <code>String</code> when being used.</p>
<div class="example">
<h3><a class="header" href="#example---unregister-all-objectives-by-criteria" id="example---unregister-all-objectives-by-criteria">Example - Unregister all objectives by criteria</a></h3>
<p>Say we wanted to create a command to unregister all objectives based on a given criteria. Let's create a command with the following form:</p>
<pre><code>/unregisterall &lt;objective critera&gt;
</code></pre>
<p>To do this, we're going to take advantage of Bukkit's <code>Scoreboard.getObjectivesByCriteria(String)</code> method</p>
<pre><code class="language-java">new CommandAPICommand(&quot;unregisterall&quot;)
    .withArguments(new ObjectiveCriteriaArgument(&quot;objective criteria&quot;))
    .executes((sender, args) -&gt; {
        String objectiveCriteria = (String) args[0];
        Set&lt;Objective&gt; objectives = Bukkit.getScoreboardManager().getMainScoreboard().getObjectivesByCriteria(objectiveCriteria);
        
        //Unregister the objectives
        for(Objective objective : objectives) {
            objective.unregister();
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#team-arguments" id="team-arguments">Team arguments</a></h1>
<p>The <code>TeamArgument</code> class interacts with the Minecraft scoreboard and represents a team. Similar to the <code>ObjectiveArgument</code> class, the <code>TeamArgument</code> class must be casted to a String.</p>
<div class="example">
<h3><a class="header" href="#example---toggling-friendly-fire-in-a-team" id="example---toggling-friendly-fire-in-a-team">Example - Toggling friendly fire in a team</a></h3>
<p>Let's say we want to create a command to toggle the state of friendly fire in a team. We want a command of the following form</p>
<pre><code>/togglepvp &lt;team&gt;
</code></pre>
<p>To do this, given a team we want to use the <code>setAllowFriendlyFire(boolean)</code> function. As with the <code>ObjectiveArgument</code>, we must convert the <code>String</code> into a <code>Team</code> object.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;togglepvp&quot;)
    .withArguments(new TeamArgument(&quot;team&quot;))
    .executes((sender, args) -&gt; {
        //The TeamArgument must be casted to a String
        String teamName = (String) args[0];
        
        //A team name can be turned into a Team using getTeam(String)
        Team team = Bukkit.getScoreboardManager().getMainScoreboard().getTeam(teamName);
        
        //Toggle pvp
        team.setAllowFriendlyFire(team.allowFriendlyFire());
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#miscellaneous-arguments" id="miscellaneous-arguments">Miscellaneous arguments</a></h1>
<h1><a class="header" href="#angle-arguments" id="angle-arguments">Angle arguments</a></h1>
<p>The angle argument is used to represent the <em>yaw</em> (horizontal) angle in degrees. The value returned from this argument range from -180.0 (inclusive) to 180 (exclusive), with -180.0 being due north:</p>
<p>\begin{align}
-1&amp;80.0 \\
&amp;\hspace{0.1em}N \\
&amp;\uparrow \\
90.0\ W \leftarrow &amp;\hspace{0.75em}\rightarrow E\  -90.0 \\
&amp;\downarrow \\
&amp;\hspace{0.2em}S \\
&amp;0.0 \\
\end{align}</p>
<p>The <code>~</code> notation can be used to specify a rotation relative to the executor's yaw angle.</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The <code>AngleArgument</code> is only supported in Minecraft versions 1.16.2 and later, meaning it <em>will not work</em> on Minecraft versions 1.16 or 1.16.1. This is due to the fact that Minecraft added the time argument in 1.16.2. Attempting to use the <code>AngleArgument</code> on an incompatible version will throw aa <code>AngleArgumentException</code>.</p>
</div><h1><a class="header" href="#advancement-arguments" id="advancement-arguments">Advancement arguments</a></h1>
<p><img src="./images/arguments/advancement.png" alt="" /></p>
<p>The <code>AdvancementArgument</code> class represents in-game advancements. As expected, the <code>AdvancementArgument</code> can be casted to Bukkit's <code>Advancement</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---awarding-a-player-an-advancement" id="example---awarding-a-player-an-advancement">Example - Awarding a player an advancement</a></h3>
<p>Say we want to award a player an advancement. First, we need the structure of our command:</p>
<pre><code>/award &lt;player&gt; &lt;advancement&gt;
</code></pre>
<p>Since we require a player, we will use the <code>PlayerArgument</code> for this example. Given a player, we can simply get the <code>AdvancementProgress</code> for that player, and then award the criteria required to fully complete the provided advancement.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;award&quot;)
    .withArguments(new PlayerArgument(&quot;player&quot;))
    .withArguments(new AdvancementArgument(&quot;advancement&quot;))
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        Advancement advancement = (Advancement) args[1];
        
        //Award all criteria for the advancement
        AdvancementProgress progress = target.getAdvancementProgress(advancement);
        for(String criteria : advancement.getCriteria()) {
            progress.awardCriteria(criteria);
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#biome-arguments" id="biome-arguments">Biome arguments</a></h1>
<p><img src="./images/arguments/biome.png" alt="" /></p>
<p>In Minecraft 1.16, they added the ability to refer to in-game biomes. The CommandAPI implements this using the <code>BiomeArgument</code>. As expected, this returns Bukkit's <code>Biome</code> enum when used.</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The <code>BiomeArgument</code> is only supported in Minecraft versions 1.16 and later. Attempting to use the <code>BiomeArgument</code> on an incompatible version of Minecraft will throw a <code>BiomeArgumentException</code>.</p>
</div>
<div class="example">
<h3><a class="header" href="#example---setting-the-biome-of-a-chunk" id="example---setting-the-biome-of-a-chunk">Example - Setting the biome of a chunk</a></h3>
<p>Say you want to set the biome of the current chunk that a player is in. We can do this using the <code>World.setBiome(x, y, z, biome)</code> method for a given world. We will use this command structure to set the biome of our current chunk:</p>
<pre><code>/setbiome &lt;biome&gt;
</code></pre>
<p>And we can set the biome of the current chunk as expected:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;setbiome&quot;)
	.withArguments(new BiomeArgument(&quot;biome&quot;))
	.executesPlayer((player, args) -&gt; {
		Biome biome = (Biome) args[0];

		Chunk chunk = player.getLocation().getChunk();
		player.getWorld().setBiome(chunk.getX(), player.getLocation().getBlockY(), chunk.getZ(), biome);
	})
	.register();
</code></pre>
</div><h1><a class="header" href="#blockstate-arguments" id="blockstate-arguments">BlockState arguments</a></h1>
<p><img src="./images/arguments/blockstate.png" alt="" /></p>
<p>The <code>BlockStateArgument</code> is used to represent data about blocks in the world. These refer to any blocks that have data or states, such as dispensers, signs, doors and pistons. The <code>BlockStateArgument</code> creates a Bukkit <code>BlockData</code> object when used.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Make sure to not confuse the cast type with <code>BlockState</code>. The naming of this argument refers to the internal Minecraft vanilla argument naming convention - <strong>this argument casts to <code>BlockData</code> and NOT <code>BlockState</code></strong>.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---setting-a-block" id="example---setting-a-block">Example - Setting a block</a></h3>
<p>Say we want a simple command to set the block that you're looking at. We'll use the following command structure:</p>
<pre><code>/set &lt;block&gt;
</code></pre>
<p>And then we can simply set our block using <code>setBlockData()</code>:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;set&quot;)
    .withArguments(new BlockStateArgument(&quot;block&quot;))
    .executesPlayer((player, args) -&gt; {
        BlockData blockdata = (BlockData) args[0];
        Block targetBlock = player.getTargetBlockExact(256);
        
        // Set the block, along with its data
        targetBlock.setType(blockdata.getMaterial());
        targetBlock.getState().setBlockData(blockdata);
    })
    .register();
</code></pre>
</div>
<h1><a class="header" href="#enchantment-argument" id="enchantment-argument">Enchantment argument</a></h1>
<p><img src="./images/arguments/enchantment.png" alt="" /></p>
<p>The <code>EnchantmentArgument</code> class lets users input a specific enchantment. As you would expect, the cast type is Bukkit's <code>Enchantment</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-an-enchantment-on-their-current-item" id="example---giving-a-player-an-enchantment-on-their-current-item">Example - Giving a player an enchantment on their current item</a></h3>
<p>Say we want to give a player an enchantment on the item that the player is currently holding. We will use the following command structure:</p>
<pre><code>/enchantitem &lt;enchantment&gt; &lt;level&gt;
</code></pre>
<p>Since most enchantment levels range between 1 and 5, we will also make use of the <code>IntegerArgument</code> to restrict the level of the enchantment by usng its range constructor.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;enchantitem&quot;)
    .withArguments(new EnchantmentArgument(&quot;enchantment&quot;))
    .withArguments(new IntegerArgument(&quot;level&quot;, 1, 5))
    .executesPlayer((player, args) -&gt; {
        Enchantment enchantment = (Enchantment) args[0];
        int level = (int) args[1];
        
        //Add the enchantment
        player.getInventory().getItemInMainHand().addEnchantment(enchantment, level);
    })
    .register();
</code></pre>
</div>
<h1><a class="header" href="#environment-arguments" id="environment-arguments">Environment arguments</a></h1>
<p><img src="./images/arguments/environment.png" alt="" /></p>
<p>The <code>EnvironmentArgument</code> class allows a command sender to refer to a specific world environment, declared in Bukkit's <code>World.Environment</code> class. This includes the following three environments: <code>NORMAL</code>, <code>NETHER</code> and <code>THE_END</code>.</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The <code>EnvironmentArgument</code> is only supported in Minecraft versions 1.13.1 and later, meaning it <em>will not work</em> on Minecraft 1.13. This is due to fact that Minecraft added the environment argument in 1.13.1. Attempting to use the <code>EnvironmentArgument</code> on Minecraft 1.13 will throw an <code>EnvironmentArgumentException</code>.</p>
</div>
<div class="example">
<h3><a class="header" href="#example---creating-a-new-world" id="example---creating-a-new-world">Example - Creating a new world</a></h3>
<p>Say we want to create a new world on our Minecraft server. To do this, we need to know the name of the world, and the type (i.e. overworld, nether or the end). As such, we want to create a command with the following structure:</p>
<pre><code>/createworld &lt;worldname&gt; &lt;type&gt;
</code></pre>
<p>Using the world name and the environment of the world, we can use Bukkit's <code>WorldCreator</code> to create a new world that matches our provided specifications:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;createworld&quot;)
    .withArguments(new StringArgument(&quot;worldname&quot;))
    .withArguments(new EnvironmentArgument(&quot;type&quot;))
    .executes((sender, args) -&gt; {
        String worldName = (String) args[0];
        Environment environment = (Environment) args[1];

        // Create a new world with the specific world name and environment
        Bukkit.getServer().createWorld(new WorldCreator(worldName).environment(environment));
        sender.sendMessage(&quot;World created!&quot;);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#itemstack-arguments" id="itemstack-arguments">Itemstack arguments</a></h1>
<p><img src="./images/arguments/itemstack.png" alt="" /></p>
<p>The <code>ItemStackArgument</code> class represents in-game items. As expected, this should be casted to Bukkit's <code>ItemStack</code> object.</p>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-an-itemstack" id="example---giving-a-player-an-itemstack">Example - Giving a player an itemstack</a></h3>
<p>Say we want to create a command that gives you items. For this command, we will use the following structure:</p>
<pre><code>/item &lt;itemstack&gt;
</code></pre>
<p>With this structure, we can easily create our command:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;item&quot;)
    .withArguments(new ItemStackArgument(&quot;itemstack&quot;))
    .executesPlayer((player, args) -&gt; {
        player.getInventory().addItem((ItemStack) args[0]);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#loottable-argument" id="loottable-argument">LootTable argument</a></h1>
<p><img src="./images/arguments/loottable.png" alt="" /></p>
<p>The <code>LootTableArgument</code> class can be used to get a Bukkit <code>LootTable</code> object.</p>
<div class="example">
<h3><a class="header" href="#example---filling-a-chest-with-loot-table-contents" id="example---filling-a-chest-with-loot-table-contents">Example - Filling a chest with loot table contents</a></h3>
<p>Say we wanted to write a command that populates a chest with some loot table contents. For this example, we'll use the following command:</p>
<pre><code>/giveloottable &lt;loottable&gt; &lt;location&gt;
</code></pre>
<p>We ensure that the location provided is a container (such as a chest or shulkerbox) and then update the contents of that container:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;giveloottable&quot;)
    .withArguments(new LootTableArgument(&quot;loottable&quot;))
    .withArguments(new LocationArgument(&quot;location&quot;, LocationType.BLOCK_POSITION))
    .executes((sender, args) -&gt; {
		LootTable lootTable = (LootTable) args[0];
		Location location = (Location) args[1];
		
		BlockState state = location.getBlock().getState();
		
		// Check if the input block is a container (e.g. chest)
		if(state instanceof Container &amp;&amp; state instanceof Lootable) {
			Container container = (Container) state;
			Lootable lootable = (Lootable) container;
			
			// Apply the loot table to the chest
			lootable.setLootTable(lootTable);
			container.update();
		}
	})
    .register();
</code></pre>
</div><h1><a class="header" href="#mathoperation-arguments" id="mathoperation-arguments">MathOperation arguments</a></h1>
<p><img src="./images/arguments/mathop.png" alt="" /></p>
<p>The CommandAPI's <code>MathOperationArgument</code> is used to represent the Minecraft scoreboard arithmetic operation to alter scoreboard scores. Since there is no default representation in the Bukkit API, the CommandAPI provides the <code>MathOperation</code> class to represent each operation:</p>
<table><thead><tr><th align="center">Symbol (in Minecraft)</th><th>MathOperation enum value</th></tr></thead><tbody>
<tr><td align="center">\(+=\)</td><td><code>MathOperation.ADD</code></td></tr>
<tr><td align="center">\(-=\)</td><td><code>MathOperation.SUBTRACT</code></td></tr>
<tr><td align="center">\(*=\)</td><td><code>MathOperation.MULTIPLY</code></td></tr>
<tr><td align="center">\(/=\)</td><td><code>MathOperation.DIVIDE</code></td></tr>
<tr><td align="center">\(\%=\)</td><td><code>MathOperation.MOD</code></td></tr>
<tr><td align="center">\(=\)</td><td><code>MathOperation.ASSIGN</code></td></tr>
<tr><td align="center">\(&lt;\)</td><td><code>MathOperation.MIN</code></td></tr>
<tr><td align="center">\(&gt;\)</td><td><code>MathOperation.MAX</code></td></tr>
<tr><td align="center">\(&gt;&lt;\)</td><td><code>MathOperation.SWAP</code></td></tr>
</tbody></table>
<hr />
<p>The <code>MathOperation</code> also has two methods:</p>
<pre><code class="language-java">public int apply(int val1, int val2);
public float apply(float val1, float val2);
</code></pre>
<p>These methods are used to provide a basic implementation of these math operations on a given input. Given the values <code>val1</code> and <code>val2</code>, these are the operation that the <code>apply(val1, val2)</code> method performs:</p>
<table><thead><tr><th>MathOperation enum value</th><th>Result</th></tr></thead><tbody>
<tr><td><code>MathOperation.ADD</code></td><td><code>val1 + val2</code></td></tr>
<tr><td><code>MathOperation.SUBTRACT</code></td><td><code>val1 - val2</code></td></tr>
<tr><td><code>MathOperation.MULTIPLY</code></td><td><code>val1 * val2</code></td></tr>
<tr><td><code>MathOperation.DIVIDE</code></td><td><code>val1 / val2</code></td></tr>
<tr><td><code>MathOperation.MOD</code></td><td><code>val1 % val2</code></td></tr>
<tr><td><code>MathOperation.ASSIGN</code></td><td><code>val2</code></td></tr>
<tr><td><code>MathOperation.MIN</code></td><td><code>Math.min(val1, val2)</code></td></tr>
<tr><td><code>MathOperation.MAX</code></td><td><code>Math.max(val1, val2)</code></td></tr>
<tr><td><code>MathOperation.SWAP</code></td><td><code>val2</code></td></tr>
</tbody></table>
<hr />
<div class="example">
<h3><a class="header" href="#example---changing-a-players-level" id="example---changing-a-players-level">Example - Changing a player's level</a></h3>
<p>Say we wanted to create a player's level. Typically, this is implemented in the following manner:</p>
<pre><code>/xp set &lt;player&gt; &lt;level&gt;
/xp add &lt;player&gt; &lt;levels&gt;
</code></pre>
<p>Using the <code>MathOperationArgument</code>, we can extend the functionality of adding and setting a player's level by allowing the user to choose what operation they desire. To do this, we'll use the following structure:</p>
<pre><code>/changelevel &lt;player&gt; &lt;operation&gt; &lt;value&gt;
</code></pre>
<p>As with any command, we declare our arguments, cast them properly and then we write our main code. In this example, we use the <code>apply(int, int)</code> method from our <code>MathOperation</code> to calculate the player's new level.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;changelevel&quot;)
    .withArguments(new PlayerArgument(&quot;player&quot;))
    .withArguments(new MathOperationArgument(&quot;operation&quot;))
    .withArguments(new IntegerArgument(&quot;value&quot;))
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        MathOperation op = (MathOperation) args[1];
        int value = (int) args[2];

        target.setLevel(op.apply(target.getLevel(), value));
    })
    .register();
</code></pre>
<hr />
<p>There are various applications for the <code>changelevel</code> command based on what the user inputs. For example:</p>
<ul>
<li>
<p>To set the player <em>Notch</em> to level 10:</p>
<pre><code>/changelevel Notch = 10
</code></pre>
</li>
<li>
<p>To double the player <em>Notch's</em> level:</p>
<pre><code>/changelevel Notch *= 2
</code></pre>
</li>
<li>
<p>To set the player <em>Notch</em>'s level to 20, or keep it as their current level if it is higher than 20:</p>
<pre><code>/changelevel Notch &gt; 20
</code></pre>
</li>
</ul>
</div><h1><a class="header" href="#particle-arguments" id="particle-arguments">Particle arguments</a></h1>
<p><img src="./images/arguments/particle.png" alt="" /></p>
<p>The <code>ParticleArgument</code> class represents Minecraft particles. As expected, this is casted to the Bukkit <code>Particle</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---show-particles-at-a-players-location" id="example---show-particles-at-a-players-location">Example - Show particles at a player's location</a></h3>
<p>Say we wanted to have a command that displayed particles at a player's location. We will use the following command structure:</p>
<pre><code>/showparticle &lt;particle&gt;
</code></pre>
<p>With this, we can simply spawn the particle using the <code>World.spawnParticle(Particle, Location, int)</code> method:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;showparticle&quot;)
    .withArguments(new ParticleArgument(&quot;particle&quot;))
    .executesPlayer((player, args) -&gt; {
        player.getWorld().spawnParticle((Particle) args[0], player.getLocation(), 1);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#potion-effect-arguments" id="potion-effect-arguments">Potion effect arguments</a></h1>
<p><img src="./images/arguments/potion.png" alt="" /></p>
<p>The <code>PotionEffectArgument</code> class represents Minecraft potion effects. When used, this argument is casted to Bukkit's <code>PotionEffectType</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-a-potion-effect" id="example---giving-a-player-a-potion-effect">Example - Giving a player a potion effect</a></h3>
<p>Say we wanted to have a command that gives a player a potion effect. For this command, we'll use the following structure:</p>
<pre><code>/potion &lt;target&gt; &lt;potion&gt; &lt;duration&gt; &lt;strength&gt;
</code></pre>
<p>In this example, we utilize some of the other arguments that we've described earlier, such as the <code>PlayerArgument</code> and <code>TimeArgument</code>. Since duration for the <code>PotionEffect</code> constructor is in ticks, this is perfectly fit for the <code>TimeArgument</code>, which is represented in ticks.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;potion&quot;)
    .withArguments(new PlayerArgument(&quot;target&quot;))
    .withArguments(new PotionEffectArgument(&quot;potion&quot;))
    .withArguments(new TimeArgument(&quot;duration&quot;))
    .withArguments(new IntegerArgument(&quot;strength&quot;))
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        PotionEffectType potion = (PotionEffectType) args[1];
        int duration = (int) args[2];
        int strength = (int) args[3];
        
        //Add the potion effect to the target player
        target.addPotionEffect(new PotionEffect(potion, duration, strength));
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#recipe-arguments" id="recipe-arguments">Recipe arguments</a></h1>
<p><img src="./images/arguments/recipe.png" alt="" /></p>
<p>The <code>RecipeArgument</code> class lets you retrieve Bukkit's <code>Recipe</code> object. Unlike the other arguments, <strong>this argument has a slightly different implementation for Minecraft 1.15+</strong>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In Minecraft 1.15 and onwards, Bukkit now has the <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/inventory/ComplexRecipe.html"><code>ComplexRecipe</code></a> class. This class is a subclass of the typical <code>Recipe</code> class, so casting still works when casting to <code>Recipe</code>. The only major difference is the <code>ComplexRecipe</code> class also inherits the <code>Keyed</code> interface, allowing you to access its <code>NamespacedKey</code>. This is used to grant the recipe to players. (This is shown in the second example below).</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-the-result-of-a-recipe" id="example---giving-a-player-the-result-of-a-recipe">Example - Giving a player the result of a recipe</a></h3>
<p>Say we want to give youself the result of a specific recipe. Since Bukkit's <code>Recipe</code> class contains the <code>getResult()</code> method, we will use that in our example. We want to create the following command:</p>
<pre><code>/giverecipe &lt;recipe&gt;
</code></pre>
<p>As such, we easily implement it by specifying the <code>RecipeArgument</code>, casting it and adding it to the player's inventory:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;giverecipe&quot;)
    .withArguments(new RecipeArgument(&quot;recipe&quot;))
    .executesPlayer((player, args) -&gt; {
        Recipe recipe = (Recipe) args[0];
    	player.getInventory().addItem(recipe.getResult());
    })
    .register();
</code></pre>
</div>
<div class="example">
<h3><a class="header" href="#example---unlocking-a-recipe-for-a-player-115-only" id="example---unlocking-a-recipe-for-a-player-115-only">Example - Unlocking a recipe for a player (1.15+ only)</a></h3>
<p>Since 1.15 has the <code>ComplexRecipe</code> class, we will take advantage of this to unlock a recipe for a player. For this command, we'll use the following structure:</p>
<pre><code>/unlockrecipe &lt;player&gt; &lt;recipe&gt;
</code></pre>
<p>Since the <code>discoverRecipe(NamespacedKey)</code> method for a player requires a <code>NamespacedKey</code>, we have to ensure that this recipe is of type <code>ComplexRecipe</code>. This is simply done by using <code>instanceof</code>. If this is the case, then we can unlock the recipe for the player. Otherwise, we cannot, so we fail gracefully using the <code>CommandAPI.fail(String)</code> method;</p>
<pre><code class="language-java">new CommandAPICommand(&quot;unlockrecipe&quot;)
    .withArguments(new PlayerArgument(&quot;player&quot;))
    .withArguments(new RecipeArgument(&quot;recipe&quot;))
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        Recipe recipe = (Recipe) args[1];
		
        //Check if we're running 1.15+
        if(recipe instanceof ComplexRecipe) {
            ComplexRecipe complexRecipe = (ComplexRecipe) recipe;
            target.discoverRecipe(complexRecipe.getKey());
        } else {
            //Error here, can't unlock recipe for player
            CommandAPI.fail(&quot;Cannot unlock recipe for player (Are you using version 1.15 or above?)&quot;);
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#sound-arguments" id="sound-arguments">Sound arguments</a></h1>
<p><img src="./images/arguments/sound.png" alt="" /></p>
<p>The <code>SoundArgument</code> class allows a command sender to retrieve the Bukkit <code>Sound</code> object to represent in-game sound effects (such as mob sounds or ambient sound effects), as well as in-game music.</p>
<div class="example">
<h3><a class="header" href="#example---playing-sound-to-yourself" id="example---playing-sound-to-yourself">Example - Playing sound to yourself</a></h3>
<p>Say we want a simple command that plays a specific sound at your location. To do this, we will make the following command:</p>
<pre><code>/sound &lt;sound&gt;
</code></pre>
<p>This command simply plays the provided sound to the current player:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;sound&quot;)
    .withArguments(new SoundArgument(&quot;sound&quot;))
    .executesPlayer((player, args) -&gt; {
        player.getWorld().playSound(player.getLocation(), (Sound) args[0], 100.0f, 1.0f);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#time-arguments" id="time-arguments">Time arguments</a></h1>
<p><img src="./images/arguments/time.png" alt="" /></p>
<p>The <code>TimeArgument</code> class represents in-game time, <em>in the number of in-game ticks</em>. This allows command senders to specify a certain number of ticks in a simpler way, by including the characters <code>d</code> to specify the numbers of days, <code>s</code> to specify the number of seconds or <code>t</code> to specify a number of ticks.</p>
<p>The CommandAPI converts the inputs provided by the command sender into a number of ticks as an integer.</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The <code>TimeArgument</code> is only supported in Minecraft versions 1.14 and later, meaning it <em>will not work</em> on Minecraft versions 1.13, 1.13.1 or 1.13.2. This is due to the fact that Minecraft added the time argument in 1.14. Attempting to use the <code>TimeArgument</code> on an incompatible version will throw a <code>TimeArgumentException</code>.</p>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The <code>TimeArgument</code> provides inputs such as <code>2d</code> (2 in-game days), <code>10s</code> (10 seconds) and <code>20t</code> (20 ticks), but does <strong>not</strong> let you combine them, such as <code>2d10s</code>.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---displaying-a-server-wide-announcement" id="example---displaying-a-server-wide-announcement">Example - Displaying a server-wide announcement</a></h3>
<p>Say we have a command <code>bigmsg</code> that displays a title message to all players for a certain duration:</p>
<pre><code>/bigmsg &lt;duration&gt; &lt;message&gt;
</code></pre>
<pre><code class="language-java">new CommandAPICommand(&quot;bigmsg&quot;)
    .withArguments(new TimeArgument(&quot;duration&quot;))
    .withArguments(new GreedyStringArgument(&quot;message&quot;))
    .executes((sender, args) -&gt; {
        //Duration in ticks
        int duration = (int) args[0];
        String message = (String) args[1];

        for(Player player : Bukkit.getOnlinePlayers()) {
            //Display the message to all players, with the default fade in/out times (10 and 20).
            player.sendTitle(message, &quot;&quot;, 10, duration, 20);
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#uuid-arguments" id="uuid-arguments">UUID arguments</a></h1>
<p>The UUID argument is used to uniquely identify players, entities and attribute modifiers. As a result, its cast type is Java's <code>UUID</code>.</p>
<div class="warning">
<p><strong>Note:</strong></p>
<p>The UUIDArgument is only compatible with Minecraft version 1.16 and above, since that is the version this argument was introduced. Attempting to use the UUID argument on a version lower than Minecraft 1.16 will throw a <code>UUIDArgumentException</code>.</p>
</div>
<h1><a class="header" href="#predicate-arguments" id="predicate-arguments">Predicate arguments</a></h1>
<h1><a class="header" href="#block-predicate-arguments" id="block-predicate-arguments">Block predicate arguments</a></h1>
<p>The <code>BlockPredicateArgument</code> is used to represent a &quot;test&quot; for Minecraft blocks. This can consist of tags, such as the ones listed <a href="https://minecraft.gamepedia.com/Tag#Blocks">here on the MinecraftWiki</a>, or individual blocks. If a block matches the tag or block, then the predicate is satisfied.</p>
<p>For example, if we were to use the predicate <code>#leaves</code>, then the following blocks will be satisfied by that predicate: <code>jungle_leaves</code>, <code>oak_leaves</code>, <code>spruce_leaves</code>, <code>dark_oak_leaves</code>, <code>acacia_leaves</code>, <code>birch_leaves</code>.</p>
<p>When used, this argument must be casted to a <code>Predicate&lt;Block&gt;</code>. As with other similar arguments with parameterized types, you can ignore Java's unchecked cast type safety warning.</p>
<div class="example">
<h3><a class="header" href="#example---replacing-specific-blocks-in-a-radius" id="example---replacing-specific-blocks-in-a-radius">Example - Replacing specific blocks in a radius</a></h3>
<p>Say you want to replace blocks in a given radius. To do this, we'll use the following command structure:</p>
<pre><code>/replace &lt;radius&gt; &lt;fromBlock&gt; &lt;toBlock&gt;
</code></pre>
<p>Of course, we could simply use a <code>BlockStateArgument</code> or even an <code>ItemStackArgument</code> as our <code>&lt;fromBlock&gt;</code> in order to get the material to replace, but the block predicate argument provides a test for a given block, which if satisfied, allows certain code to be executed. </p>
<p>First, we declare our arguments. We want to use the <code>BlockPredicateArgument</code> since it also allows us to use Minecraft tags to identify blocks, as well as individual blocks. We then use <code>BlockStateArgument</code> to set the block to a given type. The <code>BlockStateArgument</code> also allows the user to provide any block data (e.g. contents of a chest or a stair's orientation).</p>
<pre><code class="language-java">Argument[] arguments = new Argument[] {
	new IntegerArgument(&quot;radius&quot;),
	new BlockPredicateArgument(&quot;fromBlock&quot;),
	new BlockStateArgument(&quot;toBlock&quot;),
};
</code></pre>
<p>We then register our <code>/replace</code> command. First, we parse the arguments making sure to cast to <code>Predicate&lt;Block&gt;</code> and <code>BlockData</code> (and not <code>BlockState</code>). After that, we use a few simple for loops to find the blocks within a radius sphere from the player.</p>
<p>In our most nested loop, we can then check if the block meets the requirements of our predicate. This is simply performed using <code>predicate.test(block)</code>, and if satisfied, we can set the block's type.</p>
<p>Lastly, we register our command as normal using the <code>register()</code> method.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;replace&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
	    
	    // Parse the arguments
	    int radius = (int) args[0];
	    @SuppressWarnings(&quot;unchecked&quot;)
	    Predicate&lt;Block&gt; predicate = (Predicate&lt;Block&gt;) args[1];
	    BlockData blockData = (BlockData) args[2];
	    
	    // Find a (solid) sphere of blocks around the player with a given radius
	    Location center = player.getLocation();
	    for (int Y = -radius; Y &lt; radius; Y++) {
	        for (int X = -radius; X &lt; radius; X++) {
	            for (int Z = -radius; Z &lt; radius; Z++) {
	                if (Math.sqrt((X * X) + (Y * Y) + (Z * Z)) &lt;= radius) {
	                    Block block = center.getWorld().getBlockAt(X + center.getBlockX(), Y + center.getBlockY(), Z + center.getBlockZ());
	                    
	                    // If that block matches a block from the predicate, set it
	                    if(predicate.test(block)) {
	                        block.setType(blockData.getMaterial());
	                        block.setBlockData(blockData);
	                    }
	                }
	            }
	        }
	    }
	    return;
	})
	.register();
</code></pre>
</div>
<h1><a class="header" href="#itemstack-predicate-arguments" id="itemstack-predicate-arguments">ItemStack predicate arguments</a></h1>
<p>Similar to the <code>BlockPredicateArgument</code>, the <code>ItemStackPredicateArgument</code> is a way of performing predicate checks on <code>ItemStack</code> objects. These can represent tags, such as the ones declared <a href="https://minecraft.gamepedia.com/Tag#Items">here on the MinecraftWiki</a>, or individual items. The cast type for this argument is <code>Predicate&lt;ItemStack&gt;</code>.</p>
<div class="example">
<h3><a class="header" href="#example---removing-items-in-inventories-based-on-predicates" id="example---removing-items-in-inventories-based-on-predicates">Example - Removing items in inventories based on predicates</a></h3>
<p>Say we wanted to remove items in your inventory <em>(I know, the <code>/clear</code> command does this, but this is the only example I could come up with)</em>. To do this, we'll use the following command structure:</p>
<pre><code>/rem &lt;item&gt;
</code></pre>
<p>We implement this with a simple for loop over the player's inventory and remove items that satisfy the predicate.</p>
<pre><code class="language-java">// Register our command
new CommandAPICommand(&quot;rem&quot;)
	.withArguments(new ItemStackPredicateArgument(&quot;items&quot;))
	.executesPlayer((player, args) -&gt; {
	    
	    // Get our predicate
		@SuppressWarnings(&quot;unchecked&quot;)
	    Predicate&lt;ItemStack&gt; predicate = (Predicate&lt;ItemStack&gt;) args[0];
	    
	    for(ItemStack item : player.getInventory()) {
	        if(predicate.test(item)) {
	            player.getInventory().remove(item);
	        }
	    }
	})
	.register();
</code></pre>
</div>
<h1><a class="header" href="#nbt-arguments" id="nbt-arguments">NBT arguments</a></h1>
<p>The CommandAPI includes support for NBT compounds by using the <a href="https://www.spigotmc.org/resources/nbt-api.7939/">NBT API by tr7zw</a>. To use NBT, use the <code>NBTCompoundArgument</code> and simply cast the argument to an <code>NBTContainer</code>.</p>
<p>Since this argument depends on the NBT API, if this is used and the NBT API is not available on the server, an <code>NBTAPINotFoundException</code> will be thrown.</p>
<div class="example">
<h3><a class="header" href="#example---" id="example---">Example - ???</a></h3>
<pre><code class="language-java">new CommandAPICommand(&quot;award&quot;)
    .withArguments(new NBTCompoundArgument(&quot;nbt&quot;))
    .executes((sender, args) -&gt; {
        NBTContainer nbt = (NBTContainer) args[0];
        
        //Do something with &quot;nbt&quot; here...
    })
    .register();
</code></pre>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>I haven't personally explored much with using this argument, so this example isn't great. If you believe you can supply a suitable example for this page, feel free to send an example <a href="https://github.com/JorelAli/CommandAPI/issues/new/choose">on the CommandAPI issues page</a>.</p>
</blockquote>
<h1><a class="header" href="#literal-arguments-1" id="literal-arguments-1">Literal arguments</a></h1>
<h1><a class="header" href="#literal-arguments-2" id="literal-arguments-2">Literal arguments</a></h1>
<p>Literal arguments are used to represent &quot;forced options&quot; for a command. For instance, take Minecraft's <code>/gamemode</code> command. The syntax consists of the following:</p>
<pre><code>/gamemode &lt;mode&gt; [player]
</code></pre>
<p>It consists of a gamemode, followed by an optional player argument. The list of gamemodes are as follows:</p>
<pre><code>/gamemode survival 
/gamemode creative
/gamemode adventure
/gamemode spectator
</code></pre>
<p>Unlike regular commands (as those implemented by Bukkit for example), these four options are &quot;hardcoded&quot; - they're not &quot;suggestions&quot;. The user can <em>only</em> enter one of these four examples, no other values are allowed.</p>
<div class="warning">
<p><strong>Developer's Note:</strong></p>
<p>There is a simpler alternative to the <code>LiteralArgument</code> class! Instead of having to deal with arguments not being present in the array of arguments, consider using the much more intuitive <code>MultiLiteralArgument</code>, which is described in more detail <a href="./multilitargs.html">here</a>!</p>
</div>
<hr />
<h2><a class="header" href="#literal-arguments-vs-regular-arguments" id="literal-arguments-vs-regular-arguments">Literal arguments vs regular arguments</a></h2>
<p>Unlike regular arguments that are shown in this chapter, the literal argument is <em>technically</em> not an argument. Due to this fact, literal arguments are <a href="./listed.html">unlisted</a> by default. In other words, <strong>the literal argument is not present in the <code>args[]</code> for the command declaration.</strong></p>
<div class="example">
<h3><a class="header" href="#example---literal-arguments-and-regular-arguments" id="example---literal-arguments-and-regular-arguments">Example - Literal arguments and regular arguments</a></h3>
<p>To illustrate the behavior of literal arguments, we create a command of the following form:</p>
<pre><code>/mycommand &lt;literal&gt; &lt;text&gt;
</code></pre>
<p>As an example, let's declare the literal &quot;hello&quot; as a valid literal for this command. When we retrieve the result from <code>args[0]</code>, it returns the value of the <code>TextArgument</code>, as opposed to the literal &quot;hello&quot;:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;mycommand&quot;)
    .withArguments(new LiteralArgument(&quot;hello&quot;))
    .withArguments(new TextArgument(&quot;text&quot;))
    .executes((sender, args) -&gt; {
        // This gives the variable &quot;text&quot; the contents of the TextArgument, and not the literal &quot;hello&quot;
        String text = (String) args[0];
    })
    .register();
</code></pre>
<p>If I were to run the following command:</p>
<pre><code>/mycommand hello goodbye
</code></pre>
<p>The value of <code>text</code> in the code above would be &quot;goodbye&quot;.</p>
</div>
<div class="example">
<h3><a class="header" href="#example---gamemode-command-using-literal-arguments" id="example---gamemode-command-using-literal-arguments">Example - Gamemode command using literal arguments</a></h3>
<p>This is a demonstration of how you could create a command similar to Minecraft's <code>/gamemode</code> command by using literal arguments. To do this, we are effectively registering 4 separate commands, each called <code>/gamemode</code>, but with different literal arguments.</p>
<pre><code class="language-java">//Create a map of gamemode names to their respective objects
HashMap&lt;String, GameMode&gt; gamemodes = new HashMap&lt;&gt;();
gamemodes.put(&quot;adventure&quot;, GameMode.ADVENTURE);
gamemodes.put(&quot;creative&quot;, GameMode.CREATIVE);
gamemodes.put(&quot;spectator&quot;, GameMode.SPECTATOR);
gamemodes.put(&quot;survival&quot;, GameMode.SURVIVAL);

//Iterate over the map
for(String key : gamemodes.keySet()) {
    
    //Register the command as usual
    new CommandAPICommand(&quot;changegamemode&quot;)
        .withArguments(new LiteralArgument(key))
        .executesPlayer((player, args) -&gt; {
            //Retrieve the object from the map via the key and NOT the args[]
            player.setGameMode(gamemodes.get(key));
        })
        .register();
}	
</code></pre>
<p>Note how, since we don't have access to the literal from <code>args</code>, we must access the provided gamemode from elsewhere.</p>
</div>
<hr />
<h2><a class="header" href="#literal-argument-warnings" id="literal-argument-warnings">Literal argument warnings</a></h2>
<p>Literal arguments require a string in the constructor. If the literal is an empty String or is null, the CommandAPI will throw a <code>BadLiteralException</code>.</p>
<p>Because literal arguments are <em>&quot;hardcoded&quot;</em>, each literal is effectively mapped to a single command. This is shown when using the configuration option <code>create-dispatcher-json: true</code> which shows the JSON result of registered commands. For instance, take the <code>/defaultgamemode</code> command:</p>
<pre><code class="language-json">&quot;defaultgamemode&quot;: {
    &quot;type&quot;: &quot;literal&quot;,
    &quot;children&quot;: {
        &quot;adventure&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;creative&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;spectator&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;survival&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        }
    }
},
</code></pre>
<p>Each option produces a new &quot;command&quot; in the tree of commands. This means that having exceptionally large lists of literals, or nested literals (e.g. <code>/command &lt;literal1&gt; &lt;literal2&gt;</code>) can cause very large trees which cannot be sent to the clients <em>(it can cause clients to crash)</em>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Take care when using literal arguments. If your list of arguments is exceptionally large, or contains many nested arguments, the server may be unable to send the command information to the client. If many command argument choices are required, consider using a <code>StringArgument</code> and using <code>.overrideSuggestions()</code> to create your own list of required arguments.</p>
</blockquote>
<h1><a class="header" href="#multi-literal-arguments" id="multi-literal-arguments">Multi literal arguments</a></h1>
<p>So far, we've described normal arguments and literal arguments. We've described the nuances with literal arguments and how they're not really &quot;arguments&quot;, so they don't appear in the <code>args[]</code> for commands.</p>
<p>Now forget all of that. Multi literal arguments are the same as literal arguments but they <em>do</em> appear in the <code>args[]</code> for commands (i.e. they are <a href="./listed.html">listed</a>). Multi literal arguments are just a way better alternative to literal arguments. The multi literal argument constructor allows you to provide a <code>String[]</code> of possible values which you can use for your command declaration.</p>
<p>The multi literal argument has all of the same benefits of a regular literal argument - they are hardcoded options that the user must enter - they don't allow other values.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The only reason that <code>LiteralArgument</code> still exists is for legacy purposes. <code>MultiLiteralArgument</code> is much more recommended because it's easier to understand and implement. The <code>LiteralArgument</code> has a very slight performance improvement over the <code>MultiLiteralArgument</code>, but it's basically unnoticeable.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---using-multi-literals-to-make-the-gamemode-command" id="example---using-multi-literals-to-make-the-gamemode-command">Example - Using multi literals to make the gamemode command</a></h3>
<p>In this example, we'll show how to use multi literals to declare Minecraft's <code>/gamemode</code> command. As you can see from the example code below, the argument declaration and command declaration is the same as if you were declaring any normal argument or command.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;gamemode&quot;)
    .withArguments(new MultiLiteralArgument(&quot;adventure&quot;, &quot;creative&quot;, &quot;spectator&quot;, &quot;survival&quot;))
    .executesPlayer((player, args) -&gt; {
        // The literal string that the player enters IS available in the args[]
        switch((String) args[0]) {
            case &quot;adventure&quot;:
                player.setGameMode(GameMode.ADVENTURE);
                break;
            case &quot;creative&quot;:
                player.setGameMode(GameMode.CREATIVE);
                break;
            case &quot;spectator&quot;:
                player.setGameMode(GameMode.SPECTATOR);
                break;
            case &quot;survival&quot;:
                player.setGameMode(GameMode.SURVIVAL);
                break;
        }
    }) 
    .register();
</code></pre>
</div>
<h1><a class="header" href="#custom-arguments" id="custom-arguments">Custom arguments</a></h1>
<p>Custom arguments are arguably the most powerful argument that the CommandAPI offers. This argument is used to represent any String, or Minecraft key <em>(Something of the form <code>String:String</code>, such as <code>minecraft:diamond</code>)</em>. They basically represent <code>StringArgument</code> with overrideable suggestions and a built-in parser for any object of your choice. They are designed to be used for multiple commands - you define the argument once and can use it wherever you want when declaring commands.</p>
<hr />
<p>The <code>CustomArgument&lt;T&gt;</code> has two constructors, declared as follows:</p>
<pre><code class="language-java">public CustomArgument(String nodeName, CustomArgumentFunction&lt;T&gt; parser);
public CustomArgument(String nodeName, CustomArgumentFunction&lt;T&gt; parser, boolean keyed);
</code></pre>
<p>The second argument is the <code>CustomArgumentFunction</code>, which is a lambda that takes in a String and returns some custom object of type <code>T</code>. The first constructor will construct a <code>CustomArgument</code> which uses the <code>StringArgument</code> as a base (thus, only simple strings). The second argument has the field <code>keyed</code>. When this field is set to <code>true</code>, the <code>CustomArgument</code> will use a <code>Minecraft key</code> as a base, allowing you to use Minecraft keys as input.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>I may have complicated this too much, so let me clarify what I mean. The <code>CustomArgument</code> constructor is of the following forms:</p>
<pre><code class="language-java">CustomArgument(nodeName, (String) -&gt; { ... return T; });
CustomArgument(nodeName, (String) -&gt; { ... return T; }, boolean keyed);
</code></pre>
<p>Both constructors take in a <strong>String</strong> as input and return <code>T</code>. When enabling <code>keyed</code>, it allows the input to be of the form of a Minecraft key, but doesn't change the input type.</p>
</blockquote>
<p>The custom argument requires the type of the target object that the custom argument will return when parsing the arguments for a command. For instance, if you have a <code>CustomArgument&lt;Player&gt;</code>, then when parsing the arguments for the command, you would cast it to a <code>Player</code> object.</p>
<div class="example">
<h3><a class="header" href="#example---world-argument" id="example---world-argument">Example - World argument</a></h3>
<p>Say we want to create an argument to represents the list of available worlds on the server. We basically want to have an argument which always returns a Bukkit <code>World</code> object as the result. Here, we create a method <code>worldArgument()</code> that returns our custom argument that returns a <code>World</code>. First, we retrieve our <code>String[]</code> of world names to be used for our suggestions. We then write our custom argument that creates a <code>World</code> object from the input (in this case, we simply convert the String to a <code>World</code> using <code>Bukkit.getWorld(String)</code>). We perform error handling before returning our result:</p>
<pre><code class="language-java">//Function that returns our custom argument
public Argument worldArgument(String nodeName) {
	
	//Construct our CustomArgument that takes in a String input and returns a World object
	return new CustomArgument&lt;World&gt;(nodeName, (input) -&gt; {
	    //Parse the world from our input
	    World world = Bukkit.getWorld(input);
	
	    if(world == null) {
	        throw new CustomArgumentException(new MessageBuilder(&quot;Unknown world: &quot;).appendArgInput());
	    } else {
	        return world;
	    }
	}).overrideSuggestions(sender -&gt; {
		//List of worlds on the server, as Strings. We use overrideSuggestions(sender -&gt; ...)
		//since this evaluates the list of worlds when the player types the command as opposed
		//to when the plugin starts up
		return Bukkit.getWorlds().stream().map(World::getName).toArray(String[]::new);
	});
}
</code></pre>
<p>In our error handling step, we check if the world is equal to null (since the <code>Bukkit.getWorld(String)</code> is <code>@Nullable</code>). To handle this case, we throw a <code>CustomArgumentException</code> with an error from a <code>MessageBuilder</code>. The <code>CustomArgumentException</code> has two constructors, so a message builder isn't required each time:</p>
<pre><code class="language-java">new CustomArgumentException(String message);
new CustomArgumentException(MessageBuilder message);
</code></pre>
<hr />
<p>We can use our custom argument like any other argument. Say we wanted to write a command to teleport to a specific world. We will create a command of the following structure:</p>
<pre><code>/tpworld &lt;world&gt;
</code></pre>
<p>Since we have defined the method <code>worldArgument()</code> which automatically generates our argument, we can use it as follows:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;tpworld&quot;)
    .withArguments(worldArgument(&quot;world&quot;))
    .executesPlayer((player, args) -&gt; {
        player.teleport(((World) args[0]).getSpawnLocation());
    })
    .register();
</code></pre>
<hr />
<p>By using a <code>CustomArgument</code> (as opposed to a simple <code>StringArgument</code> and overriding its suggestions), we are able to provide a much more powerful form of error handling (automatically handled inside the argument), and we can reuse this argument for other commands.</p>
</div>
<hr />
<h2><a class="header" href="#message-builders" id="message-builders">Message Builders</a></h2>
<p>The <code>MessageBuilder</code> class is a class to easily create messages to describe errors when a sender sends a command which does not meet the expected syntax for an argument. It acts in a similar way to a <code>StringBuilder</code>, where you can append content to the end of a String.</p>
<p>The following methods are as follows:</p>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody>
<tr><td><code>appendArgInput()</code></td><td>Appends the argument that failed that the sender submitted to the end of the builder. E.g. <code>/foo bar</code> will append <code>bar</code></td></tr>
<tr><td><code>appendFullInput()</code></td><td>Appends the full command that a sender submitted to the end of the builder. E.g. <code>/foo bar</code> will append <code>foo bar</code></td></tr>
<tr><td><code>appendHere()</code></td><td>Appends the text <code>&lt;--[HERE]</code> to the end of the builder</td></tr>
<tr><td><code>append(Object)</code></td><td>Appends an object to the end of the builder</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---message-builder-for-invalid-objective-argument" id="example---message-builder-for-invalid-objective-argument">Example - Message builder for invalid objective argument</a></h3>
<p>To create a <code>MessageBuilder</code>, simply call its constructor and use whatever methods as you see fit. Unlike a <code>StringBuilder</code>, you don't have to &quot;build&quot; it when you're done - the CommandAPI does that automatically:</p>
<pre><code class="language-java">new MessageBuilder(&quot;Unknown world: /&quot;).appendFullInput().appendHere();
</code></pre>
</div><h1><a class="header" href="#functions" id="functions">Functions</a></h1>
<p>The CommandAPI has support to use Minecraft's <a href="https://minecraft.gamepedia.com/Function_(Java_Edtion)">functions</a> within your plugins. This is handled by using a class provided by the CommandAPI called <code>FunctionWrapper</code>, which allows you to execute functions. The CommandAPI also provides support to let you run your own commands within Minecraft function files.</p>
<hr />
<h2><a class="header" href="#functions-in-116" id="functions-in-116">Functions in 1.16+</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Minecraft 1.16+ change the way that datapacks are loaded on the server, so that they load before plugins are enabled. This means that non-vanilla commands that are declared in functions and tags will be detected as invalid, causing the server to throw a lot of errors at the very start.</p>
<p>The CommandAPI reloads datapacks once the server has finished loading using all declared commands, therefore <strong>the error messages at the start of the server can be ignored</strong>.</p>
</blockquote>
<hr />
<h2><a class="header" href="#using-custom-commands-in-functions" id="using-custom-commands-in-functions">Using custom commands in functions</a></h2>
<p>In order to use a command from your plugin in a <code>.mcfunction</code> file, you must register your command in your plugin's <code>onLoad()</code> method, instead of the <code>onEnable()</code> method. Failure to do so will not allow the command to be registered for Minecraft functions, causing the function file to fail to load during the server startup phase.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In short, if you want to register a command which can be used in Minecraft functions, register it in your plugin's <code>onLoad()</code> method.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---registering-command-for-use-in-a-function" id="example---registering-command-for-use-in-a-function">Example - Registering command for use in a function</a></h3>
<p>Say we have a command <code>/killall</code> that simply kills all entities in all worlds on the server. If we were to register this in our <code>onLoad()</code> method, this would allow us to use the <code>/killall</code> command in Minecraft functions and tags.</p>
<pre><code class="language-java">public class Main extends JavaPlugin {

    @Override
    public void onLoad() {
        //Commands which will be used in Minecraft functions are registered here

        new CommandAPICommand(&quot;killall&quot;)
            .executes((sender, args) -&gt; {
                //Kills all enemies in all worlds
                Bukkit.getWorlds().forEach(w -&gt; w.getLivingEntities().forEach(e -&gt; e.setHealth(0)));
        	})
            .register();
    }
    
    @Override
    public void onEnable() {
        //Register all other commands here
    } 
}
</code></pre>
</div><h1><a class="header" href="#setting-up-functions--tags" id="setting-up-functions--tags">Setting up functions &amp; tags</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Most developers can completely skip this section. This is for those that are unfamiliar with functions and tags and is less about how the CommandAPI works.</p>
</blockquote>
<p>This section explains how functions are declared and set up for use in a Minecraft server. This is ideal for server owners who've never set up functions, or developers <em>(like the Command API's creator)</em> that has no idea how to set this sort of thing up.</p>
<hr />
<h2><a class="header" href="#creating-functions" id="creating-functions">Creating functions</a></h2>
<p>Functions are text files <em>(with the <code>.mcfunction</code> extension)</em> which contains lists of functions which are executed one after another. Each line of the file is a valid Minecraft command. Say we have <code>text.mcfunction</code>:</p>
<pre><code>killall
say Killed all living entities on the server
</code></pre>
<p>This will run the custom command killall <em>(as declared in <strong>Chapter 6 - Functions &amp; Tags</strong>)</em>, and then broadcast a message to all players stating that all entities were killed.</p>
<hr />
<h2><a class="header" href="#creating-tags" id="creating-tags">Creating tags</a></h2>
<p>Tags are json files which contain a list of functions. Tags let you run multiple functions at a time. Say we have a tag called <code>mytag.json</code>:</p>
<pre><code class="language-json">{
    &quot;values&quot;: [
    	&quot;mycustomnamespace:test&quot;,
    	&quot;mycustomnamespace:test2&quot;
    ]
}
</code></pre>
<p>This will run the function <code>test</code> and the function <code>test2</code>, which are in the namespace <code>mycustomnamespace</code>.</p>
<hr />
<h2><a class="header" href="#namespaces--where-to-place-everything" id="namespaces--where-to-place-everything">Namespaces &amp; where to place everything</a></h2>
<p>The following hierarchy explains where functions and tags go. In this diagram, the two functions <code>test</code> and <code>test2</code> are in a directory called <code>functions</code>. There is also a tag called <code>mytag</code> which is placed in the <code>tags</code> directory under <code>functions</code>. These are all under the <em>namespace</em> called <code>mycustomnamespace</code></p>
<pre><code>server/
├── world/
│   ├── advancements/
│   ├── data/
│   ├── datapacks/
│   │   └── bukkit/
│   │       ├── pack.mcmeta
│   │       └── data/
│   │           └── mycustomnamespace/
│   │               ├── functions/
│   │               │   ├── test.mcfunction
│   │               │   └── test2.mcfunction
│   │               └── tags/
│   │                   └── functions/
│   │                       └── mytag.json
│   └── ...
├── world_nether/
├── world_the_end/
├── ...
└── spigot.jar
</code></pre>
<p>To execute the <code>test</code> function, you would run the following command:</p>
<pre><code>/function mycustomnamespace:test
</code></pre>
<p>To execute the <code>mytag</code> tag, you would run the following command:</p>
<pre><code>/function #mycustomnamespace:mytag
</code></pre>
<h1><a class="header" href="#the-simplefunctionwrapper-class" id="the-simplefunctionwrapper-class">The SimpleFunctionWrapper class</a></h1>
<p>To represent Minecraft functions and tags, the CommandAPI uses the <code>SimpleFunctionWrapper</code> class. Simply put, this class represents <em>one</em> Minecraft function, which are defined in <code>.mcfunction</code> files.</p>
<blockquote>
<p><strong>Developer's Note</strong></p>
<p>The <code>SimpleFunctionWrapper</code> class only represents on Minecraft function. As a result, to represent a Minecraft &quot;tag&quot;, which is a collection of Minecraft functions, the CommandAPI simply uses a <code>SimpleFunctionWrapper[]</code>.</p>
</blockquote>
<h2><a class="header" href="#simplefunctionwrapper-methods" id="simplefunctionwrapper-methods">SimpleFunctionWrapper methods</a></h2>
<p>The <code>SimpleFunctionWrapper</code> class has the following methods:</p>
<pre><code class="language-java">class SimpleFunctionWrapper implements Keyed {
    
    // Methods that creates SimpleFunctionWrapper instances
    static SimpleFunctionWrapper getFunction(NamespacedKey key);
    static SimpleFunctionWrapper[] getTag(NamespacedKey key);

    // Methods that query the Minecraft server
    static Set&lt;NamespacedKey&gt; getFunctions();
    static Set&lt;NamespacedKey&gt; getTags();
    
    // Methods for using the SimpleFunctionWrapper
    int run(CommandSender sender);
    
    // Utility functions
    String[] getCommands();
    NamespacedKey getKey();
}
</code></pre>
<h3><a class="header" href="#gettagnamespacedkey-and-getfunctionnamespacedkey" id="gettagnamespacedkey-and-getfunctionnamespacedkey">getTag(NamespacedKey) and getFunction(NamespacedKey)</a></h3>
<p>The <code>getFunction(NamespacedKey)</code> function is used to get a function that has been declared in a datapack and is loaded on the server.</p>
<p>The <code>getTag(NamespacedKey)</code> function is used to get a Tag that has been declared in a datapack and is loaded on the server. This returns a <code>SimpleFunctionWrapper[]</code>, since a tag is simply an ordered collection of functions. When using this method, the <code>#</code> symbol which is typically used at the start of the tag's name <em>is not needed</em>.</p>
<h3><a class="header" href="#getfunctions-and-gettags" id="getfunctions-and-gettags">getFunctions() and getTags()</a></h3>
<p>The methods <code>getFunctions()</code> and <code>getTags()</code> simply return a set of <code>NamespacedKey</code> objects which are the names of functions or tags that have been declared by all datapacks on the server.</p>
<h3><a class="header" href="#runcommandsender" id="runcommandsender">run(CommandSender)</a></h3>
<p>This method simply runs the current <code>SimpleFunctionWrapper</code> as the provided command sender. The method will return a numerical result value, stating whether it succeeds or returns a result. This is documented in more detail <a href="./normalexecutors.html">here</a> and <a href="./resultingcommandexecutors.html">here</a>. For example:</p>
<h3><a class="header" href="#getcommands" id="getcommands">getCommands()</a></h3>
<p>The <code>getCommands()</code> method returns a <code>String[]</code> that contains the list of commands that the Minecraft function &quot;holds&quot;. In other words, running this Minecraft function is basically as simple as iterating through its commands and running them in order. The commands that this <code>String[]</code> holds are the raw strings that this function represents - in other words, it can include things such as <code>@p</code> and <code>~ ~ ~</code> instead of &quot;filled in&quot; values.</p>
<h1><a class="header" href="#the-functionwrapper" id="the-functionwrapper">The FunctionWrapper</a></h1>
<p>The CommandAPI includes the <code>FunctionWrapper</code> class which is a wrapper for Minecraft's functions. It allows you to execute the commands that are represented by the respective <code>.mcfunction</code> file.</p>
<p>The <code>FunctionWrapper</code> class is an extension of the <code>SimpleFunctionWrapper</code> class. It is basically a <code>SimpleFunctionWrapper</code>, which has been constructed from an existing command sender when a command is used. This basically means that the command sender has already been &quot;baked into&quot; the <code>FunctionWrapper</code> object, allowing you to run it without having to provide a command sender.</p>
<h2><a class="header" href="#functionwrapper-methods" id="functionwrapper-methods">FunctionWrapper methods</a></h2>
<p>The <code>FunctionWrapper</code> class has the following methods:</p>
<pre><code class="language-java">class FunctionWrapper extends SimpleFunctionWrapper {

    // Methods specific to this class
	int run();
	int runAs(Entity e);

    // Methods inherited from SimpleFunctionWrapper
    static SimpleFunctionWrapper getFunction(NamespacedKey key);
    static SimpleFunctionWrapper[] getTag(NamespacedKey key);
    static Set&lt;NamespacedKey&gt; getFunctions();
    static Set&lt;NamespacedKey&gt; getTags();
    int run(CommandSender sender);
    String[] getCommands();
    NamespacedKey getKey();
}
</code></pre>
<p>These methods allow you to interact with the Minecraft function that this class wraps.</p>
<h3><a class="header" href="#run" id="run"><code>run()</code></a></h3>
<p>The <code>run()</code> method basically does what it says on the tin - it runs the function. The command executor that runs this function is the command executor that was used to retrieve it. For example, if a player in-game populated this argument, then the player will be filled in for <code>@p</code> and the player's location would be used for things such as <code>~ ~ ~</code>:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;runfunc&quot;)
    .withArguments(new FunctionArgument(&quot;function&quot;))
	.executes((sender, args) -&gt; {
        FunctionWrapper[] functions = (FunctionWrapper[]) args[0];
        for(FunctionWrapper function : functions) {
            function.run(); // The command executor in this case is 'sender'
        }
    })
    .register();
</code></pre>
<h3><a class="header" href="#runasentity" id="runasentity"><code>runAs(Entity)</code></a></h3>
<p>The <code>runAs(Entity)</code> is basically the same as the <code>run()</code> method, but it allows you to change the command executor to another entity. </p>
<h1><a class="header" href="#function-arguments" id="function-arguments">Function arguments</a></h1>
<p><img src="./images/arguments/functions.png" alt="" /></p>
<p>The <code>FunctionArgument</code> class is used to represent a function or a tag in Minecraft. When retrieving an instance of the argument, it will return a <code>FunctionWrapper[]</code>, where each <code>FunctionWrapper</code> consists of a Minecraft function.</p>
<p>Therefore, if a user supplies a single function, the <code>FunctionWrapper[]</code> will be of size 1, and if the user supplies a tag which can consist of multiple functions, the <code>FunctionWrapper[]</code> will consist of the array of functions as declared by that tag.</p>
<div class="example">
<h3><a class="header" href="#example---minecrafts-function-command" id="example---minecrafts-function-command">Example - Minecraft's /function command</a></h3>
<p>Since it's a little difficult to demonstrate a custom use for the <code>FunctionArgument</code>, we will show how you can implement Vanilla Minecraft's <code>/function</code> command. In this example, we want a command that uses the following structure:</p>
<pre><code>/runfunction &lt;function&gt;
</code></pre>
<p>When provided with a function, it will execute that function. If instead a tag is provided, it will execute that tag (i.e. execute all functions declared in that tag).</p>
<pre><code class="language-java">new CommandAPICommand(&quot;runfunction&quot;)
    .withArguments(new FunctionArgument(&quot;function&quot;))
    .executes((sender, args) -&gt; {
        FunctionWrapper[] functions = (FunctionWrapper[]) args[0];

        //Run all functions in our FunctionWrapper[]
        for(FunctionWrapper function : functions) {
            function.run();
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#permissions" id="permissions">Permissions</a></h1>
<p>Permissions let you control which players are allowed to execute which commands. This is handled using the <code>CommandPermission</code> class, which has the following uses:</p>
<table><thead><tr><th>Permission</th><th>What it does</th></tr></thead><tbody>
<tr><td><code>CommandPermission.OP</code></td><td>Requires OP to execute the command</td></tr>
<tr><td><code>CommandPermission.NONE</code></td><td>Anyone can execute the command</td></tr>
<tr><td><code>CommandPermission.fromString(&quot;my.permission&quot;)</code></td><td>Requires a specific permission node to execute the command</td></tr>
</tbody></table>
<p>In addition to the <code>CommandPermission</code> class, there are two different ways to assign permissions (compared to the simple <code>CommandSender.hasPermission()</code> method that is provided by Bukkit), by using the <code>withPermission</code> method for arguments or for commands.</p>
<p>The <code>withPermission</code> method can take two values:</p>
<ul>
<li>A <code>CommandPermission</code>, which represents a permission such as <code>OP</code> or <code>NONE</code></li>
<li>A <code>String</code>, which will be converted automatically to a <code>CommandPermission</code> using <code>CommandPermission.fromString()</code></li>
</ul>
<hr />
<h2><a class="header" href="#adding-permissions-to-commands" id="adding-permissions-to-commands">Adding permissions to commands</a></h2>
<p>To add a permission to a command, you can use the <code>withPermission(CommandPermission)</code> or <code>withPermission(String)</code> method <em>when declaring a command</em>.</p>
<div class="example">
<h3><a class="header" href="#example---god-command-with-permissions" id="example---god-command-with-permissions">Example - /god command with permissions</a></h3>
<p>Say we created a command <code>/god</code> that sets a player as being invulnerable. Since this is a pretty non-survival command, we want to restrict who can run this command. As such, we want our player to have the permission <code>command.god</code> in order to run this command. To do this, we simply use the <code>withPermission(CommandPermission)</code> method from our command builder:</p>
<pre><code class="language-java">// Register the /god command with the permission node &quot;command.god&quot;
new CommandAPICommand(&quot;god&quot;)
    .withPermission(CommandPermission.fromString(&quot;command.god&quot;))
    .executesPlayer((player, args) -&gt; {
        player.setInvulnerable(true);
    })
    .register();
</code></pre>
<p>As stated above, it is possible to assign a permission using a String instead of using <code>CommandPermission.fromString()</code>:</p>
<pre><code class="language-java">//Register the /god command with the permission node &quot;command.god&quot;, without creating a CommandPermission
new CommandAPICommand(&quot;god&quot;)
    .withPermission(&quot;command.god&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setInvulnerable(true);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#adding-permissions-to-arguments" id="adding-permissions-to-arguments">Adding permissions to arguments</a></h2>
<p>For further fine-tuning of permission management, the CommandAPI allows you to add permissions to individual arguments. This prevents the user from executing a command <em>with a specific argument</em> if they do not have a specific permission.</p>
<p>This is done by using the <code>withPermission(CommandPermission)</code> method <em>at the end of an argument</em>.</p>
<p>If a player does not have the required permission:</p>
<ul>
<li>The argument hover text which suggests what the command is will not be shown</li>
<li>The player will receive an error if they try to type something in for that argument</li>
<li>Suggestions, such as a list of materials or players, will not be shown</li>
</ul>
<div class="example">
<h3><a class="header" href="#example---kill-command-with-argument-permissions" id="example---kill-command-with-argument-permissions">Example - /kill command with argument permissions</a></h3>
<p>For example, say we're registering a command <code>/kill</code>:</p>
<pre><code>/kill          - Kills yourself
/kill &lt;target&gt; - Kills a target player
</code></pre>
<p>We first declare the command as normal. Nothing fancy is going on here:</p>
<pre><code class="language-java">//Register the /god command with the permission node &quot;command.god&quot;, without creating a CommandPermission
new CommandAPICommand(&quot;god&quot;)
    .withPermission(&quot;command.god&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setInvulnerable(true);
    })
    .register();
</code></pre>
<p>Now we declare our command with arguments. We use a <code>PlayerArgument</code> and apply the permission <em>to the argument</em>. After that, we register our command as normal:</p>
<pre><code class="language-java">// Adds the OP permission to the &quot;target&quot; argument. The sender requires OP to execute /kill &lt;target&gt;
new CommandAPICommand(&quot;kill&quot;)
    .withArguments(new PlayerArgument(&quot;target&quot;).withPermission(CommandPermission.OP))
    .executesPlayer((player, args) -&gt; {
        ((Player) args[0]).setHealth(0);
    })
    .register();
</code></pre>
</div>
<hr />
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>As you can see, there are multiple ways of applying permissions to commands with arguments. In the <code>/god</code> command shown above, the permission was applied to the whole command. In the <code>/kill</code> command shown above, the permission was applied to the argument. </p>
<p>There's not really much difference between the two methods, but I personally would use <em>argument permissions</em> as it has greater control over arguments.</p>
</blockquote>
<h1><a class="header" href="#requirements" id="requirements">Requirements</a></h1>
<p>Requirements is a feature that allows you to put a constraint on commands and arguments. Similar to permissions, a requirement is something that must be fulfilled in order to use a given command or argument.</p>
<p>This section is broken up into four parts:</p>
<ul>
<li>Adding requirements to commands</li>
<li>Adding requirements to arguments</li>
<li>Updating requirements</li>
<li>Multiple requirements</li>
</ul>
<p><strong>Please don't skip the section on updating requirements</strong> - the last section is necessary to get requirements to work as you'd want!</p>
<hr />
<h2><a class="header" href="#adding-requirements-to-commands" id="adding-requirements-to-commands">Adding requirements to commands</a></h2>
<p>To add a requirement to a command, similar to adding permissions to commands, use the <code>withRequirement</code> method:</p>
<pre><code class="language-java">CommandAPICommand withRequirement(Predicate&lt;CommandSender&gt; sender);
</code></pre>
<p>The <code>withRequirement</code> method requires a predicate that determines if the sender is able to run the command - if the predicate is satisfied, then the command sender will be able to execute that command.</p>
<div class="example">
<h3><a class="header" href="#example---perks-based-on-a-players-level" id="example---perks-based-on-a-players-level">Example - Perks based on a player's level</a></h3>
<p>Say we have a perks-based command system that depends on a player's level. For example, if a player has over 30 levels of experience, they would then be able to run a command that lets them repair the item in their hand in exchange for 30 levels. As such, we'll use the following command structure:</p>
<pre><code>/repair
</code></pre>
<p>We want to put a requirement on this command that the player needs to have at least 30 levels of experience in order to run the command - if the player has less than 30 levels, the player should not be able to run the command. The easiest way to make the player not able to run the command is to literally tell the user that the command doesn't exist. That's what requirements do in the CommandAPI:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;repair&quot;)
    .withRequirement(sender -&gt; ((Player) sender).getLevel() &gt;= 30)
    .executesPlayer((player, args) -&gt; {
        
        //Repair the item back to full durability
        ItemStack is = player.getInventory().getItemInMainHand();
        ItemMeta itemMeta = is.getItemMeta();
        if(itemMeta instanceof Damageable) {
            ((Damageable) itemMeta).setDamage(0);
            is.setItemMeta(itemMeta);
        }
        
        //Subtract 30 levels
        player.setLevel(player.getLevel() - 30);
    })
    .register();
</code></pre>
<p>It's important to note that in this example, we case the <code>sender</code> to a <code>player</code> for the requirement method. We know that the sender is definitely a player because we use <code>executesPlayer()</code>, which ensures that this is the case. Now that we've got this, <strong>we need to make sure we update the player's requirements <em>when their exp changes</em></strong>. This is covered in more detail in the section about updating requirements below.</p>
</div>
<hr />
<h2><a class="header" href="#adding-requirements-to-arguments" id="adding-requirements-to-arguments">Adding requirements to arguments</a></h2>
<p>In a similar way that you can restrict certain arguments by adding permissions to them, you can restrict them by using arbitrary predicates by using the <code>withRequirement</code> method on the arguments themselves.</p>
<div class="example">
<h3><a class="header" href="#example---a-party-creation-and-teleportation-system" id="example---a-party-creation-and-teleportation-system">Example - A party creation and teleportation system</a></h3>
<p>Let's say that we're working on a plugin that has a system to form groups of players called &quot;parties&quot;. If you are not already in a party, you can create one of your own and if you are in a party, you can teleport to any other member in your party.</p>
<p>For this example, we'll use the following command structure:</p>
<pre><code>/party create &lt;partyName&gt;
/party tp &lt;player&gt;
</code></pre>
<p>To represent our party in code, we'll use a simple <code>Map</code> called <code>partyMembers</code> which maps the player's UUID to the name of their registered party:</p>
<pre><code class="language-java">Map&lt;UUID, String&gt; partyMembers = new HashMap&lt;&gt;();
</code></pre>
<p>To begin with, let's create the <code>/party create &lt;partyName&gt;</code> command. First, we must declare our arguments:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();

// The &quot;create&quot; literal, with a requirement that a player must have a party
arguments.add(new LiteralArgument(&quot;create&quot;)
	.withRequirement(sender -&gt; {
		
		return !partyMembers.containsKey(((Player) sender).getUniqueId());
		
	}));

arguments.add(new StringArgument(&quot;partyName&quot;));
</code></pre>
<p>In this argument declaration, we put a requirement on the literal <code>create</code>, where the player does not have a party. In other words, if the player does not have a party, they are allowed to run <code>/party create &lt;partyName&gt;</code>. If a player already has a party, then they won't be allowed to run this command. </p>
<p>Now that we've declared our arguments, we can now declare our main command <code>/party create &lt;partyName&gt;</code>. We populate it with the arguments, and we create an entry in our <code>partyMembers</code> with the player's UUID and the name of the party that they created. Since this updates the requirements of the player, we'll have to make sure we update it (which is covered in more detail in the section about updating requirements below) - until then, I'll omit this from the code:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;party&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		
		//Get the name of the party to create
		String partyName = (String) args[0];
		
		partyMembers.put(player.getUniqueId(), partyName);
	})
	.register();
</code></pre>
<hr />
<p>So now we've added the ability to create a party if we're not already in it. Now we need to implement our <code>party tp &lt;player&gt;</code> command. Again, we must start by declaring our arguments:</p>
<pre><code class="language-java">arguments = new ArrayList&lt;&gt;();
arguments.add(new LiteralArgument(&quot;tp&quot;)
	.withRequirement(sender -&gt; {
		
		return partyMembers.containsKey(((Player) sender).getUniqueId());
        
	}));

arguments.add(new PlayerArgument(&quot;player&quot;)
	.safeOverrideSuggestions((sender) -&gt; {
		
		//Store the list of party members to teleport to
		List&lt;Player&gt; playersToTeleportTo = new ArrayList&lt;&gt;();
		
		String partyName = partyMembers.get(((Player) sender).getUniqueId());
		
		//Find the party members
		for(UUID uuid : partyMembers.keySet()) {
			
			//Ignore yourself
			if(uuid.equals(((Player) sender).getUniqueId())) {
				continue;
			} else {
				//If the party member is in the same party as you
				if(partyMembers.get(uuid).equals(partyName)) {
					Player target = Bukkit.getPlayer(uuid);
					if(target.isOnline()) {
						//Add them if they are online
						playersToTeleportTo.add(target);
					}
				}
			}
		}
		
		return playersToTeleportTo.toArray(new Player[0]);
	}));
</code></pre>
<p>Notice something here? There's some code repetition for the <code>withRequirement</code> method - this is the same predicate that we used earlier, except we remove the negation. If you are interested, you can view the section <a href="./predicatetips.html">Predicate tips</a> for a method to improve code reuse.</p>
<p>Once the arguments have been declared, we can now implement our party teleportation command:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;party&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		Player target = (Player) args[0];
		player.teleport(target);
	})
	.register();
</code></pre>
<hr />
<p>What's important to note in this example is that if you spend the time to set up the arguments properly, it severely decreases the amount of code required to write your command. This makes the commands you declare easier to understand and follow and you don't end up having to put all of these checks in the body of your command executor.</p>
</div>
<hr />
<h2><a class="header" href="#updating-requirements" id="updating-requirements">Updating requirements</a></h2>
<p>Finally, the part you've all been waiting for - how to update requirements. With the way requirements work, they need to be updated manually. To illustrate why this is the case, I'll explain using <a href="./requirements.html#example---perks-based-on-a-players-level">the example of the /repair command</a>:</p>
<p>When a player joins the game, the server tells the client the list of all commands that the client can run <em>(don't worry, this is completely normal, as declared <a href="https://wiki.vg/Protocol#Declare_Commands">here</a>)</em>. Let's say that the player has joined and has less than 30 levels.</p>
<p>When a player has less than 30 levels, they are unable to execute the <code>/repair</code> command, because the list of commands that the server sent to the client did not contain the <code>/repair</code> command. Eventually, the player will fight some mobs or mine some ores and eventually will reach 30 levels. Despite this, the player's client doesn't actually know that they're now able to use the <code>/repair</code> command until the server tells them. As such, the server needs to somehow update the requirements that a player has so a player knows they can run the command.</p>
<p>The CommandAPI handles this in a very simple method call:</p>
<pre><code>CommandAPI.updateRequirements(player);
</code></pre>
<div class="warning">
<p><strong>Developer's Note:</strong></p>
<p>The <code>CommandAPI.updateRequirements(player);</code> method can be used anywhere, <strong>except</strong> for the <code>withRequirement</code> method. Using it inside this method will crash the server. This is by design - just make sure you don't use it within the <code>withRequirement</code> method and everything will be fine!</p>
</div>
<p>To illustrate how to use this, we'll go over the two examples above:</p>
<div class="example">
<h3><a class="header" href="#example---updating-requirements-for-xp-changes" id="example---updating-requirements-for-xp-changes">Example - Updating requirements for xp changes</a></h3>
<p>In <a href="./requirements.html#example---perks-based-on-a-players-level">the example of requirements with the /repair command</a>, we needed to ensure that the player's requirements update when their experience changes. To do this, we'll simply use a normal event to check this:</p>
<pre><code class="language-java">@EventHandler
public void onExpChange(PlayerExpChangeEvent event) {
    CommandAPI.updateRequirements(event.getPlayer());
}
</code></pre>
<p>And of course, you have to ensure that this event is registered in your <code>onEnable()</code> method:</p>
<pre><code class="language-java">@Override
public void onEnable() {
    getServer().getPluginManager().registerEvents(this, this);
}
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>I'm assuming you already know how to register events and don't need me to go into great detail how to do so, take the code above with a pinch of salt - I know how much everyone likes to divide their event handlers and listeners to organise their code.</p>
</blockquote>
</div>
<div class="example">
<h3><a class="header" href="#example---updating-requirements-for-the-party-creation-example" id="example---updating-requirements-for-the-party-creation-example">Example - Updating requirements for the party creation example</a></h3>
<p>In the <a href="./requirements.html#example---a-party-creation-and-teleportation-system">example for a party creation</a>, we declared two commands:</p>
<pre><code>/party create &lt;partyName&gt;
/party tp &lt;player&gt;
</code></pre>
<p>When a player creates a new party, we need to ensure that their requirements are updated <em>when they create the party</em>. As such, we simply add this to our party creation command executor:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;party&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		
		//Get the name of the party to create
		String partyName = (String) args[0];
		
		partyMembers.put(player.getUniqueId(), partyName);
	    
	    CommandAPI.updateRequirements(player);
	})
	.register();
</code></pre>
<p>That's it!</p>
</div>
<hr />
<h2><a class="header" href="#multiple-requirements" id="multiple-requirements">Multiple requirements</a></h2>
<p>The CommandAPI lets you handle multiple requirements really easily! The <code>withRequirement</code> method can be called multiple times, so you don't have to worry about shoving everything in one expression.</p>
<div class="example">
<h3><a class="header" href="#example---using-multiple-requirements" id="example---using-multiple-requirements">Example - Using multiple requirements</a></h3>
<p>For example, you can apply multiple requirements for a command by calling the <code>withRequirement</code> method multiple times:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;someCommand&quot;)
	.withRequirement(sender -&gt; ((Player) sender).getLevel() &gt;= 30)
	.withRequirement(sender -&gt; ((Player) sender).getInventory().contains(Material.DIAMOND_PICKAXE))
	.withRequirement(sender -&gt; ((Player) sender).isInvulnerable())
	.executesPlayer((player, args) -&gt; {
		//Code goes here
	})
	.register();
</code></pre>
</div>
<h1><a class="header" href="#aliases" id="aliases">Aliases</a></h1>
<p>Aliases for commands can be added by using the <code>withAliases()</code> method when registering a command. Aliases allow you to run the same command with a different 'name' from the original registered command name.</p>
<div class="example">
<h3><a class="header" href="#example---using-aliases-for-getpos" id="example---using-aliases-for-getpos">Example - Using aliases for /getpos</a></h3>
<p>In this example, we register the command <code>/getpos</code> that returns the command sender's location. We apply the aliases <code>/getposition</code>, <code>/getloc</code>, <code>/getlocation</code> and <code>/whereami</code> as well, using the <code>withAliases()</code> method.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;getpos&quot;)
	// Declare your aliases
	.withAliases(&quot;getposition&quot;, &quot;getloc&quot;, &quot;getlocation&quot;, &quot;whereami&quot;)
	  
	    //Declare your implementation
	.executesEntity((entity, args) -&gt; {
	    entity.sendMessage(String.format(&quot;You are at %d, %d, %d&quot;, 
	        entity.getLocation().getBlockX(), 
	        entity.getLocation().getBlockY(), 
	        entity.getLocation().getBlockZ())
	    );
	})
	.executesCommandBlock((block, args) -&gt; {
	    block.sendMessage(String.format(&quot;You are at %d, %d, %d&quot;, 
	            block.getBlock().getLocation().getBlockX(), 
	            block.getBlock().getLocation().getBlockY(), 
	            block.getBlock().getLocation().getBlockZ())
	        );
	    })
	  
	    //Register the command
	.register();
</code></pre>
</div><h1><a class="header" href="#subcommands" id="subcommands">Subcommands</a></h1>
<p>Subcommands is another method for registering commands that makes use of creating multiple different <code>CommandAPICommand</code> instances. Given a <code>CommandAPICommand</code>, we can add a subcommand by using the following method:</p>
<pre><code class="language-java">CommandAPICommand withSubcommand(CommandAPICommand subcommand);
</code></pre>
<p>Using subcommands has no disadvantages to using regular commands with the <code>LiteralArgument</code> or <code>MultiLiteralArgument</code>, and should be slightly more intuitive to implement if you've used other command frameworks before.</p>
<div class="example">
<h3><a class="header" href="#example---permission-system-with-subcommands" id="example---permission-system-with-subcommands">Example - Permission system with subcommands</a></h3>
<p>Say we wanted to write a permission management system. To do this, we'll use the following command structure:</p>
<pre><code>/perm group add &lt;permission&gt; &lt;groupName&gt;
/perm group remove &lt;permission&gt; &lt;groupName&gt;
/perm user add &lt;permission&gt; &lt;userName&gt;
/perm user remove &lt;permission&gt; &lt;userName&gt;
</code></pre>
<p>Let's start with the simplest example - the <code>/perm group ...</code> command. We have one command which is basically the following:</p>
<pre><code>add &lt;permission&gt; &lt;groupName&gt;
</code></pre>
<p>We can implement this by creating a <code>CommandAPICommand</code> with the command name <code>add</code>:</p>
<pre><code class="language-java">CommandAPICommand groupAdd = new CommandAPICommand(&quot;add&quot;)
	.withArguments(new StringArgument(&quot;permission&quot;))
	.withArguments(new StringArgument(&quot;groupName&quot;))
	.executes((sender, args) -&gt; {
	    //perm group add code
	});
</code></pre>
<p>Similarly, we have another part <code>remove &lt;permission&gt; &lt;groupName&gt;</code>. We can declare this similar to our <code>add</code> command. Once we've done that, we can now join everything up together. Here, we create a command <code>group</code> which adds the two other subcommands:</p>
<pre><code class="language-java">CommandAPICommand groupRemove = new CommandAPICommand(&quot;remove&quot;)
	.withArguments(new StringArgument(&quot;permission&quot;))
	.withArguments(new StringArgument(&quot;groupName&quot;))
	.executes((sender, args) -&gt; {
	    //perm group remove code
	});

CommandAPICommand group = new CommandAPICommand(&quot;group&quot;)
	.withSubcommand(groupAdd)
	.withSubcommand(groupRemove);
</code></pre>
<p>Finally, we can link everything up together to the <code>perm</code> command and register the whole thing together:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;perm&quot;)
    .withSubcommand(group)
    .register();
</code></pre>
<hr />
<p>Another, more intuitive method, is to shove everything in one go without creating lots of variables all over the place:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;perm&quot;)
    .withSubcommand(new CommandAPICommand(&quot;group&quot;)
        .withSubcommand(new CommandAPICommand(&quot;add&quot;)
            .withArguments(new StringArgument(&quot;permission&quot;))
            .withArguments(new StringArgument(&quot;groupName&quot;))
            .executes((sender, args) -&gt; {
                //perm group add code
            })
        )
        .withSubcommand(new CommandAPICommand(&quot;remove&quot;)
            .withArguments(new StringArgument(&quot;permission&quot;))
            .withArguments(new StringArgument(&quot;groupName&quot;))
            .executes((sender, args) -&gt; {
                //perm group remove code
            })
        )
    )
    .withSubcommand(new CommandAPICommand(&quot;user&quot;)
        .withSubcommand(new CommandAPICommand(&quot;add&quot;)
            .withArguments(new StringArgument(&quot;permission&quot;))
            .withArguments(new StringArgument(&quot;userName&quot;))
            .executes((sender, args) -&gt; {
                //perm user add code
            })
        )
        .withSubcommand(new CommandAPICommand(&quot;remove&quot;)
            .withArguments(new StringArgument(&quot;permission&quot;))
            .withArguments(new StringArgument(&quot;userName&quot;))
            .executes((sender, args) -&gt; {
                //perm user remove code
            })
        )
    )
    .register();
</code></pre>
</div><h1><a class="header" href="#annotation-based-commands" id="annotation-based-commands">Annotation-based commands</a></h1>
<p>The CommandAPI also includes a very small lightweight annotation-based command framework. This works very differently compared to previous commands shown in this documentation and <strong>it is less feature-rich than registering commands using the other methods.</strong></p>
<p>In short, the CommandAPI's annotation-based system:</p>
<ul>
<li>Has no runtime overhead compared to using the regular command registration system (unlike other annotation-based frameworks such as <a href="https://github.com/aikar/commands">ACF</a>).</li>
<li>Reduces code bloat (to an extent).</li>
<li>Improves readability since commands are declared declaratively instead of imperatively.</li>
<li>Is not as powerful as the regular command registration system.</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Currently, the annotation framework is in its infancy, so any suggestions or improvements are heavily appreciated!</p>
</blockquote>
<p>Before we go into too much detail, let's take a look at an example of what this annotation framework looks like, and compare this to the existing method.</p>
<hr />
<h2><a class="header" href="#example-a-warp-command" id="example-a-warp-command">Example: A warp command</a></h2>
<p><em>(So I would put this section in a big green box, but this example is REALLY big and that wouldn't look good)</em></p>
<p>Let's say we're writing a plugin with the capability to create warps to places on the server. To do this, we'll make a simple command <code>/warp</code>, defined as follows:</p>
<pre><code>/warp - Shows help
/warp &lt;warp&gt; - Teleports a player to &lt;warp&gt;
/warp create &lt;name&gt; - Creates a new warp &lt;name&gt; at the player's location
</code></pre>
<h3><a class="header" href="#warp-command-without-annotations" id="warp-command-without-annotations">Warp command (without annotations)</a></h3>
<p>Using the regular CommandAPI, this is one way we can create this command. In the code below, we use StringArguments to represent the warp names. To teleport to a warp, we also populate it with suggestions (deferred so it updates), and also use a subcommand to represent <code>/warp create</code>:</p>
<pre><code class="language-java">Map&lt;String, Location&gt; warps = new HashMap&lt;&gt;();

// /warp
new CommandAPICommand(&quot;warp&quot;)
	.executes((sender, args) -&gt; {
		sender.sendMessage(&quot;--- Warp help ---&quot;);
		sender.sendMessage(&quot;/warp - Show this help&quot;);
		sender.sendMessage(&quot;/warp &lt;warp&gt; - Teleport to &lt;warp&gt;&quot;);
		sender.sendMessage(&quot;/warp create &lt;warpname&gt; - Creates a warp at your current location&quot;);
	})
	.register();

// /warp &lt;warp&gt;
new CommandAPICommand(&quot;warp&quot;)
	.withArguments(new StringArgument(&quot;warp&quot;).overrideSuggestions(sender -&gt; {
		return warps.keySet().toArray(new String[0]);
	}))
	.executesPlayer((player, args) -&gt; {
		player.teleport(warps.get((String) args[0]));
	})
	.register();

// /warp create &lt;warpname&gt;
new CommandAPICommand(&quot;warp&quot;)
    .withSubcommand(
		new CommandAPICommand(&quot;create&quot;)
			.withPermission(&quot;warps.create&quot;)
			.withArguments(new StringArgument(&quot;warpname&quot;))
			.executesPlayer((player, args) -&gt; {
				warps.put((String) args[0], player.getLocation());
			})
	)
    .register();
</code></pre>
<p>Seems fairly straightforward, given everything else covered in this documentation. Now let's compare it to using annotations!</p>
<h3><a class="header" href="#warp-command-with-annotations" id="warp-command-with-annotations">Warp command (with annotations)</a></h3>
<p>I think it's best to show the example and the explain it afterwards:</p>
<pre><code class="language-java">@Command(&quot;warp&quot;)	
public class WarpCommand {
	
	// List of warp names and their locations
	static Map&lt;String, Location&gt; warps = new HashMap&lt;&gt;();
	
	@Default
	public static void warp(CommandSender sender) {
		sender.sendMessage(&quot;--- Warp help ---&quot;);
		sender.sendMessage(&quot;/warp - Show this help&quot;);
		sender.sendMessage(&quot;/warp &lt;warp&gt; - Teleport to &lt;warp&gt;&quot;);
		sender.sendMessage(&quot;/warp create &lt;warpname&gt; - Creates a warp at your current location&quot;);
	}
	
	@Default
	public static void warp(Player player, @AStringArgument String warpName) {
		player.teleport(warps.get(warpName));
	}
	
	@Subcommand(&quot;create&quot;)
	@Permission(&quot;warps.create&quot;)
	public static void createWarp(Player player, @AStringArgument String warpName) {
		warps.put(warpName, player.getLocation());
		new IntegerArgument(&quot;&quot;);
	}
	
}
</code></pre>
<pre><code class="language-java">CommandAPI.registerCommand(WarpCommand.class);
</code></pre>
<p>As we can see, the code certainly <em>looks</em> very different to the normal registration method. Let's take it apart piece by piece to see what exactly is going on here.</p>
<h4><a class="header" href="#command-declaration" id="command-declaration">Command declaration</a></h4>
<pre><code class="language-java">@Command(&quot;warp&quot;)	
public class WarpCommand {
</code></pre>
<p>Firstly, we declare our command <code>warp</code>. To do this, we use the <code>@Command</code> annotation and simply state the name of the command in the annotation. This annotation is attached to the class <code>WarpCommand</code>, which basically indicates that the whole class <code>WarpCommand</code> will be housing our command.</p>
<p>The annotation framework is designed in such a way that an entire command is represented by a single class. This provides a more modular approach to command declaration that allows you to easily contain the methods of a command in one location.</p>
<h4><a class="header" href="#default-command" id="default-command">Default command</a></h4>
<pre><code class="language-java">@Default
public static void warp(CommandSender sender) {
	sender.sendMessage(&quot;--- Warp help ---&quot;);
	sender.sendMessage(&quot;/warp - Show this help&quot;);
	sender.sendMessage(&quot;/warp &lt;warp&gt; - Teleport to &lt;warp&gt;&quot;);
	sender.sendMessage(&quot;/warp create &lt;warpname&gt; - Creates a warp at your current location&quot;);
}
</code></pre>
<p>Here, declare the main command implementation using the <code>@Default</code> annotation. The <code>@Default</code> annotation basically informs the CommandAPI that the method it is attached to does not have any subcommands. This is basically the same as registering a regular command without using <code>.withSubcommand()</code>.</p>
<p>Here, we simply write what happens when no arguments are run (i.e. the user just runs <code>/warp</code> on its own). As such, we don't include any parameters to our method.</p>
<h4><a class="header" href="#default-command-again" id="default-command-again">Default command (again!)</a></h4>
<pre><code class="language-java">@Default
public static void warp(Player player, @AStringArgument String warpName) {
	player.teleport(warps.get(warpName));
}
</code></pre>
<p>We also have a second <code>@Default</code> annotated method, which handles our <code>/warp &lt;warp&gt;</code> command. Because this isn't a subcommand (the warp to teleport to is not a subcommand, it's an argument), we still using the <code>@Default</code> annotation. In this method, we include an argument with this command by using the <code>@AStringArgument</code> annotation. This argument uses the <code>StringArgument</code> class, and the name of this argument is &quot;warpName&quot;, which is extracted from the name of the variable. Simply put, <strong>the Annotation for an argument is A</strong> followed by the name of the argument. This is synonymous with using the following:</p>
<pre><code class="language-java">new StringArgument(&quot;warp&quot;)
</code></pre>
<p>It's also very important to note the parameters for this method. The first parameter is a <code>Player</code> object, which represents our command sender. The CommandAPI's annotation system uses the fact that the command sender is a <code>Player</code> object and automatically ensures that anyone using the command must be a <code>Player</code>. In other words, non-players (such as the console or command blocks), would be unable to execute this command.</p>
<p>The second argument is a <code>String</code> object, which represents the result of our argument &quot;warp&quot;. The CommandAPI's annotation system can also infer the return type of the argument that is provided to it (in this case, a <code>StringArgument</code> will produce a <code>String</code>) and will automatically cast and provide the result to that parameter.</p>
<h4><a class="header" href="#subcommand" id="subcommand">Subcommand</a></h4>
<pre><code class="language-java">@Subcommand(&quot;create&quot;)
@Permission(&quot;warps.create&quot;)
public static void createWarp(Player player, @AStringArgument String warpName) {
	warps.put(warpName, player.getLocation());
}
</code></pre>
<p>Lastly, we declare a subcommand to allow us to run <code>/warp create &lt;name&gt;</code>. To do this, we simply use the <code>@Subcommand</code> annotation. In this example, we also apply a permission node that is required to run the command by using the <code>@Permission</code> annotation. The rest is fairly straight forward - we declare an argument, in this case it's another <code>StringArgument</code> , so we use <code>@AStringArgument</code> and then declare everything else in a similar fashion to the default command executor.</p>
<h4><a class="header" href="#registering-the-command-1" id="registering-the-command-1">Registering the command</a></h4>
<p>Registering the command is fairly simple and is a one liner:</p>
<pre><code class="language-java">CommandAPI.registerCommand(WarpCommand.class);
</code></pre>
<p>This line can be placed in your <code>onEnable()</code> or <code>onLoad()</code> method like you were registering a normal command.</p>
<h1><a class="header" href="#annotations" id="annotations">Annotations</a></h1>
<p>This page outlines in detail the list of all annotations that the CommandAPI's annotation-based command system includes.</p>
<hr />
<h2><a class="header" href="#annotations-that-go-on-classes" id="annotations-that-go-on-classes">Annotations that go on classes</a></h2>
<h3><a class="header" href="#commandcommandname" id="commandcommandname"><code>@Command</code>(&quot;commandName&quot;)</a></h3>
<p>The <code>@Command</code> annotation is used to declare a command. The parameter is the name of the command that will be registered.</p>
<pre><code class="language-java">@Command(&quot;warp&quot;)	
public class WarpCommand {
</code></pre>
<h3><a class="header" href="#alias" id="alias"><code>@Alias({...})</code></a></h3>
<p>The <code>@Alias</code> annotation is used to declare a list of aliases for a command. The parameter is a list of aliases which can be used for the command.</p>
<pre><code class="language-java">@Command(&quot;teleport&quot;)	
@Alias({&quot;tp&quot;, &quot;tele&quot;})
public class TeleportCommand {
</code></pre>
<h3><a class="header" href="#permissionpermissionnode" id="permissionpermissionnode"><code>@Permission(&quot;permissionNode&quot;)</code></a></h3>
<p>The <code>@Permission</code> annotation is used to add a permission node to a command. Users that want to run this command must have this permission. The parameter is the permission node required to run the command.</p>
<pre><code class="language-java">@Command(&quot;teleport&quot;)	
@Permission(&quot;myplugin.tp&quot;)
class TeleportCommand {
</code></pre>
<h3><a class="header" href="#needsop" id="needsop"><code>@NeedsOp</code></a></h3>
<p>The <code>@NeedsOp</code> annotation is used to indicate that a command needs to have operator privileges to run it. This annotation has no parameters.</p>
<pre><code class="language-java">@Command(&quot;teleport&quot;)	
@NeedsOp
class TeleportCommand {
</code></pre>
<hr />
<h2><a class="header" href="#annotations-that-go-on-methods" id="annotations-that-go-on-methods">Annotations that go on methods</a></h2>
<p>To use annotations on methods, <strong>methods must be static</strong>.</p>
<h3><a class="header" href="#default" id="default"><code>@Default</code></a></h3>
<p>The <code>@Default</code> annotation indicates that the method is <em>not</em> a subcommand. This acts in a similar way to regular Bukkit commands. Commands with the <code>@Default</code> annotation can be used to run the main code when the command named with the <code>@Command</code> annotation is stated, such as the following:</p>
<pre><code class="language-java">@Default
public static void warp(CommandSender sender) {
	sender.sendMessage(&quot;--- Warp help ---&quot;);
	sender.sendMessage(&quot;/warp - Show this help&quot;);
	sender.sendMessage(&quot;/warp &lt;warp&gt; - Teleport to &lt;warp&gt;&quot;);
	sender.sendMessage(&quot;/warp create &lt;warpname&gt; - Creates a warp at your current location&quot;);
}
</code></pre>
<p>The <code>@Default</code> annotation does not mean that the command can't have arguments! Arguments can still be used and declared as shown:</p>
<pre><code class="language-java">@Default
public static void warp(Player player, @AStringArgument String warpName) {
	player.teleport(warps.get(warpName));
}
</code></pre>
<h3><a class="header" href="#subcommand-1" id="subcommand-1"><code>@Subcommand</code></a></h3>
<p>The <code>@Subcommand</code> simply tells the CommandAPI that the declared method is a subcommand. This acts in a similar way to the regular CommandAPI's <code>.withSubcommand()</code> method. The subcommand annotation can take in a single string which is the name of the subcommand:</p>
<pre><code class="language-java">@Subcommand(&quot;create&quot;)
@Permission(&quot;warps.create&quot;)
public static void createWarp(Player player, @AStringArgument String warpName) {
	warps.put(warpName, player.getLocation());
}
</code></pre>
<p>Or, it can take in a list of strings which represent the <em>aliases</em> that can also be used for the declared subcommand:</p>
<pre><code class="language-java">@Subcommand({&quot;teleport&quot;, &quot;tp&quot;})
public static void teleport(Player player, @APlayerArgument Player target) {
	player.teleport(target);
}
</code></pre>
<h3><a class="header" href="#permission" id="permission"><code>@Permission</code></a></h3>
<p>The <code>@Permission</code> annotation can also be used on methods to indicate that a permission is required to execute a command.</p>
<pre><code class="language-java">@Subcommand(&quot;create&quot;)
@Permission(&quot;warps.create&quot;)
public static void createWarp(Player player, @AStringArgument String warpName) {
	warps.put(warpName, player.getLocation());
}
</code></pre>
<h3><a class="header" href="#needsop-1" id="needsop-1"><code>@NeedsOp</code></a></h3>
<p>The <code>@NeedsOp</code> annotation can also be used on methods to indicate that the user must be an operator to run the command.</p>
<hr />
<h2><a class="header" href="#annotations-that-go-on-parameters" id="annotations-that-go-on-parameters">Annotations that go on parameters</a></h2>
<p>The annotations for arguments are really simple, there's just two things you need to know:</p>
<ul>
<li>
<p>To use an annotation argument, just add the letter <code>A</code> (for 'annotation') at the beginning of it! For example:</p>
<p>\begin{align}
\texttt{StringArgument}&amp;\xrightarrow{A}\texttt{@AStringArgument}\\
\texttt{PlayerArgument}&amp;\xrightarrow{A}\texttt{@APlayerArgument}\\
\texttt{AdvancementArgument}&amp;\xrightarrow{A}\texttt{@AAdvancementArgument}\\
&amp;\hspace{0.75em}\vdots
\end{align}</p>
<p>For example, we use <code>@AStringArgument</code> to indicate that this command takes a <code>StringArgument</code> as its first parameter:</p>
</li>
</ul>
<pre><code class="language-java">@Default
public static void warp(Player player, @AStringArgument String warpName) {
	player.teleport(warps.get(warpName));
}
</code></pre>
<ul>
<li><strong>The name of the argument (referred to as &quot;nodeName&quot; in the normal CommandAPI system) is the name of the variable assigned to the parameter.</strong> In the above code, this means that the name of the argument is <code>warpName</code>.</li>
</ul>
<h3><a class="header" href="#special-argument-annotations" id="special-argument-annotations">Special argument annotations</a></h3>
<p>Certain argument annotations have extra parameters that can be supplied to provide additional customization:</p>
<h4><a class="header" href="#numerical-arguments-1" id="numerical-arguments-1">Numerical arguments</a></h4>
<p>The following numerical arguments can take both a <code>min</code> and <code>max</code> value. Both of these are completely optional. This indicates the range of values (inclusive) that is valid for this argument. For example:</p>
<pre><code class="language-java">@Default
public static void command(CommandSender sender, 
	@ADoubleArgument(min = 0.0, max = 10.0) double someDouble,
	@AFloatArgument(min = 5.0f, max = 10.0f) float someFloat,
	@AIntegerArgument(max = 100) int someInt,
	@ALongArgument(min = -10) long someLong
) {
	// Command implementation here
}
</code></pre>
<h4><a class="header" href="#literal-arguments-3" id="literal-arguments-3">Literal arguments</a></h4>
<p>Both the <code>LiteralArgument</code> and <code>MultiLiteralArgument</code> can be used. When these are used, the name of the variable assigned to the parameter is <em>ignored</em> and not used as the argument's name.</p>
<p>For the <code>@ALiteralArgument</code> annotation, the parameter is the literal to be used for the command. For the <code>@AMultiLiteralArgument</code>, the parameter can be an array of multiple literals to use:</p>
<pre><code class="language-java">@Default
public static void command(CommandSender sender, 
	@ALiteralArgument(&quot;myliteral&quot;) String literal,
	@AMultiLiteralArgument({&quot;literal&quot;, &quot;anotherliteral&quot;}) String multipleLiterals
) {
	// Command implementation here
}
</code></pre>
<h4><a class="header" href="#other-arguments" id="other-arguments">Other arguments</a></h4>
<p>The <code>LocationArgument</code>, <code>Location2DArgument</code>, <code>EntitySelectorArgument</code> and <code>ScoreHolderArgument</code> can all take an extra parameter in their constructors. As a result, the annotation-equivalent of these arguments also allow you to provide the parameter in the annotation:</p>
<pre><code class="language-java">@Default
public static void command(CommandSender sender, 
	@ALocationArgument(LocationType.BLOCK_POSITION) Location location,
	@ALocation2DArgument(LocationType.PRECISE_POSITION) Location location2d,
	@AEntitySelectorArgument(EntitySelector.MANY_ENTITIES) Collection&lt;Entity&gt; entities,
	@AScoreHolderArgument(ScoreHolderType.MULTIPLE) Collection&lt;String&gt; scoreHolders
) {
	// Command implementation here
}
</code></pre>
<h1><a class="header" href="#registering-annotation-based-commands" id="registering-annotation-based-commands">Registering annotation-based commands</a></h1>
<p>Registering annotation-based commands is <em>really</em> simple. To do this, we use the following method, where <code>className</code> is the name of a class with a <code>@Command</code> annotation:</p>
<pre><code class="language-java">CommandAPI.registerCommand(className)
</code></pre>
<div class="example">
<h3><a class="header" href="#example-registering-a-warp-command" id="example-registering-a-warp-command">Example: Registering a Warp command</a></h3>
<p>Say we have a simple command <code>/warp</code> that is defined as follows:</p>
<pre><code class="language-java">@Command(&quot;warp&quot;)	
public class WarpCommand {
	
	// List of warp names and their locations
	static Map&lt;String, Location&gt; warps = new HashMap&lt;&gt;();
	
	@Default
	public static void warp(CommandSender sender) {
		sender.sendMessage(&quot;--- Warp help ---&quot;);
		sender.sendMessage(&quot;/warp - Show this help&quot;);
		sender.sendMessage(&quot;/warp &lt;warp&gt; - Teleport to &lt;warp&gt;&quot;);
		sender.sendMessage(&quot;/warp create &lt;warpname&gt; - Creates a warp at your current location&quot;);
	}
	
	@Default
	public static void warp(Player player, @AStringArgument String warpName) {
		player.teleport(warps.get(warpName));
	}
	
	@Subcommand(&quot;create&quot;)
	@Permission(&quot;warps.create&quot;)
	public static void createWarp(Player player, @AStringArgument String warpName) {
		warps.put(warpName, player.getLocation());
		new IntegerArgument(&quot;&quot;);
	}
	
}
</code></pre>
<p>We can register this in our <code>onLoad()</code> method so we can use this command from within Minecraft functions:</p>
<pre><code class="language-java">class MyPlugin extends JavaPlugin {
	
	@Override
	public void onLoad() {
		CommandAPI.registerCommand(WarpCommand.class);
	}
	
}
</code></pre>
</div>
<h1><a class="header" href="#command-conversion" id="command-conversion">Command conversion</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>If you're a server owner, you're probably lost! This section is for developer command conversion. If you're looking for how to convert plugins with the <code>config.yml</code> file, you want <a href="./config.html#command-conversion">2. Configuration for server owners</a>.</p>
</blockquote>
<p>The CommandAPI has the ability to convert plugin commands to vanilla Minecraft commands using its <code>config.yml</code>'s <code>plugins-to-convert</code> option. Nevertheless, the API for command conversion is not hidden and you're free to use it as you see fit!</p>
<hr />
<p>Before you continue, let's clear up a few naming conventions which is used in the following sections!</p>
<ul>
<li><strong>Target plugin</strong> - This refers to a non-CommandAPI plugin which registers normal Bukkit commands. This typically uses the old <code>boolean onCommand(CommandSender ... )</code> method</li>
<li><strong>Your plugin</strong> - This refers to your plugin, the one that uses the CommandAPI and wants to add compatibility to a target plugin</li>
</ul>
<hr />
<h2><a class="header" href="#entire-plugins" id="entire-plugins">Entire plugins</a></h2>
<p>To register all commands that are declared by a target plugin, the <code>Converter.convert(Plugin)</code> method can be used. This attempts to register all commands declared in a target plugin's <code>plugin.yml</code> file, as well as any aliases or permissions stated in the <code>plugin.yml</code> file.</p>
<div class="example">
<h3><a class="header" href="#example---converting-commands-for-a-target-plugin" id="example---converting-commands-for-a-target-plugin">Example - Converting commands for a target plugin</a></h3>
<p>Say you have some <code>plugin.yml</code> file for a target plugin that adds some basic functionality to a server. The target plugin in this example is called &quot;TargetPlugin&quot;:</p>
<pre><code class="language-yaml">name: TargetPlugin
main: some.random.package.Main
version: 1.0
commands:
  gmc:
    aliases: gm1
  gms:
  i:
    permission: item.permission
</code></pre>
<p>As you can see, it declares 3 commands: <code>/gmc</code>, <code>/gms</code> and <code>/i</code>. We can now begin writing your plugin that uses the CommandAPI converter. We will call this plugin &quot;YourPlugin&quot;:</p>
<pre><code class="language-java">public class YourPlugin extends JavaPlugin {
    
    @Override
    public void onEnable() {
        Converter.convert(Bukkit.getPluginManager().getPlugin(&quot;TargetPlugin&quot;));
        //Other code goes here...
    }
    
}
</code></pre>
<p>When this is run, the commands <code>/gmc</code>, <code>/gm1</code>, <code>/gms</code> and <code>/i</code> will all be registered by the CommandAPI.</p>
</div>
<hr />
<h2><a class="header" href="#only-specific-commands" id="only-specific-commands">Only specific commands</a></h2>
<p>In addition to converting all commands from a target plugin, the CommandAPI allows you to convert single commands at a time using the following methods from the <code>Converter</code> class:</p>
<pre><code class="language-java">public static convert(Plugin plugin, String cmdName);
public static convert(Plugin plugin, String cmdName, List&lt;Argument&gt; arguments);
public static convert(Plugin plugin, String cmdName, Argument... arguments);
</code></pre>
<p>In these commands, the <code>plugin</code> refers to the plugin which has the command you want to convert and <code>cmdName</code> is the name of the command declared in the target plugin's <code>plugin.yml</code> file (just the main command, not the aliases!).</p>
<p>The <code>List&lt;Argument&gt;</code> or <code>Argument...</code> can be used to provide argument checks that lets you apply the command UI to a bukkit command.</p>
<div class="example">
<h3><a class="header" href="#example---converting-essentialsxs-speed-command-1" id="example---converting-essentialsxs-speed-command-1">Example - Converting EssentialsX's speed command</a></h3>
<p>Say we want to convert EssentialsX's <code>/speed</code> command using the CommandAPI. The <code>plugin.yml</code> entry for the <code>/speed</code> command is the following:</p>
<pre><code class="language-yaml">  speed:
    description: Change your speed limits.
    usage: /&lt;command&gt; [type] &lt;speed&gt; [player]
    aliases: [flyspeed,eflyspeed,fspeed,efspeed,espeed,walkspeed,ewalkspeed,wspeed,ewspeed]
</code></pre>
<p>From this, we can determine that there are the following commands, where &quot;walk&quot; and &quot;fly&quot; are the different types that the command can take:</p>
<pre><code>/speed &lt;speed&gt;
/speed &lt;speed&gt; &lt;target&gt;
/speed &lt;walk/fly&gt; &lt;speed&gt;
/speed &lt;walk/fly&gt; &lt;speed&gt; &lt;target&gt;
</code></pre>
<p>With the EssentialsX plugin, the <code>&lt;speed&gt;</code> value can only take numbers between 0 and 10. As such, we'll ensure to apply these limits using the <code>IntegerArgument</code>. In addition, since the speed type can only be &quot;walk&quot; or &quot;fly&quot;, we'll add that to our converter as well using a <code>MultiLiteralArgument</code>:</p>
<pre><code class="language-java">Plugin essentials = Bukkit.getPluginManager().getPlugin(&quot;Essentials&quot;);

// /speed &lt;speed&gt;
Converter.convert(essentials, &quot;speed&quot;, new IntegerArgument(&quot;speed&quot;, 0, 10));

// /speed &lt;target&gt;
Converter.convert(essentials, &quot;speed&quot;, new PlayerArgument(&quot;target&quot;));

// /speed &lt;walk/fly&gt; &lt;speed&gt;
Converter.convert(essentials, &quot;speed&quot;, 
	new MultiLiteralArgument(&quot;walk&quot;, &quot;fly&quot;), 
	new IntegerArgument(&quot;speed&quot;, 0, 10)
	);

// /speed &lt;walk/fly&gt; &lt;speed&gt; &lt;target&gt;
Converter.convert(essentials, &quot;speed&quot;, 
	new MultiLiteralArgument(&quot;walk&quot;, &quot;fly&quot;), 
	new IntegerArgument(&quot;speed&quot;, 0, 10), 
	new PlayerArgument(&quot;target&quot;)
	);
</code></pre>
<p><img src="./images/speed.gif" alt="" /></p>
</div>
<h1><a class="header" href="#internal-commandapi" id="internal-commandapi">Internal CommandAPI</a></h1>
<p>The CommandAPI does a lot of stuff &quot;behind the scenes&quot;. This internal CommandAPI section will go into detail about what the CommandAPI does, how it's implemented and why it has been implemented like that.</p>
<hr />
<h2><a class="header" href="#argument-identifiers" id="argument-identifiers">Argument identifiers</a></h2>
<p>The CommandAPI's arguments are basically representations of the different arguments that the Minecraft Command Data protocol handles. These are outlined in the table below:</p>
<table><thead><tr><th>Identifier</th><th>CommandAPI argument</th></tr></thead><tbody>
<tr><td><code>brigadier:bool</code></td><td><a href="./primitivearguments.html#boolean-arguments"><code>BooleanArgument</code></a></td></tr>
<tr><td><code>brigadier:double</code></td><td><a href="./primitivearguments.html#numerical-arguments"><code>DoubleArgument</code></a></td></tr>
<tr><td><code>brigadier:float</code></td><td><a href="./primitivearguments.html#numerical-arguments"><code>FloatArgument</code></a></td></tr>
<tr><td><code>brigadier:integer</code></td><td><a href="./primitivearguments.html#numerical-arguments"><code>IntegerArgument</code></a></td></tr>
<tr><td><code>brigadier:long</code></td><td><a href="./primitivearguments.html#numerical-arguments"><code>LongArgument</code></a></td></tr>
<tr><td><code>brigadier:string</code></td><td><a href="./stringarguments.html#string-argument"><code>StringArgument</code></a><br /><a href="./stringarguments.html#text-argument"><code>TextArgument</code></a><br /><a href="./stringarguments.html#greedy-string-argument"><code>GreedyStringArgument</code></a><br /><a href="./customarguments.html"><code>CustomArgument&lt;T&gt;</code></a></td></tr>
<tr><td><code>minecraft:angle</code></td><td><a href="./angleargument.html"><code>AngleArgument</code></a></td></tr>
<tr><td><code>minecraft:block_pos</code></td><td><a href="./locationargument.html#location-3d-space"><code>LocationArgument</code></a><br />(<code>LocationType.BLOCK_POSITION</code>)</td></tr>
<tr><td><code>minecraft:block_predicate</code></td><td><a href="./blockpredicateargs.html"><code>BlockPredicateArgument</code></a></td></tr>
<tr><td><code>minecraft:block_state</code></td><td><a href="./blockstatearguments.html"><code>BlockStateArgument</code></a></td></tr>
<tr><td><code>minecraft:color</code></td><td><a href="./chatarguments.html#chat-color-argument"><code>ChatColorArgument</code></a></td></tr>
<tr><td><code>minecraft:column_pos</code></td><td><a href="./locationargument.html#location-2d-space"><code>Location2DArgument</code></a> <br />(<code>LocationType.BLOCK_POSITION</code>)</td></tr>
<tr><td><code>minecraft:component</code></td><td><a href="./chatarguments.html#chat-component-argument"><code>ChatComponentArgument</code></a></td></tr>
<tr><td><code>minecraft:dimension</code></td><td><a href="./environmentargs.html"><code>EnvironmentArgument</code></a></td></tr>
<tr><td><code>minecraft:entity</code></td><td><a href="./entityarguments.html#entity-selector-argument"><code>EntitySelectorArgument</code></a></td></tr>
<tr><td><code>minecraft:entity_anchor</code></td><td></td></tr>
<tr><td><code>minecraft:entity_summon</code></td><td><a href="./entityarguments.html#entity-type-argument"><code>EntityTypeArgument</code></a></td></tr>
<tr><td><code>minecraft:float_range</code></td><td><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>FloatRangeArgument</code></a></td></tr>
<tr><td><code>minecraft:function</code></td><td><a href="./functionwrapper.html"><code>FunctionArgument</code></a></td></tr>
<tr><td><code>minecraft:game_profile</code></td><td><a href="./entityarguments.html#player-argument"><code>PlayerArgument</code></a></td></tr>
<tr><td><code>minecraft:int_range</code></td><td><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>IntegerRangeArgument</code></a></td></tr>
<tr><td><code>minecraft:item_enchantment</code></td><td><a href="./enchantmentargument.html"><code>EnchantmentArgument</code></a></td></tr>
<tr><td><code>minecraft:item_predicate</code></td><td><a href="./itemstackpredicateargs.html"><code>ItemStackPredicateArgument</code></a></td></tr>
<tr><td><code>minecraft:item_slot</code></td><td></td></tr>
<tr><td><code>minecraft:item_stack</code></td><td><a href="./itemstackarguments.html"><code>ItemStackArgument</code></a></td></tr>
<tr><td><code>minecraft:message</code></td><td><a href="./chatarguments.html#chat-argument"><code>ChatArgument</code></a></td></tr>
<tr><td><code>minecraft:mob_effect</code></td><td><a href="./potionarguments.html"><code>PotionEffectArgument</code></a></td></tr>
<tr><td><code>minecraft:nbt</code></td><td></td></tr>
<tr><td><code>minecraft:nbt_compound_tag</code></td><td><a href="./nbtarguments.html"><code>NBTCompoundArgument</code></a></td></tr>
<tr><td><code>minecraft:nbt_path</code></td><td></td></tr>
<tr><td><code>minecraft:nbt_tag</code></td><td></td></tr>
<tr><td><code>minecraft:objective</code></td><td><a href="./objectivearguments.html#objective-argument"><code>ObjectiveArgument</code></a></td></tr>
<tr><td><code>minecraft:objective_criteria</code></td><td><a href="./objectivearguments.html#objective-criteria-argument"><code>ObjectiveCriteriaArgument</code></a></td></tr>
<tr><td><code>minecraft:operation</code></td><td><a href="./mathoperationarguments.html"><code>MathOperationArgument</code></a></td></tr>
<tr><td><code>minecraft:particle</code></td><td><a href="./particlearguments.html"><code>ParticleArgument</code></a></td></tr>
<tr><td><code>minecraft:resource_location</code></td><td><a href="./advancementargument.html"><code>AdvancementArgument</code></a><br /><a href="./biomeargument.html"><code>BiomeArgument</code></a><br /><a href="./customarguments.html"><code>CustomArgument&lt;T&gt;</code></a><br /><a href="./loottableargument.html"><code>LootTableArgument</code></a><br /><a href="./recipeargument.html"><code>RecipeArgument</code></a><br /><a href="./soundargument.html"><code>SoundArgument</code></a></td></tr>
<tr><td><code>minecraft:rotation</code></td><td><a href="./rotationargs.html"><code>RotationArgument</code></a></td></tr>
<tr><td><code>minecraft:score_holder</code></td><td><a href="./scoreboardarguments.html#score-holder-argument"><code>ScoreHolderArgument</code></a></td></tr>
<tr><td><code>minecraft:scoreboard_slot</code></td><td><a href="./scoreboardarguments.html#scoreboard-slot-argument"><code>ScoreboardSlotArgument</code></a></td></tr>
<tr><td><code>minecraft:swizzle</code></td><td><a href="./axisarg.html"><code>AxisArgument</code></a></td></tr>
<tr><td><code>minecraft:team</code></td><td><a href="./teamarguments.html"><code>TeamArgument</code></a></td></tr>
<tr><td><code>minecraft:time</code></td><td><a href="./timeargs.html"><code>TimeArgument</code></a></td></tr>
<tr><td><code>minecraft:uuid</code></td><td><a href="./uuidargs.html"><code>UUIDArgument</code></a></td></tr>
<tr><td><code>minecraft:vec2</code></td><td><a href="./locationargument.html#location-2d-space"><code>Location2DArgument</code></a><br />(<code>LocationType.PRECISE_POSITION</code>)</td></tr>
<tr><td><code>minecraft:vec3</code></td><td><a href="./locationargument.html#location-3d-space"><code>LocationArgument</code></a><br />(<code>LocationType.PRECISE_POSITION</code>)</td></tr>
</tbody></table>
<p>There are a few arguments that aren't implemented. Here's why:</p>
<ul>
<li>
<p><code>minecraft:entity_anchor</code> - This argument only has two values: <code>eyes</code> and <code>feet</code>. It's incredibly unnecessary for any other purpose and is easier to implement with a <code>MultiLiteralArgument</code>.</p>
</li>
<li>
<p><code>minecraft:item_slot</code> - Bukkit's implementation of item slot numbers differs very wildly to Minecraft's implementation of item slot numbers. This difference makes it near-impossible to have a suitable middle-ground for item slot numbers that ensures that invalid numbers cannot be passed to the wrong inventory type. An implementation of this would require a rewrite of the current system to maintain proper inventory slot access safety.</p>
</li>
<li>
<p><code>minecraft:nbt</code>, <code>minecraft:nbt_path</code>, <code>minecraft:nbt_tag</code> - You've got the <code>NBTCompoundArgument</code>, that's good enough, right? ¯\_(ツ)_/¯</p>
</li>
</ul>
<hr />
<h2><a class="header" href="#reloading-datapacks" id="reloading-datapacks">Reloading datapacks</a></h2>
<p>During the initialization of Minecraft 1.16+ servers, the CommandAPI uses a custom datapack reloading sequence as opposed to the normal Vanilla Minecraft datapack reloading method. The CommandAPI's method uses the server's current command dispatcher object as opposed to a new one, which allows datapacks to use commands registered by the CommandAPI. This can be invoked using the following method:</p>
<pre><code class="language-java">CommandAPI.reloadDatapacks();
</code></pre>
<h1><a class="header" href="#brigadier--commandapi" id="brigadier--commandapi">Brigadier + CommandAPI</a></h1>
<p>So far, we've been using only the CommandAPI to register commands. As a result, this makes the CommandAPI's features limited by whatever the CommandAPI has implemented. To push past these limits, the CommandAPI includes some extra methods to help with invoking brigadier methods. Of course, to use these methods, brigadier is required. The brigadier dependency's installation instructions can be found <a href="https://github.com/Mojang/brigadier#installation">here</a>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>For those that are unaware, <a href="https://github.com/Mojang/brigadier">brigadier</a> is Mojang's command parser and dispatching framework. This is basically what the CommandAPI wraps around and is the main underlying source of its functionality.</p>
</blockquote>
<p>The CommandAPI has been designed in such a way that you shouldn't have to access NMS in order to make use of the more &quot;advanced&quot; arguments and features - if you find that NMS is required to do something, <a href="https://github.com/JorelAli/CommandAPI/issues/new/choose">please make a new issue</a>!</p>
<hr />
<h2><a class="header" href="#brigadier-support-functions" id="brigadier-support-functions">Brigadier support functions</a></h2>
<p>The CommandAPI offers the following methods in the <code>dev.jorel.commandapi.Brigadier</code> class:</p>
<pre><code class="language-java">public static CommandDispatcher getCommandDispatcher();
public static RootCommandNode getRootNode();
public static LiteralArgumentBuilder fromLiteralArgument(LiteralArgument literalArgument);
public static RedirectModifier fromPredicate(BiPredicate&lt;CommandSender, Object[]&gt; predicate, List&lt;Argument&gt; args);
public static Command fromCommand(CommandAPICommand command);
public static RequiredArgumentBuilder fromArgument(List&lt;Argument&gt; args, String nodeName);
public static RequiredArgumentBuilder fromArgument(Argument argument);
public static SuggestionProvider toSuggestions(String nodeName, List&lt;Argument&gt; args);
</code></pre>
<p>Briefly, here's what each of these functions do (you can view the JavaDocs for more information):</p>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody>
<tr><td><code>getCommandDispatcher</code></td><td>Returns the Minecraft command dispatcher graph</td></tr>
<tr><td><code>getRootNode</code></td><td>Returns the root node of the command dispatcher.<br>This is equivalent to using<br /><code>getCommandDispatcher().getRoot();</code></td></tr>
<tr><td><code>fromLiteralArgument</code></td><td>Creates a <code>LiteralArgumentBuilder</code> from a <code>LiteralArgument</code></td></tr>
<tr><td><code>fromPredicate</code></td><td>Converts a predicate and some arguments into a <code>RedirectModifier</code>. This can be used for the <code>fork</code> method in brigadier's <code>ArgumentBuilder</code></td></tr>
<tr><td><code>fromCommand</code></td><td>Converts a <code>CommandAPICommand</code> into a brigadier <code>Command</code> object</td></tr>
<tr><td><code>fromArgument</code></td><td>Converts an argument, or a list of arguments, into a <code>RequiredArgumentBuilder</code></td></tr>
<tr><td><code>toSuggestions</code></td><td>Converts an argument's suggestions into brigadier's <code>SuggestionProvider</code>, with a list of previously declared arguments</td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#examples-1" id="examples-1">Examples</a></h2>
<p>I hope these examples help understand how the CommandAPI can help with registering more &quot;powerful&quot; commands with the use of brigadier as well! Please bear with with it - these examples can be long, but I'm certain that they've been explained well and will be useful!</p>
<div class="example">
<h3><a class="header" href="#example---adding-a-predicate-to-the-execute-command" id="example---adding-a-predicate-to-the-execute-command">Example - Adding a predicate to the 'execute' command</a></h3>
<p>Say we wanted to add a predicate to the <code>/execute</code> command. In this example, we'll create a predicate which handles random chances. To illustrate this, we want to be able to run commands such as:</p>
<pre><code>/execute if randomchance 1 4 run say Hello!
</code></pre>
<p>In this scenario, if we ran this command, we would expect &quot;Hello!&quot; to appear in the chat with a \(\frac{1}{4}\) chance. In particular, this is what we're trying to achieve:</p>
<ul>
<li>We want to create a predicate (true/false value) for the following syntax:
<pre><code>randomchance &lt;numerator&gt; &lt;denominator&gt;
</code></pre>
</li>
</ul>
<ul>
<li>
<p>We also want this predicate to come <em>after</em> <code>execute if</code>:</p>
<p>\[
\texttt{execute}\\ 
\downarrow\\
\texttt{if}\\
\downarrow\\
\texttt{randomchance &lt;numerator}\texttt{&gt; &lt;denominator}\texttt{&gt;}
\]</p>
</li>
<li>
<p>After entering our predicate, we want to route back to <code>execute</code> (because the argument after <code>execute</code> is <code>run</code>, which is used in our example command above):</p>
<p>\[
\texttt{execute}\\ 
\downarrow\\
\texttt{if}\\
\downarrow\\
\texttt{randomchance &lt;numerator}\texttt{&gt; &lt;denominator}\texttt{&gt;}\\
\downarrow\\
\texttt{execute}
\]</p>
</li>
</ul>
<hr />
<h4><a class="header" href="#writing-the-code" id="writing-the-code">Writing the code</a></h4>
<p>Now that we've established what we want, we can finally begin writing the code! First we want to create a literal <code>randomchance</code>. It's a literal because literal values don't change (similar to say <code>run</code> or <code>if</code> from the <code>/execute</code> command). To create a literal, we'll use the <code>fromLiteralArgument</code> method described above, and then build it using the <code>.build()</code> method:</p>
<pre><code class="language-java">//Register literal &quot;randomchance&quot;
LiteralCommandNode randomChance = Brigadier.fromLiteralArgument(new LiteralArgument(&quot;randomchance&quot;)).build();
</code></pre>
<p>With that completed, we can now create our &quot;argument&quot; to this predicate. To do this, we'll use the regular declaration of arguments that we would normally use for commands. In this example, because we're computing \(\frac{numerator}{denominator}\), we want our numerator to be 0 or greater and our denominator to be 1 or greater (we don't want any negative numbers or division by zero!):</p>
<pre><code class="language-java">//Declare arguments like normal
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new IntegerArgument(&quot;numerator&quot;, 0));
arguments.add(new IntegerArgument(&quot;denominator&quot;, 1));
</code></pre>
<p>Now we're going to get into the very nitty-gritty part - the predicate declaration. First, we'll create some variables <code>numerator</code> and <code>denominator</code> to represent the brigadier instances of these arguments. This can be handled by using the <code>Brigadier.argBuildOf</code> function:</p>
<pre><code class="language-java">ArgumentBuilder numerator = Brigadier.fromArgument(arguments, &quot;numerator&quot;);
ArgumentBuilder denominator = Brigadier.fromArgument(arguments, &quot;denominator&quot;)
</code></pre>
<p>Now we'll define our predicate. Since this is sort of a &quot;meta-command&quot; (it directly affects the outcome of the <code>run</code> command), we need to use the <code>ArgumentBuilder</code>'s <code>fork</code> method. Remember that after we run this predicate, we want to link back to <code>execute</code> again, so our first argument is the <code>CommandNode</code> for <code>execute</code>, which we can get using <code>Brigadier.getRootNode().getChild(&quot;execute&quot;)</code>. Then, we can simply use <code>Brigadier.fromPredicate</code> to finish our declaration:</p>
<pre><code class="language-java">ArgumentBuilder denominator = Brigadier.fromArgument(arguments, &quot;denominator&quot;)
    //Fork redirecting to &quot;execute&quot; and state our predicate
    .fork(Brigadier.getRootNode().getChild(&quot;execute&quot;), Brigadier.fromPredicate((sender, args) -&gt; {
        //Parse arguments like normal
        int num = (int) args[0];
        int denom = (int) args[1];
        
        //Return boolean with a num/denom chance
        return Math.ceil(Math.random() * (double) denom) &lt;= (double) num;
    }, arguments));
</code></pre>
<p>Finally, we can now link everything up. We know that <code>numerator</code> comes first, <strong>then</strong> <code>denominator</code>, so we have to have <code>numerator.then(denominator)</code>. We also know that these arguments are the <strong>children</strong> of the <code>randomChance</code> literal, so we use the following code to state all of this:</p>
<pre><code class="language-java">//Add &lt;numerator&gt; &lt;denominator&gt; as a child of randomchance
randomChance.addChild(numerator.then(denominator).build());
</code></pre>
<p>Finally, we &quot;register&quot; the command. In this case, we're actually just adding the <code>randomChance</code> node under \(\texttt{execute}\rightarrow\texttt{if}\), which we can add using the following code:</p>
<pre><code class="language-java">//Add (randomchance &lt;numerator&gt; &lt;denominator&gt;) as a child of (execute -&gt; if)
Brigadier.getRootNode().getChild(&quot;execute&quot;).getChild(&quot;if&quot;).addChild(randomChance);
</code></pre>
<hr />
<h4><a class="header" href="#code-summary" id="code-summary">Code summary</a></h4>
<p>So, hopefully that wasn't too confusing! If you're still lost, here's the whole code that we wrote:</p>
<pre><code class="language-java">//Register literal &quot;randomchance&quot;
LiteralCommandNode randomChance = Brigadier.fromLiteralArgument(new LiteralArgument(&quot;randomchance&quot;)).build();

//Declare arguments like normal
List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new IntegerArgument(&quot;numerator&quot;, 0));
arguments.add(new IntegerArgument(&quot;denominator&quot;, 1));

//Get brigadier argument objects
ArgumentBuilder numerator = Brigadier.fromArgument(arguments, &quot;numerator&quot;);
ArgumentBuilder denominator = Brigadier.fromArgument(arguments, &quot;denominator&quot;)
    //Fork redirecting to &quot;execute&quot; and state our predicate
    .fork(Brigadier.getRootNode().getChild(&quot;execute&quot;), Brigadier.fromPredicate((sender, args) -&gt; {
        //Parse arguments like normal
        int num = (int) args[0];
        int denom = (int) args[1];
        
        //Return boolean with a num/denom chance
        return Math.ceil(Math.random() * (double) denom) &lt;= (double) num;
    }, arguments));

//Add &lt;numerator&gt; &lt;denominator&gt; as a child of randomchance
randomChance.addChild(numerator.then(denominator).build());

//Add (randomchance &lt;numerator&gt; &lt;denominator&gt;) as a child of (execute -&gt; if)
Brigadier.getRootNode().getChild(&quot;execute&quot;).getChild(&quot;if&quot;).addChild(randomChance);
</code></pre>
</div>
<h1><a class="header" href="#predicate-tips" id="predicate-tips">Predicate tips</a></h1>
<p>In our <a href="./requirements.html#example---a-party-creation-and-teleportation-system">example for creating a party system</a>, we ended up having lots of code repetition. In our party creation command, we had the following code:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();

// The &quot;create&quot; literal, with a requirement that a player must have a party
arguments.add(new LiteralArgument(&quot;create&quot;)
	.withRequirement(sender -&gt; {
		
		return !partyMembers.containsKey(((Player) sender).getUniqueId());
		
	}));

arguments.add(new StringArgument(&quot;partyName&quot;));
</code></pre>
<p>And for our party teleportation command, we had the following code:</p>
<pre><code class="language-java">arguments = new ArrayList&lt;&gt;();
arguments.add(new LiteralArgument(&quot;tp&quot;)
	.withRequirement(sender -&gt; {
		
		return partyMembers.containsKey(((Player) sender).getUniqueId());
        
	}));
</code></pre>
<p>We can simplify this code by declaring the predicate:</p>
<pre><code class="language-java">Predicate&lt;CommandSender&gt; testIfPlayerHasParty = sender -&gt; {
    return partyMembers.containsKey(((Player) sender).getUniqueId());
};
</code></pre>
<p>Now, we can use the predicate <code>testIfPlayerHasParty</code> in our code for creating a party. Since we want to apply the &quot;not&quot; (<code>!</code>) operator to this predicate, we can use <code>.negate()</code> to invert the result of our predicate:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new LiteralArgument(&quot;create&quot;).withRequirement(testIfPlayerHasParty.negate()));
arguments.add(new StringArgument(&quot;partyName&quot;));
</code></pre>
<p>And we can use it again for our code for teleporting to party members:</p>
<pre><code class="language-java">arguments = new ArrayList&lt;&gt;();
arguments.add(new LiteralArgument(&quot;tp&quot;).withRequirement(testIfPlayerHasParty));
</code></pre>
<h1><a class="header" href="#upgrading-guide" id="upgrading-guide">Upgrading guide</a></h1>
<h2><a class="header" href="#from-version-4x-to-50" id="from-version-4x-to-50">From version 4.x to 5.0</a></h2>
<h3><a class="header" href="#argument-registration" id="argument-registration">Argument registration</a></h3>
<p><code>LinkedHashMap</code> is no longer used for argument registration. Instead, use a <code>List</code>, and put the argument's &quot;prompt&quot; as the first parameter in the argument's constructor. For example:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new PlayerArgument())
arguments.put(&quot;location&quot;, new LocationArgument(LocationType.BLOCK_POSITION));

new CommandAPICommand(&quot;teleport&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Teleport &lt;target&gt; to &lt;location&gt;
    })
    .register();
</code></pre>
<p>\[\downarrow\]</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
arguments.add(new PlayerArgument(&quot;target&quot;));
arguments.add(new LocationArgument(&quot;location&quot;, LocationType.BLOCK_POSITION));

new CommandAPICommand(&quot;teleport&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Teleport &lt;target&gt; to &lt;location&gt;
    })
    .register();
</code></pre>
<p>Alternatively, you can declare them directly in the command's declaration so you don't have to construct a list:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;teleport&quot;)
    .withArguments(new PlayerArgument(&quot;target&quot;))
    .withArguments(new LocationArgument(&quot;location&quot;, LocationType.BLOCK_POSITION))
    .executes((sender, args) -&gt; {
        //Teleport &lt;target&gt; to &lt;location&gt;
    })
    .register();
</code></pre>
<p>Alternatively, you can declare it in one line:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;teleport&quot;)
    .withArguments(new PlayerArgument(&quot;target&quot;), new LocationArgument(&quot;location&quot;, LocationType.BLOCK_POSITION))
    .executes((sender, args) -&gt; {
        //Teleport &lt;target&gt; to &lt;location&gt;
    })
    .register();
</code></pre>
<h3><a class="header" href="#method-changes" id="method-changes">Method changes</a></h3>
<p>Some of the <code>Brigadier</code> methods were changed:</p>
<pre><code class="language-java">LiteralCommandNode registerNewLiteral(String name);
RequiredArgumentBuilder argBuildOf(LinkedHashMap&lt;String, Argument&gt; args, String value);
RequiredArgumentBuilder argBuildOf(String prompt, Argument argument);
</code></pre>
<p>\[\downarrow\]</p>
<pre><code class="language-java">LiteralArgumentBuilder fromLiteralArgument(LiteralArgument literalArgument);
RequiredArgumentBuilder fromArgument(List&lt;Argument&gt; args, String nodeName);
RequiredArgumentBuilder fromArgument(Argument argument);
</code></pre>
<p>In particular, the <code>fromLiteralArgument</code> now takes in a <code>LiteralArgument</code> and returns a <code>LiteralArgumentBuilder</code>. To convert from a <code>LiteralArgumentBuilder</code> to the <code>LiteralCommandNode</code>, you can run the <code>.build()</code> method.</p>
<hr />
<h2><a class="header" href="#from-version-3x-to-40" id="from-version-3x-to-40">From version 3.x to 4.0</a></h2>
<p>The maven repository url has changed:</p>
<p>Instead of being:</p>
<pre><code>https://raw.githubusercontent.com/JorelAli/1.13-Command-API/mvn-repo/1.13CommandAPI/
</code></pre>
<p>You must now use:</p>
<pre><code class="language-xml">https://raw.githubusercontent.com/JorelAli/CommandAPI/mvn-repo/
</code></pre>
<p>This information can be viewed in section <a href="./quickstart.html">3. Setting up your development environment</a>. <em>(Don't worry if you forget, it <strong>should</strong> work as normal nonetheless!)</em></p>
<hr />
<h2><a class="header" href="#from-version-23-to-30" id="from-version-23-to-30">From version 2.3 to 3.0</a></h2>
<p>The CommandAPI's upgrade from version 2.3 to 3.0 is very intense and various refactoring operations took place, which means that plugins that implement the CommandAPI version 2.3 or will not to work with the CommandAPI version 3.0. This page outlines the few major changes and points you to the various pages in the documentation that covers how to use version 3.0.</p>
<hr />
<h3><a class="header" href="#imports--renaming" id="imports--renaming">Imports &amp; Renaming</a></h3>
<p>The default package name has been changed. Instead of being registered under the <code>io.github.jorelali</code> package, the CommandAPI has been moved to the <code>dev.jorel</code> package:</p>
<p>\[\texttt{io.github.jorelali.commandapi.api}\rightarrow\texttt{dev.jorel.commandapi}\]</p>
<p>To organise classes with other classes of similar functions, new packages have been introduced. These can be fully explored using the <a href="https://www.jorel.dev/CommandAPI/javadocs/html/annotated.html">new JavaDocs</a></p>
<hr />
<h3><a class="header" href="#removed-classes--alternatives" id="removed-classes--alternatives">Removed classes &amp; Alternatives</a></h3>
<p>To reduce redundancies, the CommandAPI removed a few classes:</p>
<table><thead><tr><th>Removed class</th><th>Alternative</th></tr></thead><tbody>
<tr><td><code>SuggestedStringArgument</code></td><td>Use <code>.overrideSuggestions(String[])</code> for the relevant argument, as described <a href="./arguments.html#overriding-argument-suggestions">here</a></td></tr>
<tr><td><code>DefinedCustomArguments</code> for Objectives</td><td>Use <a href="./objectivearguments.html"><code>ObjectiveArgument</code></a></td></tr>
<tr><td><code>DefinedCustomArguments</code> for Teams</td><td>Use <a href="./teamarguments.html"><code>TeamArgument</code></a></td></tr>
</tbody></table>
<hr />
<h3><a class="header" href="#command-registration-1" id="command-registration-1">Command registration</a></h3>
<p>The way that commands are registered has been completely changed. It is highly recommended to switch to the new system, which is described <a href="./commandregistration.html"><strong>here</strong></a>.</p>
<p>The following methods have been removed:</p>
<pre><code class="language-java">CommandAPI.getInstance().register(String, LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, String[], LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, CommandExecutor);

CommandAPI.getInstance().register(String, LinkedHashMap, ResultingCommandExecutor);
CommandAPI.getInstance().register(String, String[], LinkedHashMap, ResultingCommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, LinkedHashMap, ResultingCommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, ResultingCommandExecutor);
</code></pre>
<p>Additionally, the CommandAPI is no longer accessed by using <code>CommandAPI.getInstance()</code>. This has been replaced with static methods that can be accessed without an instance of the CommandAPI, so you can use the following:</p>
<pre><code class="language-java">CommandAPI.fail(String command);
CommandAPI.canRegister();
CommandAPI.unregister(String command);
CommandAPI.unregister(String command, boolean force);
</code></pre>
<h1><a class="header" href="#incompatible-version-information" id="incompatible-version-information">Incompatible version information</a></h1>
<p>There are a few arguments that are incompatible with various versions of Minecraft. This page outlines the full list of incompatibilities that the CommandAPI has with what versions of Minecraft.</p>
<hr />
<h2><a class="header" href="#argument-changes-with-respect-to-minecraft-version" id="argument-changes-with-respect-to-minecraft-version">Argument changes with respect to Minecraft version</a></h2>
<h3><a class="header" href="#angleargument" id="angleargument">AngleArgument</a></h3>
<p>Incompatible with Minecraft versions <strong>less than 1.16.2</strong> (1.13.x, 1.14.x, 1.15.x, 1.16, 1.16.1)</p>
<h3><a class="header" href="#biomeargument" id="biomeargument">BiomeArgument</a></h3>
<p>Incompatible with Minecraft versions <strong>less than 1.16</strong> <em>(1.13.x, 1.14.x, 1.15.x)</em></p>
<h3><a class="header" href="#chatargument" id="chatargument">ChatArgument</a></h3>
<p>Incompatible with Minecraft version <strong>1.16.1</strong> (Works on 1.16.2)</p>
<h3><a class="header" href="#environmentargument" id="environmentargument">EnvironmentArgument</a></h3>
<p>Incompatible with Minecraft version <strong>1.13</strong> (Works on 1.13.1 and 1.13.2)</p>
<h3><a class="header" href="#locationargument2d" id="locationargument2d">LocationArgument2D</a></h3>
<p>If you're using LocationArgument2D with <code>LocationType.PRECISE_POSITION</code>, then it is incompatible with Minecraft version <strong>1.13</strong> (Works on 1.13.1 and 1.13.2)</p>
<h3><a class="header" href="#recipeargument" id="recipeargument">RecipeArgument</a></h3>
<p>If you use Minecraft versions <strong>less than 1.15</strong>, this argument will return a <code>Recipe</code>. If you are using Minecraft version 1.15 or greater, this argument will return a <code>ComplexRecipe</code> (which is a subclass of <code>Recipe</code>).</p>
<h3><a class="header" href="#timeargument" id="timeargument">TimeArgument</a></h3>
<p>Incompatible with Minecraft versions <strong>less than 1.14</strong> <em>(1.13.x)</em></p>
<h3><a class="header" href="#uuidargument" id="uuidargument">UUIDArgument</a></h3>
<p>Incompatible with Minecraft versions <strong>less than 1.16</strong> <em>(1.13.x, 1.14.x, 1.15.x)</em></p>
<hr />
<h2><a class="header" href="#commandapi-behavior-with-respect-to-minecraft-version" id="commandapi-behavior-with-respect-to-minecraft-version">CommandAPI behavior with respect to Minecraft version</a></h2>
<h3><a class="header" href="#minecraft-version-116-and-beyond" id="minecraft-version-116-and-beyond">Minecraft version 1.16 and beyond</a></h3>
<p>In Minecraft version <strong>1.16</strong>, the way datapacks were loaded changed in such a way that the CommandAPI had to put in additional countermeasures to provide full support to it. To illustrate this, this was the previous loading sequence for Bukkit servers in Minecraft 1.15:</p>
<p>\[\texttt{Server loads}\rightarrow\texttt{Plugins load}\rightarrow\texttt{Datapacks load}\rightarrow\texttt{Server finishes loading}\]</p>
<p>Instead however, Minecraft 1.16 changed the loading sequence to the following:</p>
<p>\[\texttt{Server loads}\rightarrow\texttt{Datapacks load}\rightarrow\texttt{Plugins load}\rightarrow\texttt{Server finishes loading}\]</p>
<p>Because the CommandAPI used to register vanilla Minecraft commands <em>before</em> datapacks (and thus, custom Minecraft functions), it was possible to register custom commands that can be used in functions. With this new loading sequence change in Minecraft 1.16, this meant that datapacks load first before the CommandAPI does, so custom commands are not registered and functions with custom commands would fail to load.</p>
<p>To resolve this, the CommandAPI reloads datapacks <em>and recipes</em> at the end:</p>
<p>\begin{align}
&amp;\quad\texttt{Server loads} \\
\rightarrow&amp;\quad\texttt{Datapacks load} \\
\rightarrow&amp;\quad\texttt{Plugins load} \\
\rightarrow&amp;\quad\texttt{Server finishes loading} \\
\rightarrow&amp;\quad\texttt{Datapacks are reloaded} &amp;&amp; \texttt{(by the CommandAPI)} \\
\rightarrow&amp;\quad\texttt{Recipes are reloaded} &amp;&amp; \texttt{(by the CommandAPI)}
\end{align}</p>
<p>By doing this, this means:</p>
<ul>
<li>Custom functions from datapacks are loaded twice</li>
<li>Recipes are reloaded twice, <em>including</em> recipes defined by other plugins</li>
</ul>
<p>Although this sounds pretty bad (since reloading these things twice can be time consuming, thus contributing to the server start-up time), it is the only way to make custom functions work in Minecraft 1.16 and beyond.</p>
<h1><a class="header" href="#troubleshooting" id="troubleshooting">Troubleshooting</a></h1>
<p>This section basically summarizes the list of things that <em>could</em> go wrong with the CommandAPI and how to mitigate these circumstances.</p>
<h2><a class="header" href="#my-suggestions-dont-work-or-update" id="my-suggestions-dont-work-or-update">My suggestions don't work or update</a></h2>
<p>The suggestions need to be deferred so they are evaluated when the user requests it rather than during server start up. See <a href="./argumentsuggestions.html#argument-suggestion-deferral">Argument suggestion deferral</a> which describes this in more detail.</p>
<h2><a class="header" href="#i-encounter-a-nullpointerexception-when-using-bukkits-scoreboard" id="i-encounter-a-nullpointerexception-when-using-bukkits-scoreboard">I encounter a <code>NullPointerException</code> when using Bukkit's scoreboard</a></h2>
<p>Shove the scoreboard access inside a lambda, so it is evaluated when commands are executed rather than when the server loads. For example, use:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
            	
arguments.add(new TeamArgument(&quot;team&quot;).safeOverrideSuggestions(s -&gt;
    Bukkit.getScoreboardManager().getMainScoreboard().getTeams().toArray(new Team[0]))
);
</code></pre>
<p>as opposed to:</p>
<pre><code class="language-java">List&lt;Argument&gt; arguments = new ArrayList&lt;&gt;();
            	
arguments.add(new TeamArgument(&quot;team&quot;).safeOverrideSuggestions(
    Bukkit.getScoreboardManager().getMainScoreboard().getTeams().toArray(new Team[0]))
);
</code></pre>
<h2><a class="header" href="#server-errors-when-loading-datapacks-in-116" id="server-errors-when-loading-datapacks-in-116">Server errors when loading datapacks in 1.16+</a></h2>
<p>If you get an error at the very start of the server's startup sequence along the lines of:</p>
<pre><code class="language-log">[15:57:29] [Worker-Main-5/ERROR]: Failed to load function mycustomnamespace:test
java.util.concurrent.CompletionException: java.lang.IllegalArgumentException: Whilst parsing command on line 2: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]
    at java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source) ~[?:1.8.0_261]
    at java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.CompletableFuture$AsyncSupply.run(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.CompletableFuture$AsyncSupply.exec(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinTask.doExec(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinPool.runWorker(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source) [?:1.8.0_261]
Caused by: java.lang.IllegalArgumentException: Whilst parsing command on line 2: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]
    at net.minecraft.server.v1_16_R1.CustomFunction.a(SourceFile:62) ~[spigot-1.16.1.jar:git-Spigot-758abbe-8dc1da1]
    at net.minecraft.server.v1_16_R1.CustomFunctionManager.a(SourceFile:84) ~[spigot-1.16.1.jar:git-Spigot-758abbe-8dc1da1]
    ... 6 more
</code></pre>
<p>You can safely ignore it - the CommandAPI fixes this later. This is described in more detail <a href="./functions.html#functions-in-116">here</a>.</p>
<h2><a class="header" href="#serverplugin-reloading" id="serverplugin-reloading">Server/Plugin reloading</a></h2>
<p>Due to the implementation of the CommandAPI, the CommandAPI does <strong>not</strong> support plugin reloading for plugins that use the CommandAPI. This includes, but is not limited to:</p>
<ul>
<li>The <code>/reload</code> command which reloads all plugins on the server</li>
<li>Plugin reloading plugins, such as <a href="https://dev.bukkit.org/projects/plugman">PlugMan</a></li>
<li>Any form of plugin enabling/disabling process for plugins which register commands via the CommandAPI</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Plugin reloading gets very complicated with respect to the CommandAPI. Since the loading sequence of Minecraft commands is so picky, reloading the CommandAPI or a plugin which registers commands can cause commands to be re-registered. This can lead to very odd effects, such as command collisions <em>(commands just don't work)</em>, to duplicate commands being registered under different namespaces <em>(e.g. plugins are registered under Bukkit as well as Minecraft)</em>. These effects are not &quot;100% guaranteed&quot; and have only been seen during dodgy tests. In short, <strong>do not enable or reload plugins</strong>, and <strong>absolutely do not reload the server with <code>/reload</code></strong></p>
</blockquote>
<h2><a class="header" href="#players-cannot-connecttimeout-when-joining" id="players-cannot-connecttimeout-when-joining">Players cannot connect/timeout when joining</a></h2>
<p>If players cannot connect, this could be due to the size of the command data packet. To see the resultant packet being sent to players when they log in, enable the <code>create-dispatcher-json: true</code> setting and view the file size of the resultant file. If the file size is abnormally large <em>(Over 2MB is considered very large)</em>, consider reducing the number of <code>LiteralArguments</code> which your plugin uses.</p>
<h2><a class="header" href="#my-issue-isnt-on-here-what-do-i-do" id="my-issue-isnt-on-here-what-do-i-do">My issue isn't on here, what do I do?!</a></h2>
<p>If you've found a bug that isn't solved here, submit a bug report on <a href="https://github.com/JorelAli/CommandAPI/issues/new/choose">the CommandAPI's issues page</a> and I'll try my best to resolve the issue!</p>
<h1><a class="header" href="#afterword" id="afterword">Afterword</a></h1>
<h2 style="text-align: center;">A message from the CommandAPI's author</h2>
<p>Congratulations on making it to the end of the documentation! It's really long, but I did my best to make it the best (Bukkit/Spigot plugin) documentation in existence.</p>
<hr />
<p>My name is Jorel, commonly known by my Minecraft username <em>Skepter</em>. I started the CommandAPI in the summer holidays between my first and second year at university. On the 19th August, 2018 I made my first commit to the CommandAPI project - just a month and a day after Minecraft 1.13 was released.</p>
<p>At the time, I just decided to call it &quot;The 1.13 Command API&quot; - it wasn't the catchiest name out there, but it sort of said what I wanted it to - it's a Command API for Minecraft 1.13, which was the update when the big overhaul to the command system was introduced.</p>
<p>It all started as a simple idea that can be summarized in 3 bullet points:</p>
<ul>
<li>Create an API to use the new command UI that was introduced in Minecraft 1.13</li>
<li>Make it so the developers don't have to understand/use Mojang's brigadier</li>
<li>Make it similar to Bukkit's existing API</li>
</ul>
<hr />
<p>After the release of version 1.2, two days after the initial release, I received my first GitHub issue. This was quite a shock to me - version 1.2 only had 11 total downloads so it seemed odd that someone managed to stumble upon it despite the fact that I did nothing to promote the CommandAPI. Little did I know that that one issue was the main motivation to keep this API alive after its initial release.</p>
<p>I would never have possible imagined in my wildest dreams that 2 years later, I would still be in contact with them and know that if I had not chosen to create this API, their server would not have survived beyond Minecraft 1.13, let alone Minecraft 1.15, two major Minecraft versions later.</p>
<hr />
<p>This project has been insane. Absolutely, utterly insane. At over 570 commits and over 450,000 additions (that includes things such as lines of code, lines of generated HTML documentation etc.), I can say without a doubt that this is indeed my biggest project ever.</p>
<hr />
<p>Anyway, I digress. I'd like to give credit to all of the people that have opened issues on the CommandAPI GitHub, for without these people, the CommandAPI would have only remained a shadow of what it is now. I'd also like to give credit to <a href="https://github.com/JorelAli/CommandAPI/stargazers">the people that have starred</a> the CommandAPI on its GitHub page.</p>
<p>I would like to personally give thanks to the following people - these are people that have made a significant contribution to the project in terms of ideas or support:</p>
<ul>
<li><strong><a href="https://github.com/Combustible">Combustible</a></strong>, who kickstarted the project by creating the CommandAPI's first issue. From this issue, this allowed the CommandAPI to have interoperability with Minecraft commands and functions which is by far the CommandAPI's most admirable feature. Additionally, Combustible helped raise awareness of the CommandAPI via the Spigot forums and Spigot issue tracker.</li>
<li><strong><a href="https://github.com/Draycia">Draycia</a></strong>, who suggested implementing lazy evaluation for argument suggestions. This has been extended to provide the CommandAPI's context-aware system for argument suggestions based on previously filled arguments.</li>
<li><strong><a href="https://github.com/HielkeMinecraft">HielkeMinecraft</a></strong>, who made three outstanding contributions to the CommandAPI. They created the suggestion of setting the result and success values of commands which improves the interoperability between commands registered with the CommandAPI and vanilla Minecraft commands. They also influenced the implementation of the requirements system to have more powerful command constraints and helped start the CommandAPI Discord server.</li>
<li><a href="https://github.com/Minenash"><strong>Minenash</strong></a>, who was the driving force for the CommandAPI's 3.0 release, which added a plethora of new arguments to the CommandAPI. Minenash's research, code prototypes, documentation examples, bug testing and code review was a tremendous help to make the 3.0 release such a feature-rich version.</li>
<li><a href="https://github.com/Michael-Ziluck"><strong>Michael-Ziluck</strong></a>, who created an amazing pull request that helped greatly improve the performance of the CommandAPI as well as structure the entire CommandAPI project into a multi-module Maven project which significantly improved the maintainability of the CommandAPI for the future.</li>
</ul>
<p>I'd also like to give a special mention to the following people that have helped find bugs or have supported the project in some way: aianlinb, Baka-Mitai, Checkium, Comeza, DerpNerb, DogeBogey, endrdragon, EnragedRabisu, i509VCB, KieranGateley, lifespan, Loapu, Marvmallow, MatrixTunnel, portlek, Ricky12Awesome, SHsuperCM, SpaceCheetah, The_Gavster, Tinkot, vladfrangu, zedwick</p>
<hr />
<p>I never really expected more than 5 or so people to use this API, so it was truly a pleasure to see everyone's responses, issues and suggestions that has made the CommandAPI what it is today.</p>
<p>Thank you so much for using the CommandAPI!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="sidebar.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
